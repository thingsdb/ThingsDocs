<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>ThingsDB documentation</title><link>https://docs.thingsdb.io/v0/</link><description>Recent content on ThingsDB documentation</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="https://docs.thingsdb.io/v0/index.xml" rel="self" type="application/rss+xml"/><item><title>Build from source</title><link>https://docs.thingsdb.io/v0/getting-started/build-from-source/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/getting-started/build-from-source/</guid><description>Install the following dependencies:
libuv1 libpcre2 libyajl libcleri (&amp;gt;=0.12.1) When using Debian/Ubuntu; libuv1, libpcre2 and libyajl can be installed using apt:
sudo apt-get install -y \ libuv1-dev \ libpcre2-dev \ libyajl-dev At least version 0.12.1 for library libcleri-dev is required.
git clone https://github.com/transceptor-technology/libcleri.git cd libcleri/Release make sudo make install Next, clone the project
git clone https://github.com/thingsdb/ThingsDB.git cd ThingsDB/Release make clean &amp;amp;&amp;amp; make You might want to create a symlink like this:</description></item><item><title>Configuration</title><link>https://docs.thingsdb.io/v0/getting-started/configuration/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/getting-started/configuration/</guid><description>ThingsDB can start with a configuration file and/or with environment variables. However be aware that the environment variables will overwrite the configuration file settings if both apply to the same setting.
Variable Default Description THINGSDB_BIND_CLIENT_ADDR 127.0.0.1 Bind client connections to this address. This variable both allows an IPv4 address like 0.0.0.0 or IPv6 like ::. THINGSDB_BIND_NODE_ADDR 127.0.0.1 Bind node connections to this address.</description></item><item><title>Start up node</title><link>https://docs.thingsdb.io/v0/getting-started/start-up-node/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/getting-started/start-up-node/</guid><description>ThingsDB can work with a single node but is designed to work with at least two nodes but three nodes are preferred. Running on three nodes brings redundancy and ensures the database stays operational, even while you for example upgrade ThingsDB to a newer version.
After building the source code and making a symlink, you can start your first node using the following command. You need to add the --init flag to initialize a new ThingsDB store.</description></item><item><title>Readiness and liveness</title><link>https://docs.thingsdb.io/v0/getting-started/readiness-liveness/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/getting-started/readiness-liveness/</guid><description>When http_status_port is set in the configuration file or the environment variable THINGSDB_HTTP_STATUS_PORT then /status, /ready and /healthy are available. These can be used for readiness and liveness requests.
Liveness The ThingsDB /healthy check will respond with a 200 OK whenever possible and will never respond with an error. So only if no response is received in some reasonable amount of time, the node should be considered as unhealthy. It is common to use the /healthy check as liveness probe in environments like Kubernetes.</description></item><item><title>Authentication</title><link>https://docs.thingsdb.io/v0/connect/authentication/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/connect/authentication/</guid><description>ThingsDB supports authentication by using a user and password combination, or with a token. A default user admin with password pass is created on a fresh installation. If you did not yet change the default password, you might want to jump to set password or jump to token authentication.
It might be a good idea to create a new user with minimal privileges and add a new token for this user.</description></item><item><title>HTTP API</title><link>https://docs.thingsdb.io/v0/connect/http-api/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/connect/http-api/</guid><description>Before using the HTTP API, make sure at least one node has the API port enabled. By default the API port is enabled and listening to TCP port 9210, but can be disabled or changed with the http_api_port in the configuration file or with the THINGSDB_HTTP_API_PORT environment variable.
The API has support for both MessagePack and JSON and can be used to perform queries and run procedures.
Use MessagePack if possible since this is the data serialization protocol which is used by ThingsDB internally and will therefore be a faster than JSON.</description></item><item><title>Python</title><link>https://docs.thingsdb.io/v0/connect/python/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/connect/python/</guid><description>Installation The python-thingsdb library requires Python 3.6 or higher.
Just use pip:
pip install python-thingsdb Or, clone the project and use setup.py:
python setup.py install Quick usage import asyncio from thingsdb.client import Client async def hello_world(): client = Client() # replace `localhost` with your ThingsDB server address await client.connect(&amp;#39;localhost&amp;#39;) try: # replace `admin` and `pass` with your username and password # or use a valid token string await client.authenticate(&amp;#39;admin&amp;#39;, &amp;#39;pass&amp;#39;) # perform the hello world code.</description></item><item><title>Go</title><link>https://docs.thingsdb.io/v0/connect/go/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/connect/go/</guid><description>Installation Simple install the package to your $GOPATH with the go tool from shell:
$ go get github.com/thingsdb/go-thingsdb Make sure Git is installed on your machine and in your system&amp;rsquo;s PATH.
Quick usage package main import ( &amp;#34;crypto/tls&amp;#34; &amp;#34;fmt&amp;#34; thingsdb &amp;#34;github.com/thingsdb/go-thingsdb&amp;#34; ) func example(conn *thingsdb.Conn, res chan interface{}) { var data interface{} var err error if err := conn.Connect(); err != nil { res &amp;lt;- err return } defer conn.Close() if err := conn.</description></item><item><title>Example ping</title><link>https://docs.thingsdb.io/v0/connect/socket/ping/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/connect/socket/ping/</guid><description>Can be used as keep-alive. A successful ping will respond with a PONG (16)
No authorization is required for sending a ping request.
Example A Ping package has no data so we only need to construct the header:
Data length (0) \x00\x00\x00\x00 Identifier (0) \x00\x00 Ping package type (32) \x20 Inverse type check bit (223) \xdf Sending the Ping package
\x00\x00\x00\x00\x00\x00\x20\xdf Responding Pong package</description></item><item><title>Example auth</title><link>https://docs.thingsdb.io/v0/connect/socket/auth/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/connect/socket/auth/</guid><description>Used for authorizing the socket connection. A successful authentication will respond with OK (17)
Authorization can be done by using either a username and password combination or by a token.
Syntax username/password
[username, password] Syntax token
&amp;quot;token_string&amp;quot; Example username/password As an example we create an authentication package for the default admin user with password pass.
This is the package data for our authentication request:
[&amp;quot;admin&amp;quot;, &amp;quot;pass&amp;quot;]</description></item><item><title>Example query</title><link>https://docs.thingsdb.io/v0/connect/socket/query/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/connect/socket/query/</guid><description>Query ThingsDB. A successful query request will respond with a DATA (18) package.
Syntax
[scope, code, {vars}] The vars in the query are optional and may be omitted. When used, vars must be a map where the keys represent the variable names and the values the values for the variable.
The socket needs to be authorized before sending a query request. See the auth example for how to authorize a socket connection.</description></item><item><title>Example run</title><link>https://docs.thingsdb.io/v0/connect/socket/run/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/connect/socket/run/</guid><description>Run a procedure in ThingsDB. A successful run request will respond with a DATA (18) package.
Syntax
[scope, procedure, ...args] The args are parsed (and must match) to the procedure.
The socket needs to be authorized before sending a run request. See the auth example for how to authorize a socket connection.
Example As an example we assume there is a procedure created in the @thingsdb scope, called &amp;ldquo;add_one&amp;rdquo; which just adds one to a given value.</description></item><item><title>Example watch</title><link>https://docs.thingsdb.io/v0/connect/socket/watch/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/connect/socket/watch/</guid><description>Subscribe for watching a node or things in ThingsDB. A successful run request will respond with a OK (17) package.
Syntax
[scope, ...IDs] The IDs are the thing-IDs you want to watch.
The socket needs to be authorized before sending a watch request. See the auth example for how to authorize a socket connection.
Example As an example we assume that we want to watch a thing with Id 3 for mutations.</description></item><item><title>Example error response</title><link>https://docs.thingsdb.io/v0/connect/socket/error-response/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/connect/socket/error-response/</guid><description>In this example we perform a query request and assume the socket connection is not authenticated yet. We then look at the error response.
Example As an example we will perform a useless query with as code just the simple equation 1 + 1; and we will use the @thingsdb scope to perform the query on.
This is the data we want to pack:
[&amp;quot;@t&amp;quot;, &amp;quot;1 + 1;&amp;quot;]
Serializing the above using MessagePack results in the following 11 bytes:</description></item><item><title>Scopes</title><link>https://docs.thingsdb.io/v0/overview/scopes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/overview/scopes/</guid><description>When sending a query, calling a procedure or subscribing to a thing, the request will require you to provide a scope. ThingsDB has three scope categories: @thingsdb, @node and @collection.
scope short description @thingsdb @t ThingsDB scope; Used for managing user accounts, collections and nodes. @node @n Current node scope; For node info and statistics from the connected node. @node:ID @n:ID Specific node scope; Get node info and statistics from a specific node Id (Id should be replaced with a node ID, for example 0).</description></item><item><title>Collections</title><link>https://docs.thingsdb.io/v0/overview/collections/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/overview/collections/</guid><description>Each collection can be thought of as an object to which properties can be assigned. We call such an object a Thing. To access something in the collection, all you need to do, is to start with a . (dot), followed by a function or property name. Another way to access the collection is to use the collection&amp;rsquo;s Id. All things which are stored in ThingsDB get an unique Id. Since the collection root is also a Thing, it has its own id.</description></item><item><title>Names</title><link>https://docs.thingsdb.io/v0/overview/names/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/overview/names/</guid><description>The following rules apply to names in ThingsDB:
A name must start with a letter or underscore character A name cannot start with a number A name can only contain alpha-numeric characters and underscores (A-z, 0-9, and _ ) Names are case-sensitive (thing, Thing and THING are three different names) Names are restricted to 255 characters</description></item><item><title>Properties</title><link>https://docs.thingsdb.io/v0/overview/properties/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/overview/properties/</guid><description>Properties are key/value pairs which are assigned to a thing. The collection itself is also a thing to which properties can be assigned. For example: .answer = 42; creates a property answer with value 42 and the property will be assigned to the collection.
The key of a property must be of type string. If the key is not a valid name, then the property can be set by using the square bracket [.</description></item><item><title>Variable</title><link>https://docs.thingsdb.io/v0/overview/variable/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/overview/variable/</guid><description>Can be used to assign a value to a variable which can be used within a query.
Variable can be created with QUERY privileges since they do not modify the collection&amp;rsquo;s data.
To create a variable, just assign a value to a valid name.
Some valid examples:
_ = ... tmp = ... var1 = ... Variables created within a closure become local. They can only be used within the closure body.</description></item><item><title>Events</title><link>https://docs.thingsdb.io/v0/overview/events/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/overview/events/</guid><description>When a query uses a statement which makes a change to ThingsDB, then internally ThingsDB will create an event to apply these changes. Events are applied in order on each node; so database consistency is guaranteed.
A single query might contain several statements and make many changes. All changes within a query will be grouped in a single event.
In the documentation we try to make clear if a function will generate an event or not.</description></item><item><title>Slices</title><link>https://docs.thingsdb.io/v0/overview/slices/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/overview/slices/</guid><description>The following slice notation can be used:
list[start:stop:step] The start and stop value will default to nil and step has a default value of 1. For understanding slices it is important to remember that the :stop value represents the first value that is not in the selected slice. This means that the difference between stop and start is the number of selected items. (assuming that step is the default value 1)</description></item><item><title>Template Strings</title><link>https://docs.thingsdb.io/v0/overview/template-strings/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/overview/template-strings/</guid><description>Template strings allows you to use embedded ThingsDB expressions to generate a string constant. Template strings are enclosed by the backtick (`) character instead of double or single quotes.
Here is an example of how they may be used:
a = 6; b = 7; `The sum of {a} plus {b} is {a + b}.`; Result in JSON format:
&amp;#34;The sum of 6 plus 7 is 13.&amp;#34; If you wish to use the backtick character or curly brackets inside your string, then you need to escape those by using the same character twice.</description></item><item><title>Dictionary</title><link>https://docs.thingsdb.io/v0/overview/dictionary/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/overview/dictionary/</guid><description>The following list contains definitions specific for ThingsDB:
Keyword Definition Collection The collection is the root thing. Every collection has its own scope. Computed properties With computed properties it is possible to return computed values by wrapping a Type. Closure A Closure is a user defined method which can be saved. It can be used as a prepared piece of code or to consume items from a thing, list, tuple or set.</description></item><item><title>bool</title><link>https://docs.thingsdb.io/v0/data-types/bool/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/bool/</guid><description>Booleans are either true or false. Other types can convert to bool by using the ! (not) operator or the bool function.
This code creates a bool property is_the_earth_flat to collection stuff:
.is_the_earth_flat = !true; Related functions Function Description bool Create a new boolean value. is_bool Test if a given value is of type bool.</description></item><item><title>len</title><link>https://docs.thingsdb.io/v0/data-types/bytes/len/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/bytes/len/</guid><description>Returns the length of the bytes value.
This function does not generate an event.
Function bytes.len()
Arguments None
Return value Returns length of the byte sequence.
Example This code uses len() to return the length of a byte sequence:
bytes(&amp;quot;abc&amp;quot;).len(); Return value in JSON format
3</description></item><item><title>call</title><link>https://docs.thingsdb.io/v0/data-types/closure/call/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/closure/call/</guid><description>Call a closure.
When assigned to a variable, it is not required to explicitly write the call function. Simply calling the closure by using () will work as well.
This function does not generate an event.
Function closure.call()
Arguments The arguments for the closure. If more arguments are given than the closure expects, the redundant arguments will be ignored. If too few arguments are given, then the remaining arguments will be set to nil.</description></item><item><title>def</title><link>https://docs.thingsdb.io/v0/data-types/closure/def/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/closure/def/</guid><description>Returns the closure definition using spaces, line-breaks and indentation (4 spaces).
This function does not generate an event.
Function closure.def()
Arguments None
Return value Returns the closure definition.
Example This code creates a closure with a doc string:
add_one = |x| { x + 1; }; // Return the definition as a string add_one.def(); Return value in JSON format
&amp;#34;|x| {\n x + 1;\n}&amp;#34; Or, when printed:</description></item><item><title>doc</title><link>https://docs.thingsdb.io/v0/data-types/closure/doc/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/closure/doc/</guid><description>Returns a doc string from a closure.
An empty string (&amp;quot;&amp;quot;) is returned if the closure has no doc string.
This function does not generate an event.
Function closure.doc()
Arguments None
Return value Returns the doc string.
Example This code creates a closure with a doc string:
add_one = |x| { &amp;quot;Adds one to a given value.&amp;quot;; x+1; }; // Return the doc string add_one.doc(); Return value in JSON format</description></item><item><title>extract</title><link>https://docs.thingsdb.io/v0/data-types/datetime/extract/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/datetime/extract/</guid><description>Return a thing with second, minute, hour, day, month, year and gmt_offset as individual properties.
It is possible to get a single property by using the name of the property as the first argument.
This function does not generate an event.
Function datetime.extract([key])
Arguments Argument Type Description key str (optional) May be a specific property, one of second, minute, hour, day, month, year or gmt_offset.</description></item><item><title>format</title><link>https://docs.thingsdb.io/v0/data-types/datetime/format/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/datetime/format/</guid><description>Returns a string representation for a datetime object using a custom format.
This function does not generate an event.
Function datetime.format(fmt)
Arguments Argument Type Description fmt str (required) Custom output format. Format specifiers The following specifiers may be used:
Specifier Example Description %a Wed Abbreviated weekday name. * %A Wednesday Full weekday name.</description></item><item><title>move</title><link>https://docs.thingsdb.io/v0/data-types/datetime/move/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/datetime/move/</guid><description>Return a new datetime (or timeval) object, which is shifted in time relative to the original date/time. The amount the new date/time will be shifted must be given by one of the following units: years, months, weeks, days, hours, minutes or seconds.
When using years of months as a unit, it might not be possible to move to the exact same day in the month. If this is the case, the last possible day of the month will be used.</description></item><item><title>replace</title><link>https://docs.thingsdb.io/v0/data-types/datetime/replace/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/datetime/replace/</guid><description>Return a new datetime (or timeval) object with altered properties. The new properties must be given by a thing.
This function does not generate an event.
Function datetime.replace(values)
Arguments Argument Type Description values thing (required) Only the properties year, month, day, hour, minute, second will be used, all other properties are simply ignored. Return value Returns a new datetime (or timeval) object.</description></item><item><title>to</title><link>https://docs.thingsdb.io/v0/data-types/datetime/to/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/datetime/to/</guid><description>Return a new datetime (or timeval) object with new time zone information. Note that the proper time does not change, only the time zone will change.
See time_zones_info() for a list of all available time zones.
If zone information is given using a fixed offset (+hh[mm] or -hh[mm]), then the new datetime object has no proper time zone information and thus has no day-light-saving information.
This function does not generate an event.</description></item><item><title>week</title><link>https://docs.thingsdb.io/v0/data-types/datetime/week/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/datetime/week/</guid><description>Return the week of the year as an integer between 0..53. Week 1 starts at the first Sunday in January.
This function does not generate an event.
Function datetime.week()
Arguments None
Return value Returns the week in the year as a number between 0 and 53.
Example This code uses week() as an example:
datetime(2020, 12, 10).week(); Return value in JSON format
49</description></item><item><title>weekday</title><link>https://docs.thingsdb.io/v0/data-types/datetime/weekday/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/datetime/weekday/</guid><description>Return the number of days (0..6) since the last Sunday.
This function does not generate an event.
Function datetime.weekday()
Arguments None
Return value Returns the day of the week as a number between 0 (Sunday) and 6.
Example This code uses weekday() as an example:
datetime(2020, 12, 10).weekday(); Return value in JSON format
4</description></item><item><title>yday</title><link>https://docs.thingsdb.io/v0/data-types/datetime/yday/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/datetime/yday/</guid><description>Return the day in the year as an integer value between 0..365 where the first of January is day 0.
This function does not generate an event.
Function datetime.yday()
Arguments None
Return value Returns the day in the year as a number between 0 and 365.
Example This code uses yday() as an example:
datetime(2020, 12, 10).yday(); Return value in JSON format
344</description></item><item><title>zone</title><link>https://docs.thingsdb.io/v0/data-types/datetime/zone/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/datetime/zone/</guid><description>Return zone information as a string about the datetime (or timeval) object. If no zone information is available, nil will be returned.
This function does not generate an event.
Function datetime.zone()
Arguments None
Return value Returns zone information or nil if no zone information is available.
Example This code uses zone() as an example:
[ datetime().zone(), datetime().to('Europe/Amsterdam').zone(), datetime().to('+00').zone(), ] Return value in JSON format
[ &amp;#34;UTC&amp;#34;, &amp;#34;Europe/Amsterdam&amp;#34;, null ]</description></item><item><title>name</title><link>https://docs.thingsdb.io/v0/data-types/enum/name/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/enum/name/</guid><description>Returns the name of the enumerator member.
This function does not generate an event.
Function member.name()
Arguments None
Return value Returns the name of the enumerator member.
Example This code creates a closure with a doc string:
set_enum(&amp;quot;Color&amp;quot;, { RED: '#f00' }); // Return the name of Color{RED} Color{RED}.name(); Return value in JSON format
&amp;#34;RED&amp;#34;</description></item><item><title>value</title><link>https://docs.thingsdb.io/v0/data-types/enum/value/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/enum/value/</guid><description>Returns the value of the enumerator member.
This function does not generate an event.
Function member.value()
Arguments None
Return value Returns the name of the enumerator member.
Example This code creates a closure with a doc string:
set_enum(&amp;quot;Color&amp;quot;, { RED: '#f00' }); val = Color{RED}.value(); assert( is_str( val ) ); // the value is of type `str` val.upper(); // Return the value upper case Return value in JSON format</description></item><item><title>code</title><link>https://docs.thingsdb.io/v0/data-types/error/code/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/error/code/</guid><description>Returns the error code of an error type.
This function does not generate an event.
Function error.code()
Arguments None
Return value Returns error code of an error.
Example This code uses code() to return the error code for an error:
type_err(&amp;quot;incorrect type&amp;quot;).code(); Return value in JSON format
-61</description></item><item><title>msg</title><link>https://docs.thingsdb.io/v0/data-types/error/msg/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/error/msg/</guid><description>Returns the error message of an error type.
This function does not generate an event.
Function error.msg()
Arguments None
Return value Returns error message of an error.
Example This code uses code() to return the error code for an error:
type_err(&amp;quot;incorrect type&amp;quot;).msg(); Return value in JSON format
&amp;#34;incorrect type&amp;#34;</description></item><item><title>float</title><link>https://docs.thingsdb.io/v0/data-types/float/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/float/</guid><description>ThingsDB uses 64bit to store float values and has support for the e notation and special float values like inf, -inf and nan.
Useful functions Function Description float return a float type for a given value. is_float check if the given value is of the float type. is_inf check if the given value is infinite. is_nan check if the given value is not-a-number.</description></item><item><title>then</title><link>https://docs.thingsdb.io/v0/data-types/future/then/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/future/then/</guid><description>Function then accepts a closure as argument which will be executed only when the future is successful. The code inside the closure will only generate an event then the closure code is executed. The return value of the closure will be used as the new future value.
The closure will be called with the same arguments as given to the future, except for the first argument, which can be the result of a module.</description></item><item><title>else</title><link>https://docs.thingsdb.io/v0/data-types/future/else/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/future/else/</guid><description>Function else accepts a closure as argument which will be executed only when the future is using a module which has failed with some error. The code inside the closure will only generate an event then the closure code is executed. The return value of the closure will be used as the new future value.
The closure will be called with the same arguments as given to the future, except for the first argument, which is the error from the module.</description></item><item><title>int</title><link>https://docs.thingsdb.io/v0/data-types/int/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/int/</guid><description>ThingsDB can store 64bit signed integer values. When assigning integer values larger than 64bit, an overflow_err() will be returned. Other types can be converted to int by using the int function.
Notations Base Example Description 2 0b1111011 Binary notation starts with 0b (zero, lower case b), followed by binary digits (0-1). 8 0o173 Octal notation starts with 0o (zero, lower case o), followed by octal digits (0-8).</description></item><item><title>choice</title><link>https://docs.thingsdb.io/v0/data-types/list/choice/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/choice/</guid><description>This function returns a pseudo-random item from a list or tuple . The array must contain at least one item, otherwise a lookup_err() is raised.
This function does not generate an event.
Function array.choice()
Arguments None
Return value A pseudo-random item from the array.
Example This code shows an example using choice():
// Returns either `a`, `b` or `c` ['a', 'b', 'c'].choice(); Example return value in JSON format</description></item><item><title>each</title><link>https://docs.thingsdb.io/v0/data-types/list/each/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/each/</guid><description>Iterate over all the items in an list or tuple. Use this functions instead of map when you are not interested in the return value.
This function does not generate an event.
Function array.each(callback)
Arguments Argument Type Description callback closure (required) Closure to execute on each value. Explanation of the callback argument:
Iterable Arguments Description array item, index Iterate over all items in the array.</description></item><item><title>every</title><link>https://docs.thingsdb.io/v0/data-types/list/every/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/every/</guid><description>This function checks if all items in the list or tuple pass a given test. It returns a boolean value.
Calling this function on an empty array returns true for any condition!
This function does not generate an event.
Function array.every(callback)
Arguments Argument Type Description callback closure Closure to execute on each value until the closure evaluates to false. Explanation of the callback argument:</description></item><item><title>extend</title><link>https://docs.thingsdb.io/v0/data-types/list/extend/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/extend/</guid><description>Adds a list or tuple with items to the end of a list, and returns the new length.
This function generates an event (except when called on a variable).
Function list.extend(list)
Arguments Argument Type Description list list/tuple The list or tuple to extend the list with. Return value Returns the new length of the list.
Example This code extends a list with a given array:</description></item><item><title>extend_unique</title><link>https://docs.thingsdb.io/v0/data-types/list/extend_unique/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/extend_unique/</guid><description>Adds a list or tuple with items to the end of a list, and returns the new length. Only items which do not have a duplicate in the list will be added.
An item in the list is marked as a duplicate when an item is compared as equal to another item using the == operator.
If the original list contains duplicate items, those items remain untouched. See example 2.</description></item><item><title>filter</title><link>https://docs.thingsdb.io/v0/data-types/list/filter/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/filter/</guid><description>The function returns a new list with items that pass the test.
This function does not generate an event.
Function array.filter(callback)
Arguments Argument Type Description callback closure (required) Closure to execute on each value. Explanation of the callback argument:
Iterable Arguments Description array item, index Iterate over all items in the array. Both item and index are optional.</description></item><item><title>find</title><link>https://docs.thingsdb.io/v0/data-types/list/find/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/find/</guid><description>This function returns the value of the first item in the list or tuple that passes the test. Otherwise nil is returned if no alternative return value is specified.
This function does not generate an event.
Function array.find(callback, [alt])
Arguments Argument Type Description callback closure Closure to execute on each value until the closure evaluates to true. alt any (optional) Alternative value which is returned if no item has passed the callback test.</description></item><item><title>find_index</title><link>https://docs.thingsdb.io/v0/data-types/list/find_index/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/find_index/</guid><description>This function returns the index of the first item in a list or tuple that passes the test. Otherwise nil is returned.
This function does not generate an event.
Function array.find_index(callback)
Arguments Argument Type Description callback closure The statement to try. Explanation of the callback argument:
Iterable Callback arguments Description array item, index Iterate over items in the array.</description></item><item><title>first</title><link>https://docs.thingsdb.io/v0/data-types/list/first/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/first/</guid><description>Returns the first item in the list. A lookup_err() is raised when this function is used on an empty list unless a default value is given, in which case the given value will be returned.
ThingsDB uses lazy-evaluation of function arguments. For this reason the default value might be a function call or code block which will only be evaluated when the list is empty.
This function does not generate an event.</description></item><item><title>has</title><link>https://docs.thingsdb.io/v0/data-types/list/has/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/has/</guid><description>Determines if a list or tuple has a given value.
This function does not generate an event.
Function array.has(value)
Arguments Argument Type Description value any (required) Value to check. Return value Returns true if the given value is found in the list and otherwise false.
Example This code shows an example use case of has():
months = [&amp;quot;January&amp;quot;, &amp;quot;February&amp;quot;, &amp;quot;March&amp;quot;, &amp;quot;April&amp;quot;]; [ months.</description></item><item><title>index_of</title><link>https://docs.thingsdb.io/v0/data-types/list/index_of/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/index_of/</guid><description>The function returns the first index of the item in a list or tuple that matches the provided value, otherwise nil if it is not present. The index of an array starts at 0, so the first item has index 0 the second 1 and so on.
This function does not generate an event.
Function array.index_of(value)
Arguments Argument Type Description value any The value to find the index for.</description></item><item><title>is_unique</title><link>https://docs.thingsdb.io/v0/data-types/list/is_unique/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/is_unique/</guid><description>This function determines whether each item in a list is unique or not.
An item in the list is marked as a duplicate when an item is compared as equal to another item using the == operator.
This function does not generate an event.
Function list.is_unique()
Arguments None
Return value Returns true if each item in the list is unique or false if not.
Example This code shows some return values for is_unique():</description></item><item><title>join</title><link>https://docs.thingsdb.io/v0/data-types/list/join/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/join/</guid><description>This function returns a new string by concatenating all items in a list or tuple. All items in the list or tuple must be of type str, otherwise a type_err() is raised.
This function does not generate an event.
Function array.join([separator])
Arguments Argument Type Description separator str (optional) Optional separator. The default separator is an empty string (&amp;quot;&amp;quot;) which results in a string with all items joined without any characters in between.</description></item><item><title>last</title><link>https://docs.thingsdb.io/v0/data-types/list/last/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/last/</guid><description>Returns the last item in the list. A lookup_err() is raised when this function is used on an empty list unless a default value is given, in which case the given value will be returned.
ThingsDB uses lazy-evaluation of function arguments. For this reason the default value might be a function call or code block which will only be evaluated when the list is empty.
This function does not generate an event.</description></item><item><title>len</title><link>https://docs.thingsdb.io/v0/data-types/list/len/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/len/</guid><description>Returns the length of a list or tuple.
This function does not generate an event.
Function array.len()
Arguments None
Return value Returns length of the array.
Example This code uses len() to return the number of items in a collection:
[1, 2, 3, 4].len(); Return value in JSON format
4</description></item><item><title>map</title><link>https://docs.thingsdb.io/v0/data-types/list/map/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/map/</guid><description>The function iterates over items in an list or tuple and returns a new list based on the results of a given callback function.
This function does not generate an event.
Function array.map(callback)
Arguments Argument Type Description callback closure (required) Closure to execute on each value. Explanation of the callback argument:
Iterable Arguments Description array item, index Iterate over all items in the array.</description></item><item><title>pop</title><link>https://docs.thingsdb.io/v0/data-types/list/pop/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/pop/</guid><description>Removes the last item from a list and returns that item.
This function changes the length of the list. The pop() function works on a list type array, but not on a tuple since tuples are immutable.
This function generates an event (except when called on a variable).
Function list.pop()
Arguments None
Return value The removed item from the list. A lookup_err() is raised if the list is empty.
Example This code show an example usage of pop():</description></item><item><title>push</title><link>https://docs.thingsdb.io/v0/data-types/list/push/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/push/</guid><description>Adds new items to the end of a list, and returns the new length.
This function generates an event (except when called on a variable).
Function list.push(item1, item2, ..., itemX)
Return value Returns the new length of the list.
Example This code pushes values to a list:
list = [1, 2, 3]; list.push(4, 5, 6); // Returns the new length, 6 list; Return value in JSON format</description></item><item><title>reduce</title><link>https://docs.thingsdb.io/v0/data-types/list/reduce/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/reduce/</guid><description>Executes a given reducer closure on every item of the list, accumulating to a single return value.
This function does not generate an event.
Function array.reduce(reducer, [initial])
Arguments Argument Type Description reducer closure (required) Closure to execute on every value (except for the first, if no initial value is provided). initial any (optional) The initial value serves as the first argument of the callback during the first call.</description></item><item><title>remove</title><link>https://docs.thingsdb.io/v0/data-types/list/remove/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/remove/</guid><description>This function removes and returns the value of the first item in the list that satisfies the callback function. Otherwise nil is returned if no alternative return value is specified.
This function generates an event (except when called on a variable).
Function list.remove(callback, [alt])
Arguments Argument Type Description callback closure Closure to execute on each value until the closure evaluates to true. alt any (optional) Alternative value which is returned if no item has passed the callback test.</description></item><item><title>reverse</title><link>https://docs.thingsdb.io/v0/data-types/list/reverse/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/reverse/</guid><description>The function returns a new list with items in reverse order.
This function does not generate an event.
Function array.reverse()
Arguments None
Return value A new list in reverse order.
Examples Simple sort
// return a range in reverse order range(5).reverse() Return value in JSON format
[ 4, 3, 2, 1, 0 ]</description></item><item><title>shift</title><link>https://docs.thingsdb.io/v0/data-types/list/shift/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/shift/</guid><description>Removes the first item from a list and returns that item.
This function changes the length of the list. The shift() function works on a list type array, but not on a tuple since tuples are immutable.
This function generates an event (except when called on a variable).
Function list.shift()
Arguments None
Return value The removed item from the list. A lookup_err() is raised if the list is empty.
Example This code show an example usage of shift():</description></item><item><title>some</title><link>https://docs.thingsdb.io/v0/data-types/list/some/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/some/</guid><description>This function checks if at least one item in the list or tuple passes a given test. It returns a boolean value.
Calling this function on an empty array returns false for any condition!
This function does not generate an event.
Function array.some(callback)
Arguments Argument Type Description callback closure Closure to execute on each value until the closure evaluates to true. Explanation of the callback argument:</description></item><item><title>sort</title><link>https://docs.thingsdb.io/v0/data-types/list/sort/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/sort/</guid><description>When this function is used on a list or tuple, a new sorted list is returned.
This function does not generate an event.
Function array.sort([closure, [reverse]])
Arguments Argument Type Description callback closure (optional) Closure to execute on each value, which is used to determine how the list should be sorted. reverse bool (optional) Determines the order of the returned list. The reverse argument cannot be used together with a closure which takes two arguments.</description></item><item><title>splice</title><link>https://docs.thingsdb.io/v0/data-types/list/splice/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/splice/</guid><description>The splice() function changes a list by removing or replacing existing items and/or adding new items.
This function generates an event (except when called on a variable).
Function list.splice(start, [delete_count, [item1, item2, ..., itemX]]))`
Arguments Argument Type Description start int (required) Start index in the list. If it is negative, it will start that many items from the end of the list. delete_count int (optional) Number of item to remove from thestart of the list.</description></item><item><title>unique</title><link>https://docs.thingsdb.io/v0/data-types/list/unique/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/unique/</guid><description>This function returns a new list where each item in the list is unique. If duplicated items are found, the first item will be retained.
An item in the list is marked as a duplicate when an item is compared as equal to another item using the == operator.
This function does not generate an event.
Function list.unique()
Arguments None
Return value Returns a new list where each item in the list is unique.</description></item><item><title>unshift</title><link>https://docs.thingsdb.io/v0/data-types/list/unshift/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/list/unshift/</guid><description>Adds new items to the start of a list, and returns the new length.
This function generates an event (except when called on a variable).
Function list.unshift(item1, item2, ..., itemX)
Return value Returns the new length of the list.
Example This code inserts values to the start of a list:
list = [4, 5, 6]; list.unshift(1, 2, 3); // Returns the new length, 6 list; Return value in JSON format</description></item><item><title>len</title><link>https://docs.thingsdb.io/v0/data-types/mpdata/len/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/mpdata/len/</guid><description>Returns the length of mpdata in bytes.
This function does not generate an event.
Function mpdata.len()
Arguments None
Return value Returns length in bytes.
Example This code uses len():
user_info('admin').len(); Example return value in JSON format (size may be different)
358</description></item><item><title>load</title><link>https://docs.thingsdb.io/v0/data-types/mpdata/load/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/mpdata/load/</guid><description>Load mpdata into ThingsDB.
This function does not generate an event.
Function mpdata.load()
Arguments None
Return value Returns a ThingsDB object.
Example This code uses load():
admin = user_info('admin').load(); // `admin` is now a ThingDB object. admin.name; Return value in JSON format
&amp;#34;admin&amp;#34;</description></item><item><title>nil</title><link>https://docs.thingsdb.io/v0/data-types/nil/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/nil/</guid><description>Probably the most simple type, it can be used as no value.
It might be convenient to use nil as the last statement in a query to prevent returning data which is not required. See the code example.
This code uses nil to prevent returning unused data:
my_array = [1, 2, 3, 42]; nil; /* without nil, the array above would be returned */ Return value in JSON format</description></item><item><title>test</title><link>https://docs.thingsdb.io/v0/data-types/regex/test/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/regex/test/</guid><description>Test if a string matches a given regular expression and return true or false.
This function does not generate an event.
Function regex.test(string)
Arguments Argument Type Description string str (required) The string to test. Return value true if there is a match between the string and the regular expression, otherwise false.
Example Examples using test():
// The first regex is case sensitive, the second is case insensitive [ regex(&amp;quot;^hello&amp;quot;).</description></item><item><title>add</title><link>https://docs.thingsdb.io/v0/data-types/set/add/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/set/add/</guid><description>Adds a new thing to the set and returns the number of things which are actually added to the set. For example my_set.add(#42); will return 0 if my_set already contains thing #42.
This function generates an event (except when called on a variable).
Function set.add(thing1, thing1, ..., thingX)
Return value Returns the number of things which are added to the set.
Example This code adds things to a set:</description></item><item><title>each</title><link>https://docs.thingsdb.io/v0/data-types/set/each/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/set/each/</guid><description>Iterate over items in a set.
Be aware that the order when iterating over a set or a thing is not guaranteed.
This function does not generate an event.
Function set.each(callback)
Arguments Argument Type Description callback closure (required) Closure to execute on each value. Explanation of the callback argument:
Iterable Arguments Description set thing, Id Iterate over things in the set.</description></item><item><title>every</title><link>https://docs.thingsdb.io/v0/data-types/set/every/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/set/every/</guid><description>This function checks if all things in the set pass a given test. It returns a boolean value.
Calling this function on an empty set returns true for any condition!
This function does not generate an event.
Function set.every(callback)
Arguments Argument Type Description callback closure Closure to execute on each thing until the closure evaluates to false. Explanation of the callback argument:</description></item><item><title>filter</title><link>https://docs.thingsdb.io/v0/data-types/set/filter/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/set/filter/</guid><description>The function returns a new set with things that pass the test.
This function does not generate an event.
Function set.filter(callback)
Arguments Argument Type Description callback closure (required) Closure to execute on each value. Explanation of the callback argument:
Iterable Arguments Description set thing, Id Iterate over things in the set. Both thing and id are optional.</description></item><item><title>find</title><link>https://docs.thingsdb.io/v0/data-types/set/find/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/set/find/</guid><description>This function returns the value of the first item in the set that passes the test. Otherwise nil is returned if no alternative return value is specified.
This function does not generate an event.
The return value when called on a set might be unpredictable since a set is not ordered. set({name: 'Iris'}, {name: 'Cato'}).find(||true); &amp;hellip;will return {Iris} or {Cato}.
Function set.find(callback, [alt])
Arguments Argument Type Description callback closure Closure to execute on each value until the closure evaluates to true.</description></item><item><title>has</title><link>https://docs.thingsdb.io/v0/data-types/set/has/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/set/has/</guid><description>Determines if a set has a given thing.
This function does not generate an event.
Function set.has(thing)
Arguments Argument Type Description thing thing (required) Thing to check. Return value Returns true if the given thing is found in the set and otherwise false.
Example This code shows an example use case of has():
iris = {name: 'Iris'}; s = set(iris); /* Check if iris is in set `s` */ s.</description></item><item><title>len</title><link>https://docs.thingsdb.io/v0/data-types/set/len/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/set/len/</guid><description>Returns the length of a set.
This function does not generate an event.
Function set.len()
Arguments None
Return value Returns length of the set.
Example This code uses len() to return the number of items in a set:
set({item: 'a'}, {item: 'b'}).len(); Return value in JSON format
2</description></item><item><title>map</title><link>https://docs.thingsdb.io/v0/data-types/set/map/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/set/map/</guid><description>The function iterates over items in a set and returns a new list based on the results of a given callback function.
Be aware that the order when iterating over a set or a thing is not guaranteed.
This function does not generate an event.
Function set.map(callback)
Arguments Explanation of the callback argument:
Iterable Arguments Description set thing, Id Iterate over things in the set.</description></item><item><title>reduce</title><link>https://docs.thingsdb.io/v0/data-types/set/reduce/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/set/reduce/</guid><description>Executes a given reducer closure on every thing in the set, accumulating to a single return value.
A set is unordered and therefore the order how things are processed by the reducer might be different from what you expect.
This function does not generate an event.
Function set.reduce(reducer, [initial])
Arguments Argument Type Description reducer closure (required) Closure to execute on every thing (except for the first, if no initial value is provided).</description></item><item><title>remove</title><link>https://docs.thingsdb.io/v0/data-types/set/remove/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/set/remove/</guid><description>This function can be used to remove things from a set.
If a closure is used, then all things that satisfy the test are removed from the set and returned as list. The order of the removed things is not guaranteed since the set itself is unordered.
It is also possible to specify things as arguments. In this case a list is returned with all the things which are removed from the set, in the order that the arguments are used.</description></item><item><title>some</title><link>https://docs.thingsdb.io/v0/data-types/set/some/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/set/some/</guid><description>This function checks if at least one thing in the set passes a given test. It returns a boolean value.
Calling this function on an empty set returns false for any condition!
This function does not generate an event.
Function set.some(callback)
Arguments Argument Type Description callback closure Closure to execute on each thing until the closure evaluates to true. Explanation of the callback argument:</description></item><item><title>contains</title><link>https://docs.thingsdb.io/v0/data-types/str/contains/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/str/contains/</guid><description>Determines if a given string is a substring of a string.
This function does not generate an event.
Function str.contains(search_string)
Arguments Argument Type Description search_string str (required) The characters to be searched for in the string. Return value Returns true if the given characters are found as a substring and otherwise false.
Example This code shows an example using contains():</description></item><item><title>ends_with</title><link>https://docs.thingsdb.io/v0/data-types/str/ends_with/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/str/ends_with/</guid><description>Determines if a string ends with characters given by another string.
This function does not generate an event.
Function str.ends_with(search_string)
Arguments Argument Type Description search_string str (required) The characters to be searched for at the end of this string. Return value Returns true if the given characters are found at the end of the string and otherwise false.
Example This code shows an example using ends_with():</description></item><item><title>len</title><link>https://docs.thingsdb.io/v0/data-types/str/len/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/str/len/</guid><description>Returns the length of a string.
Be aware that the length represents the number of bytes and not the number of characters. see example below.
This function does not generate an event.
Function str.len()
Arguments None
Return value Returns length of the string.
Example This code uses len() to return the length of a string:
[ {'Hello'.len(); /* 5 bytes */ }, {'π'.len(); /* 2 bytes, not 1 */ }, ] Return value in JSON format</description></item><item><title>lower</title><link>https://docs.thingsdb.io/v0/data-types/str/lower/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/str/lower/</guid><description>Return a new string in which all case-based characters are in lower case.
This function does not generate an event.
Function str.lower()
Arguments None
Return value Returns a new string with all characters in lower case.
Example Example using lower():
'Hello World!!'.lower(); Return value in JSON format
&amp;#34;hello world!!&amp;#34;</description></item><item><title>replace</title><link>https://docs.thingsdb.io/v0/data-types/str/replace/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/str/replace/</guid><description>Return a new string in which in which the occurrences of old have been replaced with new. Instead of an old string it is also possible to use a regular expression and the new string may also be a closure which then in turn should return a new string to replace the old part with.
Optionally, the number of replacements can be restricted and may start from either left or right (Unless a regular expression is used, in which case the number of replacements can only be restricted from the left).</description></item><item><title>split</title><link>https://docs.thingsdb.io/v0/data-types/str/split/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/str/split/</guid><description>Return a new string in which all case-based characters are in lower case.
This function does not generate an event.
Function str.split([separator], [limit])
Arguments Argument Type Description separator str/regex (optional) The string used to split the original string. If omitted, white-space will be used as separator. Instead of a string, a regular expression may be used as well, see regular expression. limit int (optional) Split at most limit times.</description></item><item><title>starts_with</title><link>https://docs.thingsdb.io/v0/data-types/str/starts_with/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/str/starts_with/</guid><description>Determines if a string starts with characters given by another string.
This function does not generate an event.
Function str.starts_with(search_string)
Arguments Argument Type Description search_string str (required) The characters to be searched for at the start of this string. Return value Returns true if the given characters are found at the start of the string and otherwise false.
Example This code shows an example using starts_with():</description></item><item><title>test</title><link>https://docs.thingsdb.io/v0/data-types/str/test/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/str/test/</guid><description>This function is deprecated and should be replaced with test(..) on type regex.
Test if a string matches a given regular expression and return true or false.
This function does not generate an event.
Function str.test(regex)
Arguments Argument Type Description regex regex (required) The regular expression to test against the string. Return value true if there is a match between the string and the specified regular expression, otherwise false.</description></item><item><title>trim</title><link>https://docs.thingsdb.io/v0/data-types/str/trim/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/str/trim/</guid><description>This function can be used to remove all white-space characters from both the start and end of a string. Whitespace characters include spaces, tabs, new-line characters etc.
This function does not generate an event.
Function str.trim()
Arguments None
Return value Returns a new string with whitespace characters removed from the start and end of the string.
See also trim_left trim_right Example Example using trim():
' Hello World!</description></item><item><title>trim_left</title><link>https://docs.thingsdb.io/v0/data-types/str/trim_left/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/str/trim_left/</guid><description>This function can be used to remove all white-space characters from the start of a string. Whitespace characters include spaces, tabs, new-line characters etc.
This function does not generate an event.
Function str.trim_left()
Arguments None
Return value Returns a new string with whitespace characters removed from the start of the string.
See also trim trim_right Example Example using trim_left():
' Hello World!! '.trim_left(); Return value in JSON format</description></item><item><title>trim_right</title><link>https://docs.thingsdb.io/v0/data-types/str/trim_right/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/str/trim_right/</guid><description>This function can be used to remove all white-space characters from the end of a string. Whitespace characters include spaces, tabs, new-line characters etc.
This function does not generate an event.
Function str.trim_right()
Arguments None
Return value Returns a new string with whitespace characters removed from the end of the string.
See also trim trim_left Example Example using trim_right():
' Hello World!! '.trim_right(); Return value in JSON format</description></item><item><title>upper</title><link>https://docs.thingsdb.io/v0/data-types/str/upper/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/str/upper/</guid><description>Return a new string in which all case-based characters are in upper case.
This function does not generate an event.
Function str.upper()
Arguments None
Return value Returns a new string with all characters in upper case.
Example Example using upper():
'Hello World!!'.upper(); Return value in JSON format
&amp;#34;HELLO WORLD!!&amp;#34;</description></item><item><title>assign</title><link>https://docs.thingsdb.io/v0/data-types/thing/assign/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/assign/</guid><description>Copies properties from a given thing. Existing properties will be overwritten and new properties will be added. If this function is used on an instance of a custom Type, all properties of the source must be valid according the type specification, otherwise an exception will be raised and no properties will be copied.
It is not possible to use assign(..) to set a property with a relation unless the source if of the same Type.</description></item><item><title>copy</title><link>https://docs.thingsdb.io/v0/data-types/thing/copy/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/copy/</guid><description>Copy a thing.
The function does not preserve the Type of a thing. Use dup(..) if you want a copy of the same type.
This function does not generate an event.
Function thing.copy([deep]])
Arguments Argument Type Description deep int (optional) How deep to copy the thing. Default is 1. Return value A new thing.
Example This code shows an example using copy():</description></item><item><title>del</title><link>https://docs.thingsdb.io/v0/data-types/thing/del/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/del/</guid><description>Delete a property from a thing.
While almost all functions on things are also available on Type instances, this one is not. This is because a Type instance has a fixed set of properties and so you are not allowed to delete one of them on a single instance. Use mod_type() instead, to delete the property from all instances if this is what you want.
This function generates an event.</description></item><item><title>dup</title><link>https://docs.thingsdb.io/v0/data-types/thing/dup/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/dup/</guid><description>Create a duplicate of a thing.
The function preserves the Type of a thing. Use copy(..) to copy into a plain thing.
This function does not generate an event.
Function thing.dup([deep]])
Arguments Argument Type Description deep int (optional) How deep to duplicate the thing. Default is 1. Return value A new thing.
Example This code shows an example using dup():</description></item><item><title>each</title><link>https://docs.thingsdb.io/v0/data-types/thing/each/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/each/</guid><description>Iterate over all properties on a thing.
Be aware that the order when iterating over a thing is not guaranteed.
This function does not generate an event.
Function thing.each(callback)
Arguments Argument Type Description callback closure (required) Closure to execute on each value. Explanation of the callback argument:
Iterable Arguments Description thing name, value Iterate over the thing properties.</description></item><item><title>emit</title><link>https://docs.thingsdb.io/v0/data-types/thing/emit/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/emit/</guid><description>Emit an event to all watchers of a thing. The event is a string value which you are free to choose. It is possible, but not required, to send extra arguments with the event.
When you emit an event, the event is handled by ThingsDB just as any other event and thus the order in which they are send to the client is guaranteed.
This function generates an event.</description></item><item><title>equals</title><link>https://docs.thingsdb.io/v0/data-types/thing/equals/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/equals/</guid><description>Determines if a thing is equal to another thing.
Comparing things is usually done with a strict compare, for example:
{} == {}; // This is *false* because left and right are not the same object Function equals can be used to perform a weak compare, for example:
{}.equals({}); // This is *true*, both objects have the same content. By default the equals function will only compare values one level deep.</description></item><item><title>filter</title><link>https://docs.thingsdb.io/v0/data-types/thing/filter/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/filter/</guid><description>The function returns a new thing with properties that pass the test.
This function does not generate an event.
Function thing.filter(callback)
Arguments Argument Type Description callback closure (required) Closure to execute on each value. Explanation of the callback argument:
Iterable Arguments Description thing name, value Iterate over the thing properties. Both name and value are optional.</description></item><item><title>get</title><link>https://docs.thingsdb.io/v0/data-types/thing/get/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/get/</guid><description>Return the value of a property on a thing by a given property name. If the property is not found then the return value will be nil, unless an alternative return value is given.
This function does not generate an event.
Function thing.get(name [, alt])
Arguments Argument Type Description name str (required) Name of the property where to return the value for. alt any (optional) Optional return value.</description></item><item><title>has</title><link>https://docs.thingsdb.io/v0/data-types/thing/has/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/has/</guid><description>Determines if a thing has a given property.
This function does not generate an event.
Function thing.has(name)
Arguments Argument Type Description name str (required) Name of the property to check. Return value Returns true when the given property name is found and otherwise false.
Example This code shows an example use case of has():
tmp = {name: 'Iris'}; /* Check if `tmp` has a property `name` */ tmp.</description></item><item><title>id</title><link>https://docs.thingsdb.io/v0/data-types/thing/id/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/id/</guid><description>Returns the id of a thing or nil if the thing is not stored.
This function does not generate an event.
Function thing.id()
Arguments None
Return value Returns id of a thing or nil when the thing is not stored.
Example This code uses id() to return a collection id:
.id(); // Returns the collection id Example return value in JSON format
3</description></item><item><title>keys</title><link>https://docs.thingsdb.io/v0/data-types/thing/keys/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/keys/</guid><description>keys The function returns a list with all the property names of a thing. The same could be returned using map so the following statement is true:
.keys() == .map(|k| k)
Although the keys() and map() functions in the example above will return a list with the same order, the order of keys in the list is not guaranteed and may be different each time you run the query.
This function does not generate an event.</description></item><item><title>len</title><link>https://docs.thingsdb.io/v0/data-types/thing/len/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/len/</guid><description>Returns the number of items in a thing.
This function does not generate an event.
Function thing.len()
Arguments None
Return value Returns the number of items in a thing.
Example This code uses len() to return the number of items in a thing:
{name: 'Iris', age: 6}.len(); Return value in JSON format
2</description></item><item><title>map</title><link>https://docs.thingsdb.io/v0/data-types/thing/map/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/map/</guid><description>The function iterates over all properties on a thing and returns a new list based on the results of a given callback function.
Be aware that the order when iterating over a thing is not guaranteed.
This function does not generate an event.
Function thing.map(callback)
Arguments Argument Type Description callback closure (required) Closure to execute on each value. Explanation of the callback argument:</description></item><item><title>set</title><link>https://docs.thingsdb.io/v0/data-types/thing/set/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/set/</guid><description>Creates a new property on a thing. If the property already exists then the old property will be overwritten. This function is equal to an assignment except that it can be used when the name of the property is dynamic.
This function generates an event.
Function thing.set(name, value)
Arguments Argument Type Description name str (required) The name of the property to set. value any (required) The value which will be assigned to the property.</description></item><item><title>to_type</title><link>https://docs.thingsdb.io/v0/data-types/thing/to_type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/to_type/</guid><description>Converts a thing into an instance of a given Type.
Before a thing may be converted, all the properties of the thing must have an exact match with the properties defined by the Type. It you later want to change tome properties, the function mod_type can be used.
Since the root of a collection is also a thing, it is possible to use this function to make the collection strict.</description></item><item><title>unwatch</title><link>https://docs.thingsdb.io/v0/data-types/thing/unwatch/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/unwatch/</guid><description>Stop watching for mutations on a thing. This function returns nil and triggers a stop event, only when the thing was being watched.
This function does not generate an event.
Function thing.unwatch()
Arguments None
Return value Returns nil.
Example This code shows how to use unwatch():
.unwatch(); Return value in JSON format:
null</description></item><item><title>values</title><link>https://docs.thingsdb.io/v0/data-types/thing/values/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/values/</guid><description>Returns a list with all the property values of a thing. The same could be returned using map so the following statement is true:
(.values() == .map(|_, v| v))
Although the values() and map() in the example above will return a list with the same order, the order of values in the list is not guaranteed and may be different each time you run the query.
This function does not generate an event.</description></item><item><title>watch</title><link>https://docs.thingsdb.io/v0/data-types/thing/watch/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/watch/</guid><description>Subscribe for watching mutations on a stored thing. If this function is called on a thing which is not stored, and therefore has no #ID, then a value_err() is raised. This function returns nil, but every call always triggers an init event, even if it involves multiple calls of this function on the same thing.
This function only works with socket connections. When using this function with an HTTP API request, it has no effect.</description></item><item><title>wrap</title><link>https://docs.thingsdb.io/v0/data-types/thing/wrap/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/thing/wrap/</guid><description>Wrap a thing with a another Type to filter out properties, while preserving the Id. A wrapped thing inherits the methods from the type it is wrapped with.
For a more advanced example using wrap() and unwrap() see &amp;lt;Type&amp;gt;.
Function thing.wrap(Type)
Arguments Argument Arguments Description Type str Type&amp;rsquo;s name to wrap the thing with. Return value A wrapped thing.
Example This code shows an example using wrap():</description></item><item><title>timeval</title><link>https://docs.thingsdb.io/v0/data-types/timeval/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/timeval/</guid><description>Type timeval is exactly the same as type datetime. The only difference is the default return. The return value of a timeval type is the value as a UNIX time stamp, while type datetime returns with the time as a string in ISO8601 format.
Why type timeval? It is possible to return a datetime as int(datetime) to get the UNIX time stamp, so why use timeval? It is often easier to work with time stamps then with time as string values.</description></item><item><title>tuple</title><link>https://docs.thingsdb.io/v0/data-types/tuple/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/tuple/</guid><description>All nested arrays are immutable and thus tuples.
list = []; list.push(['this list will be nested and therefore convert to a tuple']); // Check that the first item in `list` is indeed a `tuple` assert(is_tuple(list[0])); // Check that the `tuple` is indeed immutable assert(is_err(try(list[0].push('cannot be added to a tuple')))); A tuple only becomes a tuple when it is nested inside another tuple or list, which means the tuple will be immutable.</description></item><item><title>Type</title><link>https://docs.thingsdb.io/v0/data-types/type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/type/</guid><description>A Type is like a thing with pre-defined properties and/or methods. When an instance of a Type is created, all defined properties are guaranteed to exist with a value matching the Type definition.
Definable properties definition default description 'str' &amp;quot;&amp;quot; requires type str (values of type str should contain valid UTF-8 characters). 'str&amp;lt;..&amp;gt;' depends requires type str with a certain length (see length condition and default value) /pattern/ depends requires type str with a math to a specified pattern (see pattern condition).</description></item><item><title>copy</title><link>https://docs.thingsdb.io/v0/data-types/wtype/copy/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/wtype/copy/</guid><description>Copy a wrapped thing.
The function does not preserve the wrap or Type of a thing. Use dup(..) if you want a true duplicate.
This function does not generate an event.
Function &amp;lt;Type&amp;gt;.copy([deep]])
Arguments Argument Type Description deep int (optional) How deep to copy the wrapped thing. Default is 1. Return value A new thing.
Example This code shows an example using copy() on a wrapped thing:</description></item><item><title>dup</title><link>https://docs.thingsdb.io/v0/data-types/wtype/dup/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/wtype/dup/</guid><description>Duplicate a wrapped thing.
The function preserves both the wrap and Type of a thing. Use copy(..) if you want a new plain thing.
This function does not generate an event.
Function &amp;lt;Type&amp;gt;.dup([deep]])
Arguments Argument Type Description deep int (optional) How deep to duplicate the wrapped thing. Default is 1. Return value A new wrapped thing.
Example This code shows an example using dup() on a wrapped thing:</description></item><item><title>unwrap</title><link>https://docs.thingsdb.io/v0/data-types/wtype/unwrap/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/data-types/wtype/unwrap/</guid><description>Unwrap a wrapped thing.
Function &amp;lt;Type&amp;gt;.unwrap()
Arguments None
Return value Returns the wrapped thing.
Example This code shows an example using unwrap():
// Create a Type to return just an email field. set_type('_Email', {email: 'str'}); // Store a thing .joente = { name: 'Jeroen van der Heijden', email: 'jeroen@transceptor.technology', gender: 'male', }; // Wrap `joente` with the `_Email` type. .w = .joente.wrap('_Email'); // Return the original `thing` .w.unwrap(); Example return value in JSON format</description></item><item><title>Arithmetic operators</title><link>https://docs.thingsdb.io/v0/operators/arithmetic-operators/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/operators/arithmetic-operators/</guid><description>Operator Description + Addition operator. - Subtraction operator. / Division operator * Multiplication operator. % Modulo operator. Division uses float division if either the numerator or denominator is of type float.
Arithmetic examples:
[ 5 + 2, 5 - 2, 5 / 2.0, 5 / 2, 5 * 2, 5 % 2, ]; Return value in JSON format</description></item><item><title>Assignments</title><link>https://docs.thingsdb.io/v0/operators/assignments/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/operators/assignments/</guid><description>Assignments will generate an event.
Operator Description = Assignment operator. *= Multiplication assignment. /= Float division assignment. %= Modulo assignment. += Addition assignment. -= Subtraction assignment &amp;amp;= Bitwise AND assignment. ^= Bitwise XOR assignment. ` =`</description></item><item><title>Binary bitwise operators</title><link>https://docs.thingsdb.io/v0/operators/binary-bitwise-operators/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/operators/binary-bitwise-operators/</guid><description>Can be used on integer values.
Operator Description &amp;amp; Bitwise AND, true if both a and b are 1. ` ` ^ Bitwise XOR, true if a and b are different. Binary bitwise operator examples:
[ 0b110 &amp;amp; 0b011, 0b110 | 0b011, 0b110 ^ 0b011, ]; Return value in JSON format
[ 2, 7, 5 ]</description></item><item><title>Conditional ternary operator</title><link>https://docs.thingsdb.io/v0/operators/conditional-ternary-operator/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/operators/conditional-ternary-operator/</guid><description>The conditional operator returns one of two values based on the logical value of the condition.
Syntax: expression ? if-true : if-false
Conditional (ternary) operator examples:
2 &amp;gt; 1 ? 'two is greater than one' : 'two is less than one'; Return value in JSON format
&amp;#34;two is greater than one&amp;#34; It is possible to use block scopes for the if-true and if-false part for the conditional operator.</description></item><item><title>Logical operators</title><link>https://docs.thingsdb.io/v0/operators/logical-operators/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/operators/logical-operators/</guid><description>Logical operators are generally used with bool values.
Operator Description &amp;amp;&amp;amp; Logical AND. ` As logical expressions are evaluated left to right, they are tested for possible &amp;ldquo;short-circuit&amp;rdquo; evaluation. This means that the evaluation of an expression is stopped when the outcome is determined. This applies in the following two cases:
expression_1 &amp;amp;&amp;amp; expression_2 : if expression_1 evaluates to false then expression_2 is not evaluated.</description></item><item><title>Precedence and associativity</title><link>https://docs.thingsdb.io/v0/operators/precedence-and-associativity/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/operators/precedence-and-associativity/</guid><description>Symbol Type of operation Associativity () Expression parenthesis Left-to-right ! Not operator Right-to-left * / % Multiplication, Modulo, Division Left-to-right + - Add, Subtract Left-to-right &amp;amp; Bitwise AND Left-to-right ^ Bitwise XOR Left-to-right ` ` Bitwise OR == != &amp;lt;= &amp;gt;= &amp;lt; &amp;gt; Compare Left-to-right &amp;amp;&amp;amp; Logical AND Left-to-right ` ` ?</description></item><item><title>alt_raise</title><link>https://docs.thingsdb.io/v0/collection-api/alt_raise/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/alt_raise/</guid><description>This function will try a statement. If the statement is successful it will just return the result but in case of an error, it will re-raise the error using a given error code. The following code below will illustrate how alt_raise works:
Without an optional error message
// the following code: res = alt_raise(statement, error_code); // is equivalent to: res = try(statement); if (is_err(res), { raise(error_code, res.msg()); }); With an error message</description></item><item><title>assert</title><link>https://docs.thingsdb.io/v0/collection-api/assert/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/assert/</guid><description>Raises an assert_err() if the specified expression evaluates to false.
This function does not generate an event.
Function assert(expression [, error_msg])
Arguments Argument Type Description expression any (required) The expression to evaluate. error_msg str (optional) Custom error message. Return value Returns nil if the type of the expression evaluates to true. Otherwise an assert_err() is raised.
In versions before v0.</description></item><item><title>base64_decode</title><link>https://docs.thingsdb.io/v0/collection-api/base64_decode/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/base64_decode/</guid><description>Decode a Base64 encoded string.
See base64_encode for Base64 encoding.
This function does not generate an event.
Function base64_decode(encoded)
Arguments Argument Type Description encoded str/bytes The string value to decode. Return value Decoded bytes value is returned.
Example This code shows an example for base64_decode:
encoded = 'YmFzZTY0IGVuY29kZWQgc3RyaW5n'; // decode data = base64_decode(encoded); // result is of type bytes assert(type(data) == 'bytes'); // return as string str(data); Return value in JSON format</description></item><item><title>base64_encode</title><link>https://docs.thingsdb.io/v0/collection-api/base64_encode/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/base64_encode/</guid><description>Encode a str or bytes value using Base64.
See base64_decode for Base64 decoding.
This function does not generate an event.
Function base64_encode(string)
Arguments Argument Type Description string str/bytes The value to encode. Return value Encoded str value is returned.
Example This code shows an example for base64_encode:
encoded = base64_encode('base64 encoded string'); // result is of type str assert(type(encoded) == 'str'); // return encoded; Return value in JSON format</description></item><item><title>bool</title><link>https://docs.thingsdb.io/v0/collection-api/bool/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/bool/</guid><description>Returns a bool from a specified value. If no value is given, false is returned.
Types with a length evaluate to true when the length is not 0, and false otherwise.
This function does not generate an event.
Function bool(value)
Arguments Argument Type Description value any (optional) The value to convert to a boolean value. Return value A boolean value.</description></item><item><title>bytes</title><link>https://docs.thingsdb.io/v0/collection-api/bytes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/bytes/</guid><description>Convert a value to a byte sequence. If no value is given, an empty byte sequence is returned.
This function does not generate an event.
Function bytes(value)
Arguments Argument Type Description value any (optional) The value where to create a bytes value for.</description></item><item><title>datetime</title><link>https://docs.thingsdb.io/v0/collection-api/datetime/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/datetime/</guid><description>Returns a datetime depending on some optional values.
This function does not generate an event.
Function Interface Arguments Description datetime() None Return a datetime with the current date/tine. datetime(ts) int/float Return a datetime from a given UNIX time stamp. datetime(str, [fmt]) str Return a datetime from a given string. See initialize from string for a details. datetime(int, int, int, [int, [int, [int]]], [zone]) int, int,&amp;hellip; str Return a datetime using values for individual time units, with optional time zone.</description></item><item><title>deep</title><link>https://docs.thingsdb.io/v0/collection-api/deep/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/deep/</guid><description>Returns the current deep value for the running query. The deep value indicates how far down the result of a query is returned. For example, thing1 may contain a thing2 that contains a thing3. A deep value of 1 would only show the content of thing1 and a deep value of 3 will go as deep as the content of thing3.
The deep value changes when a function with a return(.</description></item><item><title>del_enum</title><link>https://docs.thingsdb.io/v0/collection-api/del_enum/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/del_enum/</guid><description>Deletes an existing enumerator type.
It is not possible to delete a enumerator type which is used by a Type or if one of the enumerator members is still being used. See example below.
This function generates an event.
Function del_enum(enum)
Arguments Argument Type Description enum string Name of the enumerator type to be deleted. Return value The value nil.</description></item><item><title>del_type</title><link>https://docs.thingsdb.io/v0/collection-api/del_type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/del_type/</guid><description>Deletes an existing Type.
It is not possible to delete a Type which is used by another Type. You should first change or delete the other Type before you are able to delete this Type. See the example below.
If there are still instances of the Type you delete, then all instances will be converted to normal things. No properties will be removed in this process. With type_count(..) you can view the number of instances of a certain Type.</description></item><item><title>enum</title><link>https://docs.thingsdb.io/v0/collection-api/enum/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/enum/</guid><description>Returns a enum member from a given value. A lookup_err() is raised if either the enum or value is not found.
This function does not generate an event.
Function enum(enum, [value])
Arguments Argument Type Description enum str (required) The name of the enumeration type. value any (optional) The value to search the enum member for. If omitted, the default member is returned.</description></item><item><title>enum_info</title><link>https://docs.thingsdb.io/v0/collection-api/enum_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/enum_info/</guid><description>Returns information about a given enumeration type.
Value Description enum_id Internal enum Id (can be used to identify Enums in collection events). created_at Time Stamp when the enum is created. default Default member of this enumerator. The default member is used when implicitly creating a value of this enumerator type. See mod_enum(..) to change the deafult member. modified_at Time Stamp when the enum is last modified or nil if never modified.</description></item><item><title>enums_info</title><link>https://docs.thingsdb.io/v0/collection-api/enums_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/enums_info/</guid><description>Returns enumeration type information about all the enum&amp;rsquo;s within a collection scope.
See the enum_info() function documentation for an example of the exposed information.
This function does not generate an event.
Function enums_info()
Arguments None
Return value List with mpdata about all enumeration types in the collection scope.</description></item><item><title>err</title><link>https://docs.thingsdb.io/v0/collection-api/err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/err/</guid><description>Returns an error.
This function does not generate an event.
Function err([code, [message]])
Arguments Argument Type Description code int (optional) Integer error code between -127 and -50, defaults to -100. message str (optional) Optional error message. Return value An error value.
Example This code shows some return values for err():
[ err(), err(-100, 'some error occurred'), err(-101), err(-59), ]; Return value in JSON format</description></item><item><title>event_id</title><link>https://docs.thingsdb.io/v0/collection-api/event_id/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/event_id/</guid><description>Returns the current event Id for the running query. The return value will be nil if the query does not require an event.
This function does not generate an event.
Function event_id()
Arguments None
Return value The current event Id or nil when the query has no event.
Example Example using event_id():
event_id(); // nil, since no event is required Return value in JSON format
null Using event_id() when the query does require an event:</description></item><item><title>float</title><link>https://docs.thingsdb.io/v0/collection-api/float/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/float/</guid><description>Returns a float from a specified value. If no value is given, the default float 0.0 is returned.
If the specified value is of type str, then the initial characters of the string are converted until a non-digit character is found. Initial white space is ignored and the number may start with an optional + or - sign.
Type bool values are converted to 1.0 for true and 0.0 for false.</description></item><item><title>future</title><link>https://docs.thingsdb.io/v0/collection-api/future/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/future/</guid><description>Returns a future. It is not possible to assign a future to a collection or add the future to a list. If you do, then nil will be assigned instead.
If you want to use the return value from a future, you need to use then(..) and
This function does not generate an event.
Function future(request, arg1, arg2, ..., argX)
Arguments Argument Type Description request thing/closure/nil (required) The request or nil for a plain future.</description></item><item><title>has_enum</title><link>https://docs.thingsdb.io/v0/collection-api/has_enum/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/has_enum/</guid><description>Determines if a enumerator type exists in the current @collection scope.
This function does not generate an event.
Function has_enum(enum)
Arguments Argument Type Description enum str (required) Enum name to check. Return value Returns true if a enumerator type with a given name exists and otherwise false.
Example This code shows an example use case of has_enum():
has_enum('XXX'); Return value in JSON format</description></item><item><title>has_type</title><link>https://docs.thingsdb.io/v0/collection-api/has_type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/has_type/</guid><description>Determines if a Type exists in the current @collection scope.
This function does not generate an event.
Function has_type(type)
Arguments Argument Type Description type str (required) Type name to check. Return value Returns true if a Type with a given name exists and otherwise false.
Example This code shows an example use case of has_type():
has_type('XXX'); Return value in JSON format</description></item><item><title>if</title><link>https://docs.thingsdb.io/v0/collection-api/if/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/if/</guid><description>Runs a block code based on the result of a given condition.
ThingsDB uses lazy-evaluation of function arguments. For this reason if() is a function call, and not a statement like in most other languages.
This function does not generate an event.
Function if(condition, if_true, [if_false])
Arguments Argument Type Description condition any (required) The condition to evaluate. if_true any (required) Will be executed when the condition evaluated to true.</description></item><item><title>int</title><link>https://docs.thingsdb.io/v0/collection-api/int/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/int/</guid><description>Returns an int from a specified value. If no value is given, the default integer 0 is returned.
If the specified value was a float value, then the new integer value will be rounded towards zero.
If the specified value is of type str, then the initial characters of the string are converted until a non-digit character is found. Initial white space is ignored and the number may start with an optional + or - sign.</description></item><item><title>is_array</title><link>https://docs.thingsdb.io/v0/collection-api/is_array/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_array/</guid><description>This function determines whether the provided value is of type list or tuple or not. The functions is_list and is_tuple can be used to check if the array is mutable.
This function does not generate an event.
Function is_array(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the value passed is an array, else it returns false.</description></item><item><title>is_ascii</title><link>https://docs.thingsdb.io/v0/collection-api/is_ascii/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_ascii/</guid><description>This function determines whether the provided value is of type str and contains only valid ascii characters.
This function does not generate an event.
Function is_ascii(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type str and contains only ascii characters, else false.
Example This code shows some return values for is_ascii():</description></item><item><title>is_bool</title><link>https://docs.thingsdb.io/v0/collection-api/is_bool/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_bool/</guid><description>This function determines whether the provided value is a bool or not.
This function does not generate an event.
Function is_bool(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a boolean, else it returns false.
Example This code shows some return values for is_bool():
[ is_bool( true ), is_bool( 'true' ), is_bool( nil ), ]; Return value in JSON format</description></item><item><title>is_bytes</title><link>https://docs.thingsdb.io/v0/collection-api/is_bytes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_bytes/</guid><description>This function determines whether the provided value is of type bytes or not.
This function does not generate an event.
Function is_bytes(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type bytes, else it returns false.
Example This code shows some return values for is_bytes():</description></item><item><title>is_closure</title><link>https://docs.thingsdb.io/v0/collection-api/is_closure/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_closure/</guid><description>This function determines whether the provided value is a closure or not.
This function does not generate an event.
Function is_closure(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a closure, else it returns false.
Example This code shows some return values for is_closure():
[ is_closure( || nil ), is_closure( nil ), ]; Return value in JSON format</description></item><item><title>is_datetime</title><link>https://docs.thingsdb.io/v0/collection-api/is_datetime/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_datetime/</guid><description>This function determines whether the provided value is of type datetime.
This function does not generate an event.
Function is_datetime(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type timeval, else false.
Example This code shows some return values for is_utf8():
[ is_datetime( timeval(2013, 2, 6) ), is_datetime( datetime(2013, 2, 6) ), ]; Return value in JSON format</description></item><item><title>is_enum</title><link>https://docs.thingsdb.io/v0/collection-api/is_enum/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_enum/</guid><description>This function determines whether the provided value is an enumeration type member or not.
This function does not generate an event.
Function is_enum(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type enum, else it returns false.
Example This code shows some return values for is_enum():</description></item><item><title>is_err</title><link>https://docs.thingsdb.io/v0/collection-api/is_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_err/</guid><description>This function determines whether the provided value is a error or not.
This function does not generate an event.
Function is_err(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is an error, else it returns false.
Example This code shows some return values for is_err():
[ is_err( err() ), is_err( zero_div_err() ), is_err( try((1 / 0)) ), is_err( try((1 / 1)) ), ]; Return value in JSON format</description></item><item><title>is_float</title><link>https://docs.thingsdb.io/v0/collection-api/is_float/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_float/</guid><description>This function determines whether the provided value is a floating point value or not.
This function does not generate an event.
Function is_float(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a float, else it returns false.
Example This code shows some return values for is_float():</description></item><item><title>is_future</title><link>https://docs.thingsdb.io/v0/collection-api/is_future/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_future/</guid><description>This function determines whether the provided value is a future value or not.
This function does not generate an event.
Function is_future(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a future, else it returns false.
Example This code shows some return values for is_float():
[ is_future( future(nil) ), is_future( future(nil).</description></item><item><title>is_mpdata</title><link>https://docs.thingsdb.io/v0/collection-api/is_mpdata/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_mpdata/</guid><description>This function determines whether the provided value is of type mpdata or not.
This function does not generate an event.
Function is_mpdata(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type mpdata, else it returns false.
Example This code shows some return values for is_mpdata():</description></item><item><title>is_inf</title><link>https://docs.thingsdb.io/v0/collection-api/is_inf/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_inf/</guid><description>This function determines whether the provided value is a positive or negative infinity.
This function does not generate an event.
Function is_inf(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a positive or negative infinity, else it returns false.
Example This code shows some return values for is_inf():</description></item><item><title>is_int</title><link>https://docs.thingsdb.io/v0/collection-api/is_int/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_int/</guid><description>This function determines whether the provided value is an integer or not.
This function does not generate an event.
Function is_int(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is an integer, else it returns false.
Example This code shows some return values for is_int():
[ is_int( 42 ), is_int( 0x2a ), is_int( 42.</description></item><item><title>is_list</title><link>https://docs.thingsdb.io/v0/collection-api/is_list/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_list/</guid><description>This function determines whether the provided value is a list or not.
This function does not generate an event.
Function is_list(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a list, else it returns false.
Example This code shows some return values for is_list():
[ is_list( [] ), is_list( tmp = [['nested']] ), is_list( tmp[0] ), ]; Return value in JSON format</description></item><item><title>is_nan</title><link>https://docs.thingsdb.io/v0/collection-api/is_nan/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_nan/</guid><description>This function determines whether the provided value is a number.
This function does not generate an event.
Function is_nan(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is not a number, else false.
Example This code shows some return values for is_nan():
[ is_nan( true ), is_nan( 123 ), is_nan( 3.</description></item><item><title>is_nil</title><link>https://docs.thingsdb.io/v0/collection-api/is_nil/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_nil/</guid><description>This function determines whether the provided value is nil.
This function does not generate an event.
Function is_nil(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is nil, else false.
Example This code shows some return values for is_nil():
[ is_nil( nil ), is_nil( 0 ), ]; Return value in JSON format</description></item><item><title>is_raw</title><link>https://docs.thingsdb.io/v0/collection-api/is_raw/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_raw/</guid><description>This function determines whether the provided value is of type str or bytes.
This function does not generate an event.
Function is_raw(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type str or bytes, else false.
Example This code shows some return values for is_raw():</description></item><item><title>is_regex</title><link>https://docs.thingsdb.io/v0/collection-api/is_regex/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_regex/</guid><description>This function determines whether the provided value is of type regex or not.
This function does not generate an event.
Function is_regex(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type regex, else it returns false.
Example This code shows some return values for is_regex():</description></item><item><title>is_set</title><link>https://docs.thingsdb.io/v0/collection-api/is_set/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_set/</guid><description>This function determines whether the provided value is a set or not.
This function does not generate an event.
Function is_set(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a set, else it returns false.
Example This code shows some return values for is_set():
[ is_set( [] ), is_set( set() ), ]; Return value in JSON format</description></item><item><title>is_str</title><link>https://docs.thingsdb.io/v0/collection-api/is_str/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_str/</guid><description>This function determines whether the provided value is of type str.
The value is not explicitly checked for valid UTF-8 characters, use is_utf8() if you want to check for valid UTF-8 data.
This function does not generate an event.
Function is_str(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type str, else false.</description></item><item><title>is_thing</title><link>https://docs.thingsdb.io/v0/collection-api/is_thing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_thing/</guid><description>This function determines whether the provided value is a thing or not.
Type instances are also things, so this function returns true for a Type instance as well.
This function does not generate an event.
Function is_thing(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a thing, else it returns false.</description></item><item><title>is_timeval</title><link>https://docs.thingsdb.io/v0/collection-api/is_timeval/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_timeval/</guid><description>This function determines whether the provided value is of type timeval.
This function does not generate an event.
Function is_timeval(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type timeval, else false.
Example This code shows some return values for is_utf8():
[ is_timeval( timeval(2013, 2, 6) ), is_timeval( datetime(2013, 2, 6) ), ]; Return value in JSON format</description></item><item><title>is_tuple</title><link>https://docs.thingsdb.io/v0/collection-api/is_tuple/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_tuple/</guid><description>This function determines whether the provided value is a tuple or not. At least nested arrays are of kind tuple.
This function does not generate an event.
Function is_tuple(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a tuple, else it returns false.
Example This code shows some return values for is_tuple():</description></item><item><title>is_utf8</title><link>https://docs.thingsdb.io/v0/collection-api/is_utf8/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/is_utf8/</guid><description>This function determines whether the provided value is of type str and contains valid UTF-8 characters.
This function does not generate an event.
Function is_utf8(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type raw and contains valid utf8, else false.
Example This code shows some return values for is_utf8():</description></item><item><title>list</title><link>https://docs.thingsdb.io/v0/collection-api/list/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/list/</guid><description>Returns a new empty list or returns a list for a given set.
This function does not generate an event.
Function list([value])
Arguments Argument Type Description value set/list/tuple (optional) Optional value to initialize the list. Return value A new list.
Example This code shows some return values for list():
list( set({}, {}) ); Return value in JSON format</description></item><item><title>add</title><link>https://docs.thingsdb.io/v0/collection-api/mod_enum/add/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/mod_enum/add/</guid><description>Adds a member to an existing enumerator type.
Action mod_enum(enum, 'add', name, value)
Arguments Argument Type Description enum str Name of the enumerator type where the member has to be added to. 'add' str Passing this argument will result in an add action. name str Name of the member that has to be added. value depends Value of the member that has to be added.</description></item><item><title>def</title><link>https://docs.thingsdb.io/v0/collection-api/mod_enum/def/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/mod_enum/def/</guid><description>Set a member from an existing enumerator type as default member. The default member is also selected when a instance of a Type is created using the enumerator as a required property.
Action mod_enum(enum, 'def', name)
Arguments Argument Type Description enum str Name of the enumerator type where the member has to be removed from. 'def' str Passing this argument will result in a set default action.</description></item><item><title>del</title><link>https://docs.thingsdb.io/v0/collection-api/mod_enum/del/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/mod_enum/del/</guid><description>Delete a member from an existing enumerator type.
A member may only be removed if the member is no longer being used. Otherwise an operation_err() is raised.
Action mod_enum(enum, 'del', name)
Arguments Argument Type Description enum str Name of the enumerator type where the member has to be removed from. 'del' str Passing this argument will result in a delete action.</description></item><item><title>mod</title><link>https://docs.thingsdb.io/v0/collection-api/mod_enum/mod/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/mod_enum/mod/</guid><description>Modify a member value from an existing enumerator type.
Action mod_enum(enum, 'mod', name, value)
Arguments Argument Type Description enum str Name of the enumerator type where the member has to be removed from. 'mod' str Passing this argument will result in a modify action. name str Name of the member that has to be modified. value any New value for the member that has to be modified.</description></item><item><title>ren</title><link>https://docs.thingsdb.io/v0/collection-api/mod_enum/ren/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/mod_enum/ren/</guid><description>Rename a member value from an existing enumerator type.
Action mod_enum(enum, 'ren', name, to)
Arguments Argument Type Description enum str Name of the enumerator type where the member has to be removed from. 'ren' str Passing this argument will result in a rename action. name str Name of the member that has to be modified. to str New name for the member that has to be modified.</description></item><item><title>add</title><link>https://docs.thingsdb.io/v0/collection-api/mod_type/add/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/mod_type/add/</guid><description>Adds a property to an existing Type.
Since version v0.9.2 an initial value is no longer required when having active instances of the given Type. If the initial value is omitted, then a single default value according the Type definition will be created and applied to all instances. See section &amp;ldquo;init using callback&amp;rdquo; for information on how to create a new initial value for each instance.
Action mod_type(type, 'add', name, definition/closure, [init])</description></item><item><title>del</title><link>https://docs.thingsdb.io/v0/collection-api/mod_type/del/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/mod_type/del/</guid><description>Deletes a property or method from an existing Type.
A property will be removed from all the active instances of that Type.
Action mod_type(type, 'del', name)
Arguments Argument Type Description type str Name of the Type where the property has to be removed from. 'del' str Passing this argument will result in a delete action. name str Name of the property or method that has to be removed.</description></item><item><title>mod</title><link>https://docs.thingsdb.io/v0/collection-api/mod_type/mod/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/mod_type/mod/</guid><description>Modifies the type definition of a property or the closure of a method from an existing Type. It is not possible to convert a property to a method or the other way around.
Without an additional callback it is possible to modify to a less &amp;lsquo;strict&amp;rsquo; definition. So for example, age: 'int' can become age: 'int?', but not the other way around. Since version v0.9.3 it is possible to migrate to a more strict or completely different definition by using an additional callback closure for generating new values.</description></item><item><title>rel</title><link>https://docs.thingsdb.io/v0/collection-api/mod_type/rel/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/mod_type/rel/</guid><description>Add or delete a relation between properties of the same or different types.
Relations can only be created between nillable type definitions and/or restricted sets. This results in the following combinations:
Combination Description Type? &amp;lt;-&amp;gt; Type? One to one relation. Type? &amp;lt;-&amp;gt; {Type} One to many relation. {Type} &amp;lt;-&amp;gt; {Type} Many to many relation. All missing relations on existing instances will be automatically created by ThingsDB once you add a new relation.</description></item><item><title>ren</title><link>https://docs.thingsdb.io/v0/collection-api/mod_type/ren/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/mod_type/ren/</guid><description>Rename a property or method from an existing Type.
Action mod_type(type, 'ren', name, to)
Arguments Argument Type Description type str Name of the Type where the property or method has to be modified from. 'ren' str Passing this argument will result in a modify action. name str Name of the property or method that has to be modified. to str New name for the property or method that has to be modified.</description></item><item><title>wpo</title><link>https://docs.thingsdb.io/v0/collection-api/mod_type/wpo/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/mod_type/wpo/</guid><description>Enable or disable wrap-only mode for an existing Type.
When wrap-only mode is enabled, no instances of the type can be created and the type can not be used by other type unless that type is also in wrap-only mode. The only purpose of a type in wrap-only mode is to wrap things with but this gives you the assurance that no data is created using this type.
Enable wrap-only mode To enable wrap-only mode, make sure no instances of this type exist, and also be sure that no other type without wrap-only mode is dependent on the type you want to change.</description></item><item><title>new</title><link>https://docs.thingsdb.io/v0/collection-api/new/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/new/</guid><description>Creates a new instance of a defined Type.
When possible it is preferred to use the syntax MyType{...} to create a instance of a certain Type. However, sometimes you need to create an instance dynamically with the Type&amp;rsquo;s name as variable and then new() can be used.
Since version v0.9.2 the value argument is no longer required. If not given all properties will be set to their default values.</description></item><item><title>new_type</title><link>https://docs.thingsdb.io/v0/collection-api/new_type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/new_type/</guid><description>Creates a new Type. This function only creates a new type and does not allow you to specify any fields. With the set_type() function you can define the fields for the new type.
It is possible to use set_type directly without calling new_type first. However, sometimes you want to cross reference two types so you want both type to exists before calling set_type.
This function generates an event.
Function new_type(type, [wrap_only])</description></item><item><title>now</title><link>https://docs.thingsdb.io/v0/collection-api/now/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/now/</guid><description>Return the time in seconds since the epoch as a floating point number.
If you require the same time multiple times within a query, then call now() only once and save it to a variable, for example now = now();
This function does not generate an event.
Function now()
Arguments None
Return value Current timestamp.
Example This code shows the current timestamp:
// current timestamp now(); Example return value in JSON format</description></item><item><title>raise</title><link>https://docs.thingsdb.io/v0/collection-api/raise/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/raise/</guid><description>Raises an error.
This function does not generate an event.
Function raise([error])
Arguments Argument Type Description value error/str (optional) The error to raise. Return value None
Example Some examples on how raise() can be used:
raise (); // raise a default error 'This code is not reached'; raise ('no licenses left'); // raise with a custom message 'This code is not reached'; raise (value_err()); // raise a value error 'This code is not reached';</description></item><item><title>rand</title><link>https://docs.thingsdb.io/v0/collection-api/rand/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/rand/</guid><description>Returns pseudo-random number between 0.0 and 1.0.
Do not use rand() when the purpose is security related since the linear congruential algorithms used by this function are too easy to break.
This function does not generate an event.
Function rand()
Arguments None
Return value A pseudo-random float number between 0.0 and 1.0.
Example Some examples on how raise() can be used:
// Return a pseudo-random number between 0.</description></item><item><title>randint</title><link>https://docs.thingsdb.io/v0/collection-api/randint/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/randint/</guid><description>Returns pseudo-random integer number between a given range.
The first argument specifies the start of the range and must have a value less than the second argument when specifies the end of the range. The start is inclusive and the end is exclusive, for example: randint(0, 2) will return either 0 or 1.
Do not use randint() when the purpose is security related since the linear congruential algorithms used by this function are too easy to break.</description></item><item><title>randstr</title><link>https://docs.thingsdb.io/v0/collection-api/randstr/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/randstr/</guid><description>Returns a string with random characters.
The default characters to generate a string are URL-safe and contain the characters 0-9, A-Z, a-z, - and _.
Instead of the default character set, it is possible to use your own set. This custom set may contain duplicated characters which increase the chance for certain characters to occur in the final string. For example, a random string based on the character set AAB will most likely contain more A&amp;rsquo;s than B&amp;rsquo;s.</description></item><item><title>range</title><link>https://docs.thingsdb.io/v0/collection-api/range/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/range/</guid><description>This function returns a list of numbers, starting from 0 (by default), increments by 1 (by default), and ends at a specified number.
Function range() may only be used for relatively small lists. An operation_err() (maximum range length exceeded) will be raised when trying to create a list with more than 1024 numbers.
Function range(start, stop, step)
Arguments Argument Type Description start int (optional) An integer number specifying at which position to start.</description></item><item><title>refs</title><link>https://docs.thingsdb.io/v0/collection-api/refs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/refs/</guid><description>Returns the reference count of a value.
Generally, the count returned is one higher than you might expect, because it includes the (temporary) reference.
Different nodes might return different reference values since the reference counter can be higher or lower depending on how the value is stored and used.
This function does not generate an event.
Function refs(value)
Arguments Argument Type Description value any (required) The value to return the reference count for.</description></item><item><title>regex</title><link>https://docs.thingsdb.io/v0/collection-api/regex/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/regex/</guid><description>Create a new regular expression.
This function can be used to create a regular expression from a given pattern with optional flags.
This function does not generate an event.
Function regex(pattern, [flags])
Arguments Argument Type Description pattern str (required) The pattern to use as a regular expression. flags str (optional) Optional flags, see the regex for more information. Return value A new regular expression.</description></item><item><title>rename_enum</title><link>https://docs.thingsdb.io/v0/collection-api/rename_enum/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/rename_enum/</guid><description>Rename an enum type.
This function generates an event.
Function rename_enum(current_name, new_name)
Arguments Argument Type Description current_name str (required) Current enum type name. new_name str (required) New name for the enum type. Return value Returns nil when successful.</description></item><item><title>rename_type</title><link>https://docs.thingsdb.io/v0/collection-api/rename_type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/rename_type/</guid><description>Rename a type.
This function generates an event.
Function rename_type(current_name, new_name)
Arguments Argument Type Description current_name str (required) Current type name. new_name str (required) New name for the type. Return value Returns nil when successful.</description></item><item><title>return</title><link>https://docs.thingsdb.io/v0/collection-api/return/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/return/</guid><description>The return function moves the argument to the output of the current query/closure call.
If no return is specified, then the last value will be the value which is returned. A second argument can be given to the return function which can be used to specify how deep the result should be returned. The default deep value is set to 1, but any value between 0 and 127 is possible. See the deep section for a detailed explanation of this argument.</description></item><item><title>set</title><link>https://docs.thingsdb.io/v0/collection-api/set/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/set/</guid><description>Returns a new empty set. If an array is given, then all items in the given array must be of type thing and a new set is returned based on the given things. Instead of an array, it is also possible to provide one thing or multiple comma-separated things.
This function does not generate an event.
Function set(array_or_things)
Arguments Argument Type Description array_or_things array/things (optional) Optional array or things to initialize the set.</description></item><item><title>set_enum</title><link>https://docs.thingsdb.io/v0/collection-api/set_enum/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/set_enum/</guid><description>Creates a new enumerator type.
This function generates an event.
Function set_enum(enum, members)
Arguments Argument Type Description enum str The name of the enumerator type to create. members thing Thing containing all the members to be set. Return value The value nil.
Example This code shows how to use set_enum():
set_enum('Status', { OK: 0, NOK: -1 }); Return value in JSON format</description></item><item><title>set_type</title><link>https://docs.thingsdb.io/v0/collection-api/set_type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/set_type/</guid><description>Defines the properties of a Type. Function set_type works only on a new Type. Use mod_type() if you want to change an existing Type, see mod_type.
This function generates an event.
Function set_type(type, value, [wrap_only])
Arguments Argument Type Description type str The name of the Type where the properties have to be set. value thing Thing containing all the properties to be set.</description></item><item><title>str</title><link>https://docs.thingsdb.io/v0/collection-api/str/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/str/</guid><description>Convert a value to a string. If no value is given, an empty string &amp;quot;&amp;quot; is returned.
When bytes are converted to str then the data will be checked if it contains valid UTF-8 characters. If this is not the case, a value_err() will be raised.
This function does not generate an event.
Function str(value)
Arguments Argument Type Description value any (optional) The value to create a string from.</description></item><item><title>thing</title><link>https://docs.thingsdb.io/v0/collection-api/thing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/thing/</guid><description>Returns a thing from a specified value, that may be dynamic. If no value is given, a new thing is returned.
This function does not generate an event.
Function thing([id])
Arguments Argument Type Description id int (optional) The Id for the thing to return. Return value Returns a thing. A lookup_err() is returned in case an Id is given which is not found inside the collection.</description></item><item><title>timeval</title><link>https://docs.thingsdb.io/v0/collection-api/timeval/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/timeval/</guid><description>Returns a timeval depending on some optional values.
This function does not generate an event.
Function Interface Arguments Description timeval() None Return a timeval with the current date/tine. timeval(ts) int/float Return a timeval from a given UNIX time stamp. timeval(str, [fmt]) str Return a timeval from a given string. See initialize from string for a details. datetime(int, int, int, [int, [int, [int]]], [zone]) int, int,&amp;hellip; str Return a timeval using values for individual time units, with optional time zone.</description></item><item><title>try</title><link>https://docs.thingsdb.io/v0/collection-api/try/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/try/</guid><description>Try a statement and if the statement fails with an error, then the error is returned. It is also possible to catch only specific errors.
It is not possible to catch internal errors. Such errors should never happen, unless something is really wrong with at least one node.
This function does not generate an event.
Function try(statement, [e0, e1, ..., eX])
Arguments Argument Type Description statement any (required) The statement to try.</description></item><item><title>type</title><link>https://docs.thingsdb.io/v0/collection-api/type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/type/</guid><description>Returns the type name of a value.
This function does not generate an event.
Function type(value)
Arguments Argument Type Description value any (required) The value to return the type name for. Return value Type name of the given value.
Example Returns the type name of a given value:
[ type( nil ), type( 42 ), type( 3.14 ), ]; Example return value in JSON format</description></item><item><title>type_assert</title><link>https://docs.thingsdb.io/v0/collection-api/type_assert/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/type_assert/</guid><description>Raises a type_err() if the specified expression evaluates to false.
This function does not generate an event.
Function assert(expression, type(s) [, error_msg])
Arguments Argument Type Description expression any (required) The result of this expression will be type tested. type(s) str/list (required) Type name or list with type names to check. error_msg str (optional) Custom error message. Return value Returns nil if the type of the expression evaluates to true.</description></item><item><title>type_count</title><link>https://docs.thingsdb.io/v0/collection-api/type_count/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/type_count/</guid><description>Returns the number of instances of a given Type within a collection.
This function does not generate an event.
Function type_count(type)
Arguments Argument Type Description type str The name of the Type for which the number of instances must be returned. Return value An int representing the number of occurrences.</description></item><item><title>type_info</title><link>https://docs.thingsdb.io/v0/collection-api/type_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/type_info/</guid><description>Returns information about a given Type.
Value Description type_id Internal Type Id (can be used to identify Types in collection events). created_at Time Stamp when the Type is created. modified_at Time Stamp when the Type is last modified or nil if never modified. name Type&amp;rsquo;s name. fields Array with arrays containing two strings, the property name and definition.</description></item><item><title>types_info</title><link>https://docs.thingsdb.io/v0/collection-api/types_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/types_info/</guid><description>Returns Type information about all the Types within a collection.
See the type_info() function documentation for an example of the exposed Type information.
This function does not generate an event.
Function types_info()
Arguments None
Return value List with Type mpdata about all Types in the collection.</description></item><item><title>wse</title><link>https://docs.thingsdb.io/v0/collection-api/wse/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/collection-api/wse/</guid><description>Stored closures which can potentially make changes to ThingsDB are called closures with side effects and must be wrapped with the wse(..) function. This allows ThingsDB before running the query to make an event.
Function wse() might also be called without arguments which can be used to force ThingsDB to generate an event. This might be useful for when it is really important that a query returns a result based on a state where all previous events are processed.</description></item><item><title>backup_info</title><link>https://docs.thingsdb.io/v0/node-api/backup_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/node-api/backup_info/</guid><description>Returns information about a specific scheduled backup.
Value Description created_at Time Stamp when the backup schedule is created. file_template Backup file template. files List of successful backup files. id Backup Id. max_files Maximum number of backup files to store. The oldest file will be removed once max_files is reached. next_run Only available when the backup job is scheduled to run.</description></item><item><title>backups_info</title><link>https://docs.thingsdb.io/v0/node-api/backups_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/node-api/backups_info/</guid><description>Returns backup schedule information about all backup schedules in the selected node scope.
See the backup_info() function documentation for an example of the exposed backup schedule information.
This function does not generate an event.
Function backups_info()
Arguments None
Return value List with backup schedule mpdata about all backup schedules in the selected node scope.</description></item><item><title>counters</title><link>https://docs.thingsdb.io/v0/node-api/counters/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/node-api/counters/</guid><description>Returns counters for the ThingsDB node in the selected scope. Counters start all at zero when ThingsDB is started, or when the counters are reset by using reset_counters()'.
Counters give information about things, queries and events. If you suspect failed queries, then the counters might provide you with more information.
Counter Description average_event_duration The average event duration in seconds. Event duration is measured from the time an event is created (before the final Id is assigned), until the actual event is committed to ThingsDB.</description></item><item><title>del_backup</title><link>https://docs.thingsdb.io/v0/node-api/del_backup/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/node-api/del_backup/</guid><description>Delete a scheduled backup. If the scheduled backup was pending, the backup job will be cancelled.
This function does not generate an event.
Function del_backup(Id, [delete_files])
Arguments Argument Type Description Id int Backup Id to delete. delete_files bool (optional) Delete related backup files from disk (or Google Cloud Storage). Default is false. Return value Returns nil.</description></item><item><title>has_backup</title><link>https://docs.thingsdb.io/v0/node-api/has_backup/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/node-api/has_backup/</guid><description>Determines if a backup exists in ThingsDB.
This function does not generate an event.
Function has_backup(Id)
Arguments Argument Type Description Id int (required) Backup Id to check. Return value Returns true if a backup with a given Id exists and otherwise false.
Example This code shows an example use case of has_backup():
has_backup(123); Return value in JSON format</description></item><item><title>new_backup</title><link>https://docs.thingsdb.io/v0/node-api/new_backup/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/node-api/new_backup/</guid><description>Schedule a new backup.
Backups are created using tar and gzip. Once a backup is made, the .tar.gz backup file can be used to recover ThingsDB, or can be used to load the ThingsDB into another node. The result value is a backup Id. This Id can be used by backup_info(..) for details about the backup schedule job, or can be used to delete the backup schedule.
If Google Cloud Storage is configured then it is possible to create backups directly into Google Cloud Storage.</description></item><item><title>node_info</title><link>https://docs.thingsdb.io/v0/node-api/node_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/node-api/node_info/</guid><description>Returns information about the node in the selected scope. See scopes for more information on how to target a specific node scope.
Like all other info(..) functions, this function returns mpdata which can be loaded to extract one or more properties. See example 2.
Value Description archive_files Number of archive files. May decrease after a full store during away mode. archived_in_memory Number of events which are archived in memory.</description></item><item><title>nodes_info</title><link>https://docs.thingsdb.io/v0/node-api/nodes_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/node-api/nodes_info/</guid><description>Returns information about all ThingsDB nodes.
Value Description node_name A node will publish itself to other nodes using the node name. This can be for example an IP address, hostname , or a fully qualified domain name (FQDN) of the node. committed_event_id Last known committed event Id on the node. next_thing_id Next free thing Id on the node. node_id Id which is assigned to the node.</description></item><item><title>reset_counters</title><link>https://docs.thingsdb.io/v0/node-api/reset_counters/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/node-api/reset_counters/</guid><description>Resets the counters for the ThingsDB node you are connected too. Other nodes are not affected. This will set the started_at counter value to the current UNIX time-stamp in seconds and all other counters to 0 (zero).
This function does not generate an event.
Function reset_counters()
Arguments None
Return value Returns nil.
Example This code will reset the counters on a node:
// resets counters on the node in this scope reset_counters(); Return value in JSON format</description></item><item><title>restart_module</title><link>https://docs.thingsdb.io/v0/node-api/restart_module/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/node-api/restart_module/</guid><description>Restarts a given module on the select node scope.
If you want to restart the module on all nodes, you can use the deploy_module(name, nil) function with nil as second argument.
This function does not generate an event.
Function restart_module(name)
Arguments Argument Type Description name str (required) Module to restart. Return value Returns nil.
Example This code will reset the counters on a node:</description></item><item><title>set_log_level</title><link>https://docs.thingsdb.io/v0/node-api/set_log_level/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/node-api/set_log_level/</guid><description>Change the log level for the node in the selected scope.
ThingsDB will then log all levels greater than or equal to the specified level. For example, a default log_level of warning will log warning, error and critical messages.
This function does not generate an event.
Log Levels Name Int Description DEBUG 0 Display debug messages (can result in large amount of logging). INFO 1 Informational messages.</description></item><item><title>shutdown</title><link>https://docs.thingsdb.io/v0/node-api/shutdown/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/node-api/shutdown/</guid><description>Shutdown the node in the selected scope. This is a clean shutdown, allowing all other nodes (and clients) to disconnect.
At least EVENT privileges on the @node scope are required to shutdown a node.
This function does not generate an event.
Function shutdown()
Arguments None.
Return value Returns nil.</description></item><item><title>collection_info</title><link>https://docs.thingsdb.io/v0/thingsdb-api/collection_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/collection_info/</guid><description>Returns information about a specific collection.
This function requires QUERY privileges on the requested collection, or EVENT privileges on the @thingsdb scope.
This function does not generate an event.
Function collection_info(collection)
Arguments Argument Type Description collection str/int (required) Name or Id of the collection Return value Returns mpdata about the collection.
Example Returns information about collection stuff:
collection_info('stuff'); Example return value in JSON format</description></item><item><title>collections_info</title><link>https://docs.thingsdb.io/v0/thingsdb-api/collections_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/collections_info/</guid><description>Returns collection information about all collections in ThingsDB.
See the collection_info() function documentation for an example of the exposed collection information.
If the user has no EVENT permissions on the @thingsdb scope, then only the collections where the user has at least QUERY privileges are included in the result.
This function does not generate an event.
Function collections_info()
Arguments None
Return value List with collection mpdata about all collections in ThingsDB.</description></item><item><title>del_collection</title><link>https://docs.thingsdb.io/v0/thingsdb-api/del_collection/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/del_collection/</guid><description>Delete a collection.
This function generates an event.
Function del_collection(name)
Arguments Argument Type Description name str (required) Name of the collection to delete. Return value Returns nil when successful. A lookup_err() is raised if the collection does not exist.
Example This code will delete collection stuff:
// Delete collection `stuff` del_collection('stuff');</description></item><item><title>del_expired</title><link>https://docs.thingsdb.io/v0/thingsdb-api/del_expired/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/del_expired/</guid><description>Delete all expired tokens.
This function requires GRANT privileges on the @thingsdb scope.
This function generates an event.
Function del_expired()
Arguments None
Return value Returns nil.
Example This code will delete all expired tokens:
// Delete all expired tokens del_expired();</description></item><item><title>del_module</title><link>https://docs.thingsdb.io/v0/thingsdb-api/del_module/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/del_module/</guid><description>Delete a module. A SIGTERM signal will be send to the process for the module which might cancel running futures.
This function generates an event.
Function del_module(name)
Arguments Argument Type Description name str (required) Name of the module to delete. Return value Returns nil when successful.
Example This code will delete module DEMO:
// Delete module `DEMO` del_module('DEMO');</description></item><item><title>del_node</title><link>https://docs.thingsdb.io/v0/thingsdb-api/del_node/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/del_node/</guid><description>Delete a node from ThingsDB.
Before deleting a node, the node must be offline. As long is the node is active, you are not allowed to delete the node. See shutdown for shutting down a node by using a query.
This function generates an event.
Function del_node(node_id)
Arguments Argument Type Description node_id int (required) Id of the node to delete. Return value Returns nil when successful.</description></item><item><title>del_token</title><link>https://docs.thingsdb.io/v0/thingsdb-api/del_token/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/del_token/</guid><description>Delete a token.
This function requires GRANT privileges on the @thingsdb scope unless the given token belongs to the logged on user. In the latter case, only EVENT privileges are required.
This function generates an event.
Function del_token(key)
Arguments Argument Type Description key str (required) Token key to delete. Return value Returns nil when successful. A lookup_err() is raised if the token is not found.</description></item><item><title>del_user</title><link>https://docs.thingsdb.io/v0/thingsdb-api/del_user/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/del_user/</guid><description>Delete a user. It is not possible to delete your own user account and a bad_data_err() will be raised in case you try to. Any tokens associated with the user will also be deleted.
This function requires GRANT privileges on the @thingsdb scope.
This function generates an event.
Function del_user(username)
Arguments Argument Type Description username str (required) Username of the user to delete.</description></item><item><title>deploy_module</title><link>https://docs.thingsdb.io/v0/thingsdb-api/deploy_module/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/deploy_module/</guid><description>Deploy a module on all nodes. The module must be configured first, using the new_module() function. This function is used to write the module data (or plain python code) to the module. After deploying the code, the module will be restarted on every node.
Before deploying a module, it is strongly recommended to use a development environment before deploying the module into production.
This function generates an event.
Function deploy_module(name, data)</description></item><item><title>grant</title><link>https://docs.thingsdb.io/v0/thingsdb-api/grant/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/grant/</guid><description>Grant, collection or general, privileges to a user. Access to a user is provided by setting a bit mask to either the @node, @thingsdb or a @collection scope.
To use this function, at least EVENT privileges on the @thingsdb scope and GRANT privileges on the target scope are required.
It is not possible to set privileges on a specific node scope. Therefore scope @node will apply to all nodes in ThingsDB.</description></item><item><title>has_collection</title><link>https://docs.thingsdb.io/v0/thingsdb-api/has_collection/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/has_collection/</guid><description>Determines if a collection exists in ThingsDB.
This function does not generate an event.
Function has_collection(collection)
Arguments Argument Type Description collection str/int (required) Collection name or Id to check. Return value Returns true if the collection exists and otherwise false.
Example This code shows an example use case of has_collection():
has_collection('stuff'); Return value in JSON format
true</description></item><item><title>has_module</title><link>https://docs.thingsdb.io/v0/thingsdb-api/has_module/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/has_module/</guid><description>Determines if a module exists in ThingsDB. The scope restriction of the module has no impact on the result of this function.
This function does not generate an event.
Function has_module(name)
Arguments Argument Type Description name str (required) Module to check. Return value Returns true if the module exists and otherwise false.
Example This code shows an example use case of has_module():</description></item><item><title>has_node</title><link>https://docs.thingsdb.io/v0/thingsdb-api/has_node/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/has_node/</guid><description>Determines if a node exists in ThingsDB.
This function does not generate an event.
Function has_node(id)
Arguments Argument Type Description id int (required) Node Id to check. Return value Returns true if a node with a given Id exists and otherwise false.
Example This code shows an example use case of has_node():
has_node(0); Return value in JSON format</description></item><item><title>has_token</title><link>https://docs.thingsdb.io/v0/thingsdb-api/has_token/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/has_token/</guid><description>Determines if a token exists in ThingsDB.
This function requires GRANT privileges on the @thingsdb scope.
This function does not generate an event.
Function has_token(key)
Arguments Argument Type Description key str (required) Token key to check. Return value Returns true if the token exists and otherwise false.
Example This code shows an example use case of has_token():
has_token('XXXXXXXXXXXXXXXXXXXXXX'); Return value in JSON format</description></item><item><title>has_user</title><link>https://docs.thingsdb.io/v0/thingsdb-api/has_user/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/has_user/</guid><description>Determines if a user exists in ThingsDB.
This function requires GRANT privileges on the @thingsdb scope.
This function does not generate an event.
Function has_user(username)
Arguments Argument Type Description username str (required) User to check. Return value Returns true if the user exists and otherwise false.
Example This code shows an example use case of has_user():
has_user('admin'); Return value in JSON format</description></item><item><title>module_info</title><link>https://docs.thingsdb.io/v0/thingsdb-api/module_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/module_info/</guid><description>Returns information about a specific module.
Value Description conf Configuration for the module. (Only visible when the user has EVENT privileges in the @thingsdb scope) created_at Time Stamp when the module was created. file Module file name. name Name of the module. restarts Number of time the module is restarted. Manual restarts are excluded and will reset the counter to zero.</description></item><item><title>modules_info</title><link>https://docs.thingsdb.io/v0/thingsdb-api/modules_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/modules_info/</guid><description>Returns module information about all modules in ThingsDB.
See the module_info() function documentation for an example of the exposed module information.
This function does not generate an event.
Function modules_info()
Arguments None
Return value List with modules mpdata about all modules in ThingsDB.</description></item><item><title>new_collection</title><link>https://docs.thingsdb.io/v0/thingsdb-api/new_collection/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/new_collection/</guid><description>Create a new collection.
This function generates an event.
Function new_collection(name)
Arguments Argument Type Description name str (required) Name of the new collection. The user who has created the collection will automatically receive full access rights to the new collection. Use grant to give other users access to the collection.
Return value Returns the new collection id if successful. A lookup_err() is raised if the collection already exists.</description></item><item><title>new_module</title><link>https://docs.thingsdb.io/v0/thingsdb-api/new_module/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/new_module/</guid><description>Create (and configure) a new module for ThingsDB.
After a module is created, a future() is required to use the new module.
ThingsDB has special support for Python modules which will be activated if you module file ends with .py. In this case the Python interpreter will be used to start the module.
By default a module can be used in all scopes. It is possible however, to restrict the usage by using set_module_scope(.</description></item><item><title>new_node</title><link>https://docs.thingsdb.io/v0/thingsdb-api/new_node/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/new_node/</guid><description>Adds a new node to ThingsDB. Nodes are used for scaling and high availability.
Before using this command, make sure another node is started and waiting for a join. This can be done by starting thingsdb with the --secret argument, for example:
thingsdb --secret &amp;#34;my-one-time-secret&amp;#34; Next, you will see something like this:
Waiting for an invite from a node to join ThingsDB... You can use the following query to add this node: new_node(&amp;#39;my-one-time-secret&amp;#39;, &amp;#39;node.</description></item><item><title>new_token</title><link>https://docs.thingsdb.io/v0/thingsdb-api/new_token/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/new_token/</guid><description>Adds a new token for a given user. An optional expiration time may be given; after this time the token cannot be used anymore. Use del_expired to cleanup expired tokens. The expiration time may be given as a datetime or timeval type.
Expiration dates in the past are not allowed an will raise a bad_data_err() error.
It is also possible to set a description for the token which can be used to identify the token.</description></item><item><title>new_user</title><link>https://docs.thingsdb.io/v0/thingsdb-api/new_user/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/new_user/</guid><description>Creates a new user to ThingsDB. The new user is created without a password, token and access privileges. You probably want to set a password or add a new token, and assign some privileges using grant(&amp;hellip;).
This function requires GRANT privileges on the @thingsdb scope.
This function generates an event.
Function new_user(user)
Arguments Argument Type Description user str (required) Username, between 1 and 128 graphical characters.</description></item><item><title>rename_collection</title><link>https://docs.thingsdb.io/v0/thingsdb-api/rename_collection/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/rename_collection/</guid><description>Rename a collection.
This function generates an event.
Function rename_collection(current_name, new_name)
Arguments Argument Type Description current_name str (required) Current collection name. new_name str (required) New name for the collection. Return value Returns nil when successful.</description></item><item><title>rename_module</title><link>https://docs.thingsdb.io/v0/thingsdb-api/rename_module/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/rename_module/</guid><description>Rename a module.
This function generates an event.
Function rename_module(current_name, new_name)
Arguments Argument Type Description current_name str (required) Current module name. new_name str (required) New name for the module. Return value Returns nil when successful.</description></item><item><title>rename_user</title><link>https://docs.thingsdb.io/v0/thingsdb-api/rename_user/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/rename_user/</guid><description>Rename a user.
This function requires GRANT privileges on the @thingsdb scope.
This function generates an event.
Function rename_user(current_name, new_name)
Arguments Argument Type Description current_name str (required) Current user name. new_name str (required) New name for the user. Return value Returns nil when successful.</description></item><item><title>restore</title><link>https://docs.thingsdb.io/v0/thingsdb-api/restore/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/restore/</guid><description>Restore from a backup file created with the new_backup function.
Before using this function the following list of requirements must be must be fulfilled:
The user performing the restore must have FULL privileges on the@thingsdb scope. No collections may exists. Use collections_info() and del_collection(..) to remove existing collections. All nodes must be online and ready. If this is not the case, then either remove the node or wait for the node to become ready.</description></item><item><title>revoke</title><link>https://docs.thingsdb.io/v0/thingsdb-api/revoke/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/revoke/</guid><description>Revoke, collection or general, privileges from a user. See grant for more information on how access privileges can be set for a user.
To use this function, at least EVENT privileges on the @thingsdb scope and GRANT privileges on the target scope are required.
This function generates an event.
Function revoke(target, user, mask)
Arguments Argument Type Description target int/raw Can be either the @node, @thingsdb, or a @collection scope.</description></item><item><title>set_module_conf</title><link>https://docs.thingsdb.io/v0/thingsdb-api/set_module_conf/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/set_module_conf/</guid><description>Change the module configuration. This will (re-send) the module configuration to the module. If the module was not started, ThingsDB will also auto-load the module and send the configuration. Any Value is accepted as config but value nil will not be considered as a configuration and thus will not be send to the module.
This function generates an event.
Function set_module_conf(name, configuration)
Arguments Argument Type Description name str (required) Name of the module.</description></item><item><title>set_module_scope</title><link>https://docs.thingsdb.io/v0/thingsdb-api/set_module_scope/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/set_module_scope/</guid><description>Modules can be restricted for usage in a single scope. This can be a @collection:.. scope, but also a @node or @thingsdb scope. This function can be used to change the module scope. When the scope is set to nil, the module can be used in any scope.
This function generates an event.
Function set_module_scope(name, scope)
Arguments Argument Type Description name str (required) Name of the module.</description></item><item><title>set_password</title><link>https://docs.thingsdb.io/v0/thingsdb-api/set_password/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/set_password/</guid><description>Change a user&amp;rsquo;s password. This function can also be used to remove an existing password by using nil as the new password.
Passwords must contain 1 to 128 printable characters.
This function requires GRANT privileges on the @thingsdb scope when a username other then the logged in user is given as argument. For the currently logged in user, EVENT privileges on the @thingsdb scope are sufficient.
This function generates an event.</description></item><item><title>set_time_zone</title><link>https://docs.thingsdb.io/v0/thingsdb-api/set_time_zone/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/set_time_zone/</guid><description>By default each collection will be created with time zone UTC. This function can be used to change the time zone for a collection. If changed, the functions datetime(..) and timeval(..) will use the collections time zone unless specified otherwise. See time_zones_info() for a list of all available timezones.
Use collection_info(..) to view the current time zone for a collection.
This function generates an event.
Function set_time_zone(collection, zone)
Arguments Argument Type Description collection str/int (required) Collection name or Id to change the time zone for.</description></item><item><title>time_zones_info</title><link>https://docs.thingsdb.io/v0/thingsdb-api/time_zones_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/time_zones_info/</guid><description>Returns all available time zones in ThingsDB.
This function does not generate an event.
Function time_zones_info()
Arguments None
Return value Returns a list with all available time zones in ThingsDB.
Available Time Zones Africa/Abidjan Africa/Accra Africa/Addis_Ababa Africa/Algiers Africa/Asmara Africa/Bamako Africa/Bangui Africa/Banjul Africa/Bissau Africa/Blantyre Africa/Brazzaville Africa/Bujumbura Africa/Cairo Africa/Casablanca Africa/Ceuta Africa/Conakry Africa/Dakar Africa/Dar_es_Salaam Africa/Djibouti Africa/Douala Africa/El_Aaiun Africa/Freetown Africa/Gaborone Africa/Harare Africa/Johannesburg Africa/Juba Africa/Kampala Africa/Khartoum Africa/Kigali Africa/Kinshasa Africa/Lagos Africa/Libreville Africa/Lome Africa/Luanda Africa/Lubumbashi Africa/Lusaka Africa/Malabo Africa/Maputo Africa/Maseru Africa/Mbabane Africa/Mogadishu Africa/Monrovia Africa/Nairobi Africa/Ndjamena Africa/Niamey Africa/Nouakchott Africa/Ouagadougou Africa/Porto-Novo Africa/Sao_Tome Africa/Tripoli Africa/Tunis Africa/Windhoek America/Adak America/Anchorage America/Anguilla America/Antigua America/Araguaina America/Argentina/Buenos_Aires America/Argentina/Catamarca America/Argentina/Cordoba America/Argentina/Jujuy America/Argentina/La_Rioja America/Argentina/Mendoza America/Argentina/Rio_Gallegos America/Argentina/Salta America/Argentina/San_Juan America/Argentina/San_Luis America/Argentina/Tucuman America/Argentina/Ushuaia America/Aruba America/Asuncion America/Atikokan America/Bahia America/Bahia_Banderas America/Barbados America/Belem America/Belize America/Blanc-Sablon America/Boa_Vista America/Bogota America/Boise America/Cambridge_Bay America/Campo_Grande America/Cancun America/Caracas America/Cayenne America/Cayman America/Chicago America/Chihuahua America/Costa_Rica America/Creston America/Cuiaba America/Curacao America/Danmarkshavn America/Dawson America/Dawson_Creek America/Denver America/Detroit America/Dominica America/Edmonton America/Eirunepe America/El_Salvador America/Fort_Nelson America/Fortaleza America/Glace_Bay America/Goose_Bay America/Grand_Turk America/Grenada America/Guadeloupe America/Guatemala America/Guayaquil America/Guyana America/Halifax America/Havana America/Hermosillo America/Indiana/Indianapolis America/Indiana/Knox America/Indiana/Marengo America/Indiana/Petersburg America/Indiana/Tell_City America/Indiana/Vevay America/Indiana/Vincennes America/Indiana/Winamac America/Inuvik America/Iqaluit America/Jamaica America/Juneau America/Kentucky/Louisville America/Kentucky/Monticello America/Kralendijk America/La_Paz America/Lima America/Los_Angeles America/Lower_Princes America/Maceio America/Managua America/Manaus America/Marigot America/Martinique America/Matamoros America/Mazatlan America/Menominee America/Merida America/Metlakatla America/Mexico_City America/Miquelon America/Moncton America/Monterrey America/Montevideo America/Montserrat America/Nassau America/New_York America/Nipigon America/Nome America/Noronha America/North_Dakota/Beulah America/North_Dakota/Center America/North_Dakota/New_Salem America/Nuuk America/Ojinaga America/Panama America/Pangnirtung America/Paramaribo America/Phoenix America/Port-au-Prince America/Port_of_Spain America/Porto_Velho America/Puerto_Rico America/Punta_Arenas America/Rainy_River America/Rankin_Inlet America/Recife America/Regina America/Resolute America/Rio_Branco America/Santarem America/Santiago America/Santo_Domingo America/Sao_Paulo America/Scoresbysund America/Sitka America/St_Barthelemy America/St_Johns America/St_Kitts America/St_Lucia America/St_Thomas America/St_Vincent America/Swift_Current America/Tegucigalpa America/Thule America/Thunder_Bay America/Tijuana America/Toronto America/Tortola America/Vancouver America/Whitehorse America/Winnipeg America/Yakutat America/Yellowknife Antarctica/Casey Antarctica/Davis Antarctica/DumontDUrville Antarctica/Macquarie Antarctica/Mawson Antarctica/McMurdo Antarctica/Palmer Antarctica/Rothera Antarctica/Syowa Antarctica/Troll Antarctica/Vostok Arctic/Longyearbyen Asia/Aden Asia/Almaty Asia/Amman Asia/Anadyr Asia/Aqtau Asia/Aqtobe Asia/Ashgabat Asia/Atyrau Asia/Baghdad Asia/Bahrain Asia/Baku Asia/Bangkok Asia/Barnaul Asia/Beirut Asia/Bishkek Asia/Brunei Asia/Chita Asia/Choibalsan Asia/Colombo Asia/Damascus Asia/Dhaka Asia/Dili Asia/Dubai Asia/Dushanbe Asia/Famagusta Asia/Gaza Asia/Hebron Asia/Ho_Chi_Minh Asia/Hong_Kong Asia/Hovd Asia/Irkutsk Asia/Jakarta Asia/Jayapura Asia/Jerusalem Asia/Kabul Asia/Kamchatka Asia/Karachi Asia/Kathmandu Asia/Khandyga Asia/Kolkata Asia/Krasnoyarsk Asia/Kuala_Lumpur Asia/Kuching Asia/Kuwait Asia/Macau Asia/Magadan Asia/Makassar Asia/Manila Asia/Muscat Asia/Nicosia Asia/Novokuznetsk Asia/Novosibirsk Asia/Omsk Asia/Oral Asia/Phnom_Penh Asia/Pontianak Asia/Pyongyang Asia/Qatar Asia/Qostanay Asia/Qyzylorda Asia/Riyadh Asia/Sakhalin Asia/Samarkand Asia/Seoul Asia/Shanghai Asia/Singapore Asia/Srednekolymsk Asia/Taipei Asia/Tashkent Asia/Tbilisi Asia/Tehran Asia/Thimphu Asia/Tokyo Asia/Tomsk Asia/Ulaanbaatar Asia/Urumqi Asia/Ust-Nera Asia/Vientiane Asia/Vladivostok Asia/Yakutsk Asia/Yangon Asia/Yekaterinburg Asia/Yerevan Atlantic/Azores Atlantic/Bermuda Atlantic/Canary Atlantic/Cape_Verde Atlantic/Faroe Atlantic/Madeira Atlantic/Reykjavik Atlantic/South_Georgia Atlantic/St_Helena Atlantic/Stanley Australia/Adelaide Australia/Brisbane Australia/Broken_Hill Australia/Currie Australia/Darwin Australia/Eucla Australia/Hobart Australia/Lindeman Australia/Lord_Howe Australia/Melbourne Australia/Perth Australia/Sydney Canada/Atlantic Canada/Central Canada/Eastern Canada/Mountain Canada/Newfoundland Canada/Pacific Europe/Amsterdam Europe/Andorra Europe/Astrakhan Europe/Athens Europe/Belgrade Europe/Berlin Europe/Bratislava Europe/Brussels Europe/Bucharest Europe/Budapest Europe/Busingen Europe/Chisinau Europe/Copenhagen Europe/Dublin Europe/Gibraltar Europe/Guernsey Europe/Helsinki Europe/Isle_of_Man Europe/Istanbul Europe/Jersey Europe/Kaliningrad Europe/Kiev Europe/Kirov Europe/Lisbon Europe/Ljubljana Europe/London Europe/Luxembourg Europe/Madrid Europe/Malta Europe/Mariehamn Europe/Minsk Europe/Monaco Europe/Moscow Europe/Oslo Europe/Paris Europe/Podgorica Europe/Prague Europe/Riga Europe/Rome Europe/Samara Europe/San_Marino Europe/Sarajevo Europe/Saratov Europe/Simferopol Europe/Skopje Europe/Sofia Europe/Stockholm Europe/Tallinn Europe/Tirane Europe/Ulyanovsk Europe/Uzhgorod Europe/Vaduz Europe/Vatican Europe/Vienna Europe/Vilnius Europe/Volgograd Europe/Warsaw Europe/Zagreb Europe/Zaporozhye Europe/Zurich GMT Indian/Antananarivo Indian/Chagos Indian/Christmas Indian/Cocos Indian/Comoro Indian/Kerguelen Indian/Mahe Indian/Maldives Indian/Mauritius Indian/Mayotte Indian/Reunion Pacific/Apia Pacific/Auckland Pacific/Bougainville Pacific/Chatham Pacific/Chuuk Pacific/Easter Pacific/Efate Pacific/Enderbury Pacific/Fakaofo Pacific/Fiji Pacific/Funafuti Pacific/Galapagos Pacific/Gambier Pacific/Guadalcanal Pacific/Guam Pacific/Honolulu Pacific/Kiritimati Pacific/Kosrae Pacific/Kwajalein Pacific/Majuro Pacific/Marquesas Pacific/Midway Pacific/Nauru Pacific/Niue Pacific/Norfolk Pacific/Noumea Pacific/Pago_Pago Pacific/Palau Pacific/Pitcairn Pacific/Pohnpei Pacific/Port_Moresby Pacific/Rarotonga Pacific/Saipan Pacific/Tahiti Pacific/Tarawa Pacific/Tongatapu Pacific/Wake Pacific/Wallis US/Alaska US/Arizona US/Central US/Eastern US/Hawaii US/Mountain US/Pacific UTC</description></item><item><title>user_info</title><link>https://docs.thingsdb.io/v0/thingsdb-api/user_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/user_info/</guid><description>Returns information about a user. If no argument is given, this function will return information about the currently logged in user.
This function requires GRANT privileges on the @thingsdb scope when a username other then the logged in user is given as argument. For the currently logged in user, QUERY privileges on the @thingsdb scope are sufficient.
This function does not generate an event.
Function user_info([username])
Arguments Argument Type Description username str (optional) Name of the user Return value Returns mpdata about the user.</description></item><item><title>users_info</title><link>https://docs.thingsdb.io/v0/thingsdb-api/users_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/thingsdb-api/users_info/</guid><description>Returns user information about all users in ThingsDB.
See the user_info() function documentation for an example of the exposed user information.
This function requires GRANT privileges on the @thingdb scope since it exposes user access and token information.
This function does not generate an event.
Function users_info()
Arguments None
Return value List with user mpdata about all users in ThingsDB.</description></item><item><title>del_procedure</title><link>https://docs.thingsdb.io/v0/procedures-api/del_procedure/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/procedures-api/del_procedure/</guid><description>Delete a procedure.
This function generates an event.
Function del_procedure(procedure)
Arguments Argument Type Description procedure str (required) Procedure name to delete. Return value Returns nil when successful. A lookup_err() is raised if the procedure does not exist.
Example This code will delete procedure add_one:
new_procedure('add_one', |x| { &amp;quot;Adds one to a given value&amp;quot;; x + 1; }); // Delete procedure `add_one` del_procedure('add_one'); Return value in JSON format</description></item><item><title>has_procedure</title><link>https://docs.thingsdb.io/v0/procedures-api/has_procedure/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/procedures-api/has_procedure/</guid><description>Determines if a procedure exists in the current scope.
This function does not generate an event.
Function has_procedure(procedure)
Arguments Argument Type Description procedure str (required) Procedure name to check. Return value Returns true if a procedure with a given name exists in the current scope and otherwise false.
Example This code shows an example use case of has_procedure():
has_procedure('I_most_likely_do_not_exist'); Return value in JSON format</description></item><item><title>new_procedure</title><link>https://docs.thingsdb.io/v0/procedures-api/new_procedure/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/procedures-api/new_procedure/</guid><description>Creates a new procedure to the @thingsdb or a @collection scope. The name of the procedure must be unique within the scope. The given closure will be copied to the procedure, so this is not a reference to the given closure.
This function generates an event.
Function new_procedure(name, closure)
Arguments Argument Type Description name str (required) Name of the new procedure. closure closure (required) Closure which will be attached to the procedure.</description></item><item><title>procedure_doc</title><link>https://docs.thingsdb.io/v0/procedures-api/procedure_doc/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/procedures-api/procedure_doc/</guid><description>Returns the doc string for a given procedure. An empty string is returned if the procedure has no doc string.
This function does not generate an event.
Function procedure_doc(procedure)
Arguments Argument Type Description procedure str (required) Name of the procedure where to return the doc string for. Return value Returns the doc string for a given procedure.
Example Create a new procedure add_one:</description></item><item><title>procedure_info</title><link>https://docs.thingsdb.io/v0/procedures-api/procedure_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/procedures-api/procedure_info/</guid><description>Returns information about a procedure.
Value Description arguments Array with positional argument names. created_at Time Stamp when the procedure is created. definition Closure definition. (Only available with EVENT privileges) doc Doc string of the closure in the procedure. name Name of the procedure. with_side_effects Boolean value which indicates if this procedure has side effects.</description></item><item><title>procedures_info</title><link>https://docs.thingsdb.io/v0/procedures-api/procedures_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/procedures-api/procedures_info/</guid><description>Returns procedure information about all procedures in the scope.
See the procedure_info() function documentation for an example of the exposed procedure information.
This function does not generate an event.
Function procedures_info()
Arguments None
Return value List with procedure mpdata about all procedures in the scope.</description></item><item><title>rename_procedure</title><link>https://docs.thingsdb.io/v0/procedures-api/rename_procedure/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/procedures-api/rename_procedure/</guid><description>Rename a procedure.
This function generates an event.
Function rename_procedure(current_name, new_name)
Arguments Argument Type Description current_name str (required) Current procedure name. new_name str (required) New name for the procedure. Return value Returns nil when successful.</description></item><item><title>run</title><link>https://docs.thingsdb.io/v0/procedures-api/run/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/procedures-api/run/</guid><description>Run a procedure.
The run(..) function may also be used to run a timer.
If the procedure name is not dynamic, you do need the run(..) function but instead you may call the procedure as a function call.
This function does not generate an event.
Function run(procedure, ...args)
Arguments Argument Type Description procedure str (required) Name of the procedure to run. &amp;hellip;args any The arguments for the procedure.</description></item><item><title>del_timer</title><link>https://docs.thingsdb.io/v0/timers-api/del_timer/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/timers-api/del_timer/</guid><description>Delete a timer.
This function generates an event.
Function del_timer(timer)
Arguments Argument Type Description timer int (required) Timer Id to delete. Return value Returns nil when successful. A lookup_err() is raised if the timer does not exist.
Example This code will will update .counter by one each minute. After 10 minutes the counter has reached 10 and will delete itself.</description></item><item><title>has_timer</title><link>https://docs.thingsdb.io/v0/timers-api/has_timer/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/timers-api/has_timer/</guid><description>Determines if a timer exists in the current scope.
This function does not generate an event.
Function has_timer(timer)
Arguments Argument Type Description timer int (required) Timer Id to check. Return value Returns true if a timer with a given Id exists in the current scope and otherwise false.
Example This code shows an example use case of has_timer():
has_timer(123); Example return value in JSON format</description></item><item><title>new_timer</title><link>https://docs.thingsdb.io/v0/timers-api/new_timer/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/timers-api/new_timer/</guid><description>Creates a new timer to the @thingsdb or a @collection scope. The given closure will be copied to the timer, so this is not a reference to the given closure.
When the timer is created in the @thingsdb scope, only type nil, int, float, bool, str, bytes, datetime and regex are allowed as argument values.
This function generates an event.
Function new_timer(start, [repeat], closure, [arguments])
Arguments Argument Type Description start datetime (required) Time when the timer should start.</description></item><item><title>run</title><link>https://docs.thingsdb.io/v0/timers-api/run/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/timers-api/run/</guid><description>Run a timer.
The run(..) function may also be used to run a procedure.
This function does not generate an event.
Function run(timer)
Arguments Argument Type Description timer int (required) Id of the timer to run. Return value Returns the timer response.
Example Example code using run:
.counter = 1; timer = new_timer(datetime().move('days', 1), || .counter += 1); wse(run(timer)); Return value in JSON format</description></item><item><title>set_timer_args</title><link>https://docs.thingsdb.io/v0/timers-api/set_timer_args/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/timers-api/set_timer_args/</guid><description>Set timer arguments.
If less than the required arguments are given, then the remaining arguments will be set using nil. More arguments than the closure accepts are simply removed and thus not used.
When the timer is created in the @thingsdb scope, only type nil, int, float, bool, str, bytes, datetime and regex are allowed as argument values.
This function generates an event.
Function set_timer_args(timer, args)
Arguments Argument Type Description timer int (required) Timer to set new arguments for.</description></item><item><title>timer_args</title><link>https://docs.thingsdb.io/v0/timers-api/timer_args/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/timers-api/timer_args/</guid><description>Get timer arguments as a tuple.
The first argument for a timer closure is the timer_id. This timer_id is not included in the list of arguments.
This function does not generate an event.
Function timer_args(timer)
Arguments Argument Type Description timer int (required) Timer to get the arguments for. Return value Returns a tuple with arguments.
Example This code will will be called every minute for 10 times and then it the timer will be removed.</description></item><item><title>timer_info</title><link>https://docs.thingsdb.io/v0/timers-api/timer_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/timers-api/timer_info/</guid><description>Returns information about a timer.
Value Description arguments Array with positional argument names. definition Closure definition. (Only available with EVENT privileges) doc Doc string of the closure in the timer. id Id of the timer. next_run Scheduled time when the timer wil run. repeat Repeat the timer each X seconds. (Only when this is a repeating timer) user User which credentials are used for the timer.</description></item><item><title>timers_info</title><link>https://docs.thingsdb.io/v0/timers-api/timers_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/timers-api/timers_info/</guid><description>Returns timer information about all timers in the scope.
See the timer_info() function documentation for an example of the exposed timer information.
This function does not generate an event.
Function timers_info()
Arguments None
Return value List with timer mpdata about all timers in the scope.</description></item><item><title>node-status</title><link>https://docs.thingsdb.io/v0/watching/node-status/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/watching/node-status/</guid><description>The body of a Node Status event contains only a string value. This string may be one of the following:
String Description AWAY_SOON The node will enter away mode in a few seconds. Unless you really want to act on this state, this notification can be ignored. AWAY The node is in away mode. Unless you really want to act on this state, this notification can be ignored.</description></item><item><title>on-init</title><link>https://docs.thingsdb.io/v0/watching/on-init/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/watching/on-init/</guid><description>This event will be pushed on every request to watch a thing.
Example on-init event in JSON format:
{ &amp;#34;event&amp;#34;: 123, &amp;#34;collection&amp;#34;: &amp;#34;stuff&amp;#34;, &amp;#34;thing&amp;#34;: { &amp;#34;#&amp;#34;: 42, &amp;#34;name&amp;#34;: &amp;#34;Iris&amp;#34; } } If the thing IS actually a collection, then the init event also contains all types and procedures inside the collection.
Example on-init event for a collection in JSON format:
{ &amp;#34;event&amp;#34;: 123, &amp;#34;collection&amp;#34;: &amp;#34;stuff&amp;#34;, &amp;#34;thing&amp;#34;: { &amp;#34;#&amp;#34;: 3 }, &amp;#34;types&amp;#34;: [ { &amp;#34;type_id&amp;#34;: 1, &amp;#34;name&amp;#34;: &amp;#34;Sample&amp;#34;, &amp;#34;created_at&amp;#34;: 1579592122, &amp;#34;modified_at&amp;#34;: 1579592122, &amp;#34;fields&amp;#34;: [ [&amp;#34;name&amp;#34;, &amp;#34;str?</description></item><item><title>on-update</title><link>https://docs.thingsdb.io/v0/watching/on-update/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/watching/on-update/</guid><description>An update event is pushed when changes are made to a thing you are watching. Nested things need to be watched separately.
The event contains the Thing Id (#), an event number, and a jobs array containing all the mutations to the thing in the applied order.
{ &amp;#34;#&amp;#34;: 3, &amp;#34;event&amp;#34;: 123, &amp;#34;jobs&amp;#34;: [ ...mutations ] } Each mutation is a map {} with a single key. This key tells what kind of mutation is applied to the thing.</description></item><item><title>on-delete</title><link>https://docs.thingsdb.io/v0/watching/on-delete/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/watching/on-delete/</guid><description>A delete event will be pushed as soon as a thing which you are watching, is removed from ThingsDB.
If this event is not received when expected, there might exist circular references to the removed thing. In this case you have to wait until garbage collection has cleaned the thing from ThingsDB. This is done when the node is in away mode.
Example watch delete event in JSON format:</description></item><item><title>on-stop</title><link>https://docs.thingsdb.io/v0/watching/on-stop/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/watching/on-stop/</guid><description>A stop event will be pushed as soon as a thing is no longer being watched.
This event is not pushed when a connection to a node is lost but only when watching is stopped by the user.
Example watch stop event in JSON format:
{ &amp;#34;#&amp;#34;: 42 }</description></item><item><title>warning</title><link>https://docs.thingsdb.io/v0/watching/warning/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/watching/warning/</guid><description>ThingsDB might send a warning events to a client. The warn_code can be used to determine the warning type.
ThingsDB might push one of the following waning codes:
Code Description 1 This warning is pushed after attempting to watch a thing which does not exist in the collection. Example warning event in JSON format:
{ &amp;#34;warn_code&amp;#34;: 1, &amp;#34;warn_msg&amp;#34;: &amp;#34;failed to watch thing .</description></item><item><title>assert_err</title><link>https://docs.thingsdb.io/v0/errors/assert_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/assert_err/</guid><description>Returns an error when an assertion has failed.
This function does not generate an event.
Function assert_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows assert_err():
assert_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;assert_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -50, &amp;#34;error_msg&amp;#34;: &amp;#34;assertion statement has failed&amp;#34; }</description></item><item><title>auth_err</title><link>https://docs.thingsdb.io/v0/errors/auth_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/auth_err/</guid><description>Returns an error when authentication has failed.
This function does not generate an event.
Function auth_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows auth_err():
auth_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;auth_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -56, &amp;#34;error_msg&amp;#34;: &amp;#34;authentication error&amp;#34; }</description></item><item><title>bad_data_err</title><link>https://docs.thingsdb.io/v0/errors/bad_data_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/bad_data_err/</guid><description>Returns an error when a request is malformed.
This function does not generate an event.
Function bad_data_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows bad_data_err():
bad_data_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;bad_data_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -53, &amp;#34;error_msg&amp;#34;: &amp;#34;unable to handle request due to invalid data&amp;#34; }</description></item><item><title>forbidden_err</title><link>https://docs.thingsdb.io/v0/errors/forbidden_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/forbidden_err/</guid><description>Returns an error when the client or user is missing the required privileges.
This function does not generate an event.
Function forbidden_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows forbidden_err():
forbidden_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;forbidden_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -55, &amp;#34;error_msg&amp;#34;: &amp;#34;forbidden (access denied)&amp;#34; }</description></item><item><title>lookup_err</title><link>https://docs.thingsdb.io/v0/errors/lookup_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/lookup_err/</guid><description>Returns an error when a requested resource is not found or when an index is out-of-range.
This function does not generate an event.
Function lookup_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows lookup_err():
lookup_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;lookup_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -54, &amp;#34;error_msg&amp;#34;: &amp;#34;requested resource not found&amp;#34; }</description></item><item><title>max_quota_err</title><link>https://docs.thingsdb.io/v0/errors/max_quota_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/max_quota_err/</guid><description>Returns an error when a quota limit is reached.
This function does not generate an event.
Function max_quota_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows max_quota_err():
max_quota_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;max_quota_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -57, &amp;#34;error_msg&amp;#34;: &amp;#34;max quota is reached&amp;#34; }</description></item><item><title>node_err</title><link>https://docs.thingsdb.io/v0/errors/node_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/node_err/</guid><description>Returns an error when a node was not able to handle the request.
This function does not generate an event.
Function node_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows node_err():
node_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;node_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -51, &amp;#34;error_msg&amp;#34;: &amp;#34;node is temporary unable to handle the request&amp;#34; }</description></item><item><title>num_arguments_err</title><link>https://docs.thingsdb.io/v0/errors/num_arguments_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/num_arguments_err/</guid><description>Returns an error when a wrong number of arguments is given.
This function does not generate an event.
Function num_arguments_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows num_arguments_err():
num_arguments_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;num_arguments_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -62, &amp;#34;error_msg&amp;#34;: &amp;#34;wrong number of arguments&amp;#34; }</description></item><item><title>operation_err</title><link>https://docs.thingsdb.io/v0/errors/operation_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/operation_err/</guid><description>Returns an error when an operation is not valid within the current context.
This function does not generate an event.
Function operation_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows operation_err():
operation_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;operation_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -63, &amp;#34;error_msg&amp;#34;: &amp;#34;operation is not valid in the current context&amp;#34; }</description></item><item><title>overflow_err</title><link>https://docs.thingsdb.io/v0/errors/overflow_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/overflow_err/</guid><description>Returns an error when an attempt is made to create an integer value out of the supported 64Bit (signed) range.
This function does not generate an event.
Function overflow_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows overflow_err():
overflow_err(); Return value in JSON format
{ &amp;#34;!</description></item><item><title>syntax_err</title><link>https://docs.thingsdb.io/v0/errors/syntax_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/syntax_err/</guid><description>Returns an error when the given ThingsDB code contains a syntax error.
This function does not generate an event.
Function syntax_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows syntax_err():
syntax_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;syntax_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -52, &amp;#34;error_msg&amp;#34;: &amp;#34;syntax error in query&amp;#34; }</description></item><item><title>type_err</title><link>https://docs.thingsdb.io/v0/errors/type_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/type_err/</guid><description>Returns an error when a given value is of the incorrect type.
This function does not generate an event.
Function type_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows type_err():
type_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;type_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -61, &amp;#34;error_msg&amp;#34;: &amp;#34;object of inappropriate type&amp;#34; }</description></item><item><title>value_err</title><link>https://docs.thingsdb.io/v0/errors/value_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/value_err/</guid><description>Returns an error when a given value has the correct type but contains invalid data.
This function does not generate an event.
Function value_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows value_err():
value_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;value_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -60, &amp;#34;error_msg&amp;#34;: &amp;#34;object has the right type but an inappropriate value&amp;#34; }</description></item><item><title>cancelled_err</title><link>https://docs.thingsdb.io/v0/errors/cancelled_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/cancelled_err/</guid><description>Returns an error when an operation is cancelled before completion. Fox example by a time-out or stop of service.
This function does not generate an event.
Function cancelled_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows cancelled_err():
cancelled_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;cancelled_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -64, &amp;#34;error_msg&amp;#34;: &amp;#34;operation is cancelled before completion&amp;#34; }</description></item><item><title>zero_div_err</title><link>https://docs.thingsdb.io/v0/errors/zero_div_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.io/v0/errors/zero_div_err/</guid><description>Returns an error when an attempt is made to divide or take a modulo by zero.
This function does not generate an event.
Function zero_div_err([message])
Arguments Argument Type Description message str (optional) Alternative error message. Return value An error value.
Example This code shows zero_div_err():
zero_div_err(); Return value in JSON format
{ &amp;#34;!&amp;#34;: &amp;#34;zero_div_err()&amp;#34;, &amp;#34;error_code&amp;#34;: -58, &amp;#34;error_msg&amp;#34;: &amp;#34;division or module by zero&amp;#34; }</description></item></channel></rss>