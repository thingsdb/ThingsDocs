<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Collection API on ThingsDB documentation</title><link>https://docs.thingsdb.net/v0/collection-api/</link><description>Recent content in Collection API on ThingsDB documentation</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><atom:link href="https://docs.thingsdb.net/v0/collection-api/index.xml" rel="self" type="application/rss+xml"/><item><title>alt_raise</title><link>https://docs.thingsdb.net/v0/collection-api/alt_raise/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/alt_raise/</guid><description>This function will try a statement. If the statement is successful it will just return the result but in case of an error, it will re-raise the error using a given error code. The following code below will illustrate how alt_raise works:
Without an optional error message
// the following code: res = alt_raise(statement, error_code); // is equivalent to: res = try(statement); if (is_err(res), { raise(error_code, res.msg()); }); With an error message</description></item><item><title>assert</title><link>https://docs.thingsdb.net/v0/collection-api/assert/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/assert/</guid><description>Raises an assert_err() if the specified expression evaluates to false.
This function does not generate an event.
Function assert(expression [, error_msg])
Arguments Argument Type Description expression any (required) The expression to evaluate. error_msg str (optional) Custom error message. Return value Returns nil if the type of the expression evaluates to true. Otherwise an assert_err() is raised.
In versions before v0.</description></item><item><title>base64_decode</title><link>https://docs.thingsdb.net/v0/collection-api/base64_decode/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/base64_decode/</guid><description>Decode a Base64 encoded string.
See base64_encode for Base64 encoding.
This function does not generate an event.
Function base64_decode(encoded)
Arguments Argument Type Description encoded str/bytes The string value to decode. Return value Decoded bytes value is returned.
Example This code shows an example for base64_decode:
encoded = 'YmFzZTY0IGVuY29kZWQgc3RyaW5n'; // decode data = base64_decode(encoded); // result is of type bytes assert(type(data) == 'bytes'); // return as string str(data); Return value in JSON format</description></item><item><title>base64_encode</title><link>https://docs.thingsdb.net/v0/collection-api/base64_encode/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/base64_encode/</guid><description>Encode a str or bytes value using Base64.
See base64_decode for Base64 decoding.
This function does not generate an event.
Function base64_encode(string)
Arguments Argument Type Description string str/bytes The value to encode. Return value Encoded str value is returned.
Example This code shows an example for base64_encode:
encoded = base64_encode('base64 encoded string'); // result is of type str assert(type(encoded) == 'str'); // return encoded; Return value in JSON format</description></item><item><title>bool</title><link>https://docs.thingsdb.net/v0/collection-api/bool/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/bool/</guid><description>Returns a bool from a specified value. If no value is given, false is returned.
Types with a length evaluate to true when the length is not 0, and false otherwise.
This function does not generate an event.
Function bool(value)
Arguments Argument Type Description value any (optional) The value to convert to a boolean value. Return value A boolean value.</description></item><item><title>bytes</title><link>https://docs.thingsdb.net/v0/collection-api/bytes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/bytes/</guid><description>Convert a value to a byte sequence. If no value is given, an empty byte sequence is returned.
This function does not generate an event.
Function bytes(value)
Arguments Argument Type Description value any (optional) The value where to create a bytes value for.</description></item><item><title>datetime</title><link>https://docs.thingsdb.net/v0/collection-api/datetime/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/datetime/</guid><description>Returns a datetime depending on some optional values.
This function does not generate an event.
Function Interface Arguments Description datetime() None Return a datetime with the current date/tine. datetime(ts) int/float Return a datetime from a given UNIX time stamp. datetime(str, [fmt]) str Return a datetime from a given string. See initialize from string for a details. datetime(int, int, int, [int, [int, [int]]], [zone]) int, int,&amp;hellip; str Return a datetime using values for individual time units, with optional time zone.</description></item><item><title>deep</title><link>https://docs.thingsdb.net/v0/collection-api/deep/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/deep/</guid><description>Returns the current deep value for the running query. The deep value indicates how far down the result of a query is returned. For example, thing1 may contain a thing2 that contains a thing3. A deep value of 1 would only show the content of thing1 and a deep value of 3 will go as deep as the content of thing3.
The deep value changes when a function with a return(.</description></item><item><title>del_enum</title><link>https://docs.thingsdb.net/v0/collection-api/del_enum/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/del_enum/</guid><description>Deletes an existing enumerator type.
It is not possible to delete a enumerator type which is used by a Type or if one of the enumerator members is still being used. See example below.
This function generates an event.
Function del_enum(enum)
Arguments Argument Type Description enum string Name of the enumerator type to be deleted. Return value The value nil.</description></item><item><title>del_type</title><link>https://docs.thingsdb.net/v0/collection-api/del_type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/del_type/</guid><description>Deletes an existing Type.
It is not possible to delete a Type which is used by another Type. You should first change or delete the other Type before you are able to delete this Type. See the example below.
If there are still instances of the Type you delete, then all instances will be converted to normal things. No properties will be removed in this process. With type_count(..) you can view the number of instances of a certain Type.</description></item><item><title>enum</title><link>https://docs.thingsdb.net/v0/collection-api/enum/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/enum/</guid><description>Returns a enum member from a given value. A lookup_err() is raised if either the enum or value is not found.
This function does not generate an event.
Function enum(enum, [value])
Arguments Argument Type Description enum str (required) The name of the enumeration type. value any (optional) The value to search the enum member for. If omitted, the default member is returned.</description></item><item><title>enum_info</title><link>https://docs.thingsdb.net/v0/collection-api/enum_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/enum_info/</guid><description>Returns information about a given enumeration type.
Value Description enum_id Internal enum Id (can be used to identify Enums in collection events). created_at Time Stamp when the enum is created. default Default member of this enumerator. The default member is used when implicitly creating a value of this enumerator type. See mod_enum(..) to change the deafult member. modified_at Time Stamp when the enum is last modified or nil if never modified.</description></item><item><title>enums_info</title><link>https://docs.thingsdb.net/v0/collection-api/enums_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/enums_info/</guid><description>Returns enumeration type information about all the enum&amp;rsquo;s within a collection scope.
See the enum_info() function documentation for an example of the exposed information.
This function does not generate an event.
Function enums_info()
Arguments None
Return value List with mpdata about all enumeration types in the collection scope.</description></item><item><title>err</title><link>https://docs.thingsdb.net/v0/collection-api/err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/err/</guid><description>Returns an error.
This function does not generate an event.
Function err([code, [message]])
Arguments Argument Type Description code int (optional) Integer error code between -127 and -50, defaults to -100. message str (optional) Optional error message. Return value An error value.
Example This code shows some return values for err():
[ err(), err(-100, 'some error occurred'), err(-101), err(-59), ]; Return value in JSON format</description></item><item><title>event_id</title><link>https://docs.thingsdb.net/v0/collection-api/event_id/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/event_id/</guid><description>Returns the current event Id for the running query. The return value will be nil if the query does not require an event.
This function does not generate an event.
Function event_id()
Arguments None
Return value The current event Id or nil when the query has no event.
Example Example using event_id():
event_id(); // nil, since no event is required Return value in JSON format
null Using event_id() when the query does require an event:</description></item><item><title>float</title><link>https://docs.thingsdb.net/v0/collection-api/float/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/float/</guid><description>Returns a float from a specified value. If no value is given, the default float 0.0 is returned.
If the specified value is of type str, then the initial characters of the string are converted until a non-digit character is found. Initial white space is ignored and the number may start with an optional + or - sign.
Type bool values are converted to 1.0 for true and 0.0 for false.</description></item><item><title>future</title><link>https://docs.thingsdb.net/v0/collection-api/future/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/future/</guid><description>Returns a future. It is not possible to assign a future to a collection or add the future to a list. If you do, then nil will be assigned instead.
If you want to use the return value from a future, you need to use then(..) and
This function does not generate an event.
Function future(request, arg1, arg2, ..., argX)
Arguments Argument Type Description request thing/closure/nil (required) The request or nil for a plain future.</description></item><item><title>has_enum</title><link>https://docs.thingsdb.net/v0/collection-api/has_enum/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/has_enum/</guid><description>Determines if a enumerator type exists in the current @collection scope.
This function does not generate an event.
Function has_enum(enum)
Arguments Argument Type Description enum str (required) Enum name to check. Return value Returns true if a enumerator type with a given name exists and otherwise false.
Example This code shows an example use case of has_enum():
has_enum('XXX'); Return value in JSON format</description></item><item><title>has_type</title><link>https://docs.thingsdb.net/v0/collection-api/has_type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/has_type/</guid><description>Determines if a Type exists in the current @collection scope.
This function does not generate an event.
Function has_type(type)
Arguments Argument Type Description type str (required) Type name to check. Return value Returns true if a Type with a given name exists and otherwise false.
Example This code shows an example use case of has_type():
has_type('XXX'); Return value in JSON format</description></item><item><title>if</title><link>https://docs.thingsdb.net/v0/collection-api/if/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/if/</guid><description>Runs a block code based on the result of a given condition.
ThingsDB uses lazy-evaluation of function arguments. For this reason if() is a function call, and not a statement like in most other languages.
This function does not generate an event.
Function if(condition, if_true, [if_false])
Arguments Argument Type Description condition any (required) The condition to evaluate. if_true any (required) Will be executed when the condition evaluated to true.</description></item><item><title>int</title><link>https://docs.thingsdb.net/v0/collection-api/int/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/int/</guid><description>Returns an int from a specified value. If no value is given, the default integer 0 is returned.
If the specified value was a float value, then the new integer value will be rounded towards zero.
If the specified value is of type str, then the initial characters of the string are converted until a non-digit character is found. Initial white space is ignored and the number may start with an optional + or - sign.</description></item><item><title>is_array</title><link>https://docs.thingsdb.net/v0/collection-api/is_array/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_array/</guid><description>This function determines whether the provided value is of type list or tuple or not. The functions is_list and is_tuple can be used to check if the array is mutable.
This function does not generate an event.
Function is_array(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the value passed is an array, else it returns false.</description></item><item><title>is_ascii</title><link>https://docs.thingsdb.net/v0/collection-api/is_ascii/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_ascii/</guid><description>This function determines whether the provided value is of type str and contains only valid ascii characters.
This function does not generate an event.
Function is_ascii(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type str and contains only ascii characters, else false.
Example This code shows some return values for is_ascii():</description></item><item><title>is_bool</title><link>https://docs.thingsdb.net/v0/collection-api/is_bool/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_bool/</guid><description>This function determines whether the provided value is a bool or not.
This function does not generate an event.
Function is_bool(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a boolean, else it returns false.
Example This code shows some return values for is_bool():
[ is_bool( true ), is_bool( 'true' ), is_bool( nil ), ]; Return value in JSON format</description></item><item><title>is_bytes</title><link>https://docs.thingsdb.net/v0/collection-api/is_bytes/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_bytes/</guid><description>This function determines whether the provided value is of type bytes or not.
This function does not generate an event.
Function is_bytes(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type bytes, else it returns false.
Example This code shows some return values for is_bytes():</description></item><item><title>is_closure</title><link>https://docs.thingsdb.net/v0/collection-api/is_closure/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_closure/</guid><description>This function determines whether the provided value is a closure or not.
This function does not generate an event.
Function is_closure(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a closure, else it returns false.
Example This code shows some return values for is_closure():
[ is_closure( || nil ), is_closure( nil ), ]; Return value in JSON format</description></item><item><title>is_datetime</title><link>https://docs.thingsdb.net/v0/collection-api/is_datetime/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_datetime/</guid><description>This function determines whether the provided value is of type datetime.
This function does not generate an event.
Function is_datetime(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type timeval, else false.
Example This code shows some return values for is_utf8():
[ is_datetime( timeval(2013, 2, 6) ), is_datetime( datetime(2013, 2, 6) ), ]; Return value in JSON format</description></item><item><title>is_enum</title><link>https://docs.thingsdb.net/v0/collection-api/is_enum/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_enum/</guid><description>This function determines whether the provided value is an enumeration type member or not.
This function does not generate an event.
Function is_enum(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type enum, else it returns false.
Example This code shows some return values for is_enum():</description></item><item><title>is_err</title><link>https://docs.thingsdb.net/v0/collection-api/is_err/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_err/</guid><description>This function determines whether the provided value is a error or not.
This function does not generate an event.
Function is_err(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is an error, else it returns false.
Example This code shows some return values for is_err():
[ is_err( err() ), is_err( zero_div_err() ), is_err( try((1 / 0)) ), is_err( try((1 / 1)) ), ]; Return value in JSON format</description></item><item><title>is_float</title><link>https://docs.thingsdb.net/v0/collection-api/is_float/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_float/</guid><description>This function determines whether the provided value is a floating point value or not.
This function does not generate an event.
Function is_float(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a float, else it returns false.
Example This code shows some return values for is_float():</description></item><item><title>is_future</title><link>https://docs.thingsdb.net/v0/collection-api/is_future/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_future/</guid><description>This function determines whether the provided value is a future value or not.
This function does not generate an event.
Function is_future(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a future, else it returns false.
Example This code shows some return values for is_float():
[ is_future( future(nil) ), is_future( future(nil).</description></item><item><title>is_mpdata</title><link>https://docs.thingsdb.net/v0/collection-api/is_mpdata/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_mpdata/</guid><description>This function determines whether the provided value is of type mpdata or not.
This function does not generate an event.
Function is_mpdata(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type mpdata, else it returns false.
Example This code shows some return values for is_mpdata():</description></item><item><title>is_inf</title><link>https://docs.thingsdb.net/v0/collection-api/is_inf/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_inf/</guid><description>This function determines whether the provided value is a positive or negative infinity.
This function does not generate an event.
Function is_inf(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a positive or negative infinity, else it returns false.
Example This code shows some return values for is_inf():</description></item><item><title>is_int</title><link>https://docs.thingsdb.net/v0/collection-api/is_int/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_int/</guid><description>This function determines whether the provided value is an integer or not.
This function does not generate an event.
Function is_int(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is an integer, else it returns false.
Example This code shows some return values for is_int():
[ is_int( 42 ), is_int( 0x2a ), is_int( 42.</description></item><item><title>is_list</title><link>https://docs.thingsdb.net/v0/collection-api/is_list/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_list/</guid><description>This function determines whether the provided value is a list or not.
This function does not generate an event.
Function is_list(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a list, else it returns false.
Example This code shows some return values for is_list():
[ is_list( [] ), is_list( tmp = [['nested']] ), is_list( tmp[0] ), ]; Return value in JSON format</description></item><item><title>is_nan</title><link>https://docs.thingsdb.net/v0/collection-api/is_nan/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_nan/</guid><description>This function determines whether the provided value is a number.
This function does not generate an event.
Function is_nan(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is not a number, else false.
Example This code shows some return values for is_nan():
[ is_nan( true ), is_nan( 123 ), is_nan( 3.</description></item><item><title>is_nil</title><link>https://docs.thingsdb.net/v0/collection-api/is_nil/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_nil/</guid><description>This function determines whether the provided value is nil.
This function does not generate an event.
Function is_nil(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is nil, else false.
Example This code shows some return values for is_nil():
[ is_nil( nil ), is_nil( 0 ), ]; Return value in JSON format</description></item><item><title>is_raw</title><link>https://docs.thingsdb.net/v0/collection-api/is_raw/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_raw/</guid><description>This function determines whether the provided value is of type str or bytes.
This function does not generate an event.
Function is_raw(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type str or bytes, else false.
Example This code shows some return values for is_raw():</description></item><item><title>is_regex</title><link>https://docs.thingsdb.net/v0/collection-api/is_regex/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_regex/</guid><description>This function determines whether the provided value is of type regex or not.
This function does not generate an event.
Function is_regex(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type regex, else it returns false.
Example This code shows some return values for is_regex():</description></item><item><title>is_set</title><link>https://docs.thingsdb.net/v0/collection-api/is_set/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_set/</guid><description>This function determines whether the provided value is a set or not.
This function does not generate an event.
Function is_set(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a set, else it returns false.
Example This code shows some return values for is_set():
[ is_set( [] ), is_set( set() ), ]; Return value in JSON format</description></item><item><title>is_str</title><link>https://docs.thingsdb.net/v0/collection-api/is_str/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_str/</guid><description>This function determines whether the provided value is of type str.
The value is not explicitly checked for valid UTF-8 characters, use is_utf8() if you want to check for valid UTF-8 data.
This function does not generate an event.
Function is_str(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type str, else false.</description></item><item><title>is_thing</title><link>https://docs.thingsdb.net/v0/collection-api/is_thing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_thing/</guid><description>This function determines whether the provided value is a thing or not.
Type instances are also things, so this function returns true for a Type instance as well.
This function does not generate an event.
Function is_thing(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a thing, else it returns false.</description></item><item><title>is_timeval</title><link>https://docs.thingsdb.net/v0/collection-api/is_timeval/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_timeval/</guid><description>This function determines whether the provided value is of type timeval.
This function does not generate an event.
Function is_timeval(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type timeval, else false.
Example This code shows some return values for is_utf8():
[ is_timeval( timeval(2013, 2, 6) ), is_timeval( datetime(2013, 2, 6) ), ]; Return value in JSON format</description></item><item><title>is_tuple</title><link>https://docs.thingsdb.net/v0/collection-api/is_tuple/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_tuple/</guid><description>This function determines whether the provided value is a tuple or not. At least nested arrays are of kind tuple.
This function does not generate an event.
Function is_tuple(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is a tuple, else it returns false.
Example This code shows some return values for is_tuple():</description></item><item><title>is_utf8</title><link>https://docs.thingsdb.net/v0/collection-api/is_utf8/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/is_utf8/</guid><description>This function determines whether the provided value is of type str and contains valid UTF-8 characters.
This function does not generate an event.
Function is_utf8(value)
Arguments Argument Type Description value any (required) The value to be tested. Return value Returns true if the given value is of type raw and contains valid utf8, else false.
Example This code shows some return values for is_utf8():</description></item><item><title>list</title><link>https://docs.thingsdb.net/v0/collection-api/list/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/list/</guid><description>Returns a new empty list or returns a list for a given set.
This function does not generate an event.
Function list([value])
Arguments Argument Type Description value set/list/tuple (optional) Optional value to initialize the list. Return value A new list.
Example This code shows some return values for list():
list( set({}, {}) ); Return value in JSON format</description></item><item><title>new</title><link>https://docs.thingsdb.net/v0/collection-api/new/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/new/</guid><description>Creates a new instance of a defined Type.
When possible it is preferred to use the syntax MyType{...} to create a instance of a certain Type. However, sometimes you need to create an instance dynamically with the Type&amp;rsquo;s name as variable and then new() can be used.
Since version v0.9.2 the value argument is no longer required. If not given all properties will be set to their default values.</description></item><item><title>new_type</title><link>https://docs.thingsdb.net/v0/collection-api/new_type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/new_type/</guid><description>Creates a new Type. This function only creates a new type and does not allow you to specify any fields. With the set_type() function you can define the fields for the new type.
It is possible to use set_type directly without calling new_type first. However, sometimes you want to cross reference two types so you want both type to exists before calling set_type.
This function generates an event.
Function new_type(type, [wrap_only])</description></item><item><title>now</title><link>https://docs.thingsdb.net/v0/collection-api/now/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/now/</guid><description>Return the time in seconds since the epoch as a floating point number.
If you require the same time multiple times within a query, then call now() only once and save it to a variable, for example now = now();
This function does not generate an event.
Function now()
Arguments None
Return value Current timestamp.
Example This code shows the current timestamp:
// current timestamp now(); Example return value in JSON format</description></item><item><title>raise</title><link>https://docs.thingsdb.net/v0/collection-api/raise/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/raise/</guid><description>Raises an error.
This function does not generate an event.
Function raise([error])
Arguments Argument Type Description value error/str (optional) The error to raise. Return value None
Example Some examples on how raise() can be used:
raise (); // raise a default error 'This code is not reached'; raise ('no licenses left'); // raise with a custom message 'This code is not reached'; raise (value_err()); // raise a value error 'This code is not reached';</description></item><item><title>rand</title><link>https://docs.thingsdb.net/v0/collection-api/rand/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/rand/</guid><description>Returns pseudo-random number between 0.0 and 1.0.
Do not use rand() when the purpose is security related since the linear congruential algorithms used by this function are too easy to break.
This function does not generate an event.
Function rand()
Arguments None
Return value A pseudo-random float number between 0.0 and 1.0.
Example Some examples on how raise() can be used:
// Return a pseudo-random number between 0.</description></item><item><title>randint</title><link>https://docs.thingsdb.net/v0/collection-api/randint/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/randint/</guid><description>Returns pseudo-random integer number between a given range.
The first argument specifies the start of the range and must have a value less than the second argument when specifies the end of the range. The start is inclusive and the end is exclusive, for example: randint(0, 2) will return either 0 or 1.
Do not use randint() when the purpose is security related since the linear congruential algorithms used by this function are too easy to break.</description></item><item><title>randstr</title><link>https://docs.thingsdb.net/v0/collection-api/randstr/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/randstr/</guid><description>Returns a string with random characters.
The default characters to generate a string are URL-safe and contain the characters 0-9, A-Z, a-z, - and _.
Instead of the default character set, it is possible to use your own set. This custom set may contain duplicated characters which increase the chance for certain characters to occur in the final string. For example, a random string based on the character set AAB will most likely contain more A&amp;rsquo;s than B&amp;rsquo;s.</description></item><item><title>range</title><link>https://docs.thingsdb.net/v0/collection-api/range/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/range/</guid><description>This function returns a list of numbers, starting from 0 (by default), increments by 1 (by default), and ends at a specified number.
Function range() may only be used for relatively small lists. An operation_err() (maximum range length exceeded) will be raised when trying to create a list with more than 1024 numbers.
Function range(start, stop, step)
Arguments Argument Type Description start int (optional) An integer number specifying at which position to start.</description></item><item><title>refs</title><link>https://docs.thingsdb.net/v0/collection-api/refs/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/refs/</guid><description>Returns the reference count of a value.
Generally, the count returned is one higher than you might expect, because it includes the (temporary) reference.
Different nodes might return different reference values since the reference counter can be higher or lower depending on how the value is stored and used.
This function does not generate an event.
Function refs(value)
Arguments Argument Type Description value any (required) The value to return the reference count for.</description></item><item><title>regex</title><link>https://docs.thingsdb.net/v0/collection-api/regex/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/regex/</guid><description>Create a new regular expression.
This function can be used to create a regular expression from a given pattern with optional flags.
This function does not generate an event.
Function regex(pattern, [flags])
Arguments Argument Type Description pattern str (required) The pattern to use as a regular expression. flags str (optional) Optional flags, see the regex for more information. Return value A new regular expression.</description></item><item><title>rename_enum</title><link>https://docs.thingsdb.net/v0/collection-api/rename_enum/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/rename_enum/</guid><description>Rename an enum type.
This function generates an event.
Function rename_enum(current_name, new_name)
Arguments Argument Type Description current_name str (required) Current enum type name. new_name str (required) New name for the enum type. Return value Returns nil when successful.</description></item><item><title>rename_type</title><link>https://docs.thingsdb.net/v0/collection-api/rename_type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/rename_type/</guid><description>Rename a type.
This function generates an event.
Function rename_type(current_name, new_name)
Arguments Argument Type Description current_name str (required) Current type name. new_name str (required) New name for the type. Return value Returns nil when successful.</description></item><item><title>return</title><link>https://docs.thingsdb.net/v0/collection-api/return/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/return/</guid><description>The return function moves the argument to the output of the current query/closure call.
If no return is specified, then the last value will be the value which is returned. A second argument can be given to the return function which can be used to specify how deep the result should be returned. The default deep value is set to 1, but any value between 0 and 127 is possible. See the deep section for a detailed explanation of this argument.</description></item><item><title>set</title><link>https://docs.thingsdb.net/v0/collection-api/set/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/set/</guid><description>Returns a new empty set. If an array is given, then all items in the given array must be of type thing and a new set is returned based on the given things. Instead of an array, it is also possible to provide one thing or multiple comma-separated things.
This function does not generate an event.
Function set(array_or_things)
Arguments Argument Type Description array_or_things array/things (optional) Optional array or things to initialize the set.</description></item><item><title>set_enum</title><link>https://docs.thingsdb.net/v0/collection-api/set_enum/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/set_enum/</guid><description>Creates a new enumerator type.
This function generates an event.
Function set_enum(enum, members)
Arguments Argument Type Description enum str The name of the enumerator type to create. members thing Thing containing all the members to be set. Return value The value nil.
Example This code shows how to use set_enum():
set_enum('Status', { OK: 0, NOK: -1 }); Return value in JSON format</description></item><item><title>set_type</title><link>https://docs.thingsdb.net/v0/collection-api/set_type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/set_type/</guid><description>Defines the properties of a Type. Function set_type works only on a new Type. Use mod_type() if you want to change an existing Type, see mod_type.
This function generates an event.
Function set_type(type, value, [wrap_only])
Arguments Argument Type Description type str The name of the Type where the properties have to be set. value thing Thing containing all the properties to be set.</description></item><item><title>str</title><link>https://docs.thingsdb.net/v0/collection-api/str/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/str/</guid><description>Convert a value to a string. If no value is given, an empty string &amp;quot;&amp;quot; is returned.
When bytes are converted to str then the data will be checked if it contains valid UTF-8 characters. If this is not the case, a value_err() will be raised.
This function does not generate an event.
Function str(value)
Arguments Argument Type Description value any (optional) The value to create a string from.</description></item><item><title>thing</title><link>https://docs.thingsdb.net/v0/collection-api/thing/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/thing/</guid><description>Returns a thing from a specified value, that may be dynamic. If no value is given, a new thing is returned.
This function does not generate an event.
Function thing([id])
Arguments Argument Type Description id int (optional) The Id for the thing to return. Return value Returns a thing. A lookup_err() is returned in case an Id is given which is not found inside the collection.</description></item><item><title>timeval</title><link>https://docs.thingsdb.net/v0/collection-api/timeval/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/timeval/</guid><description>Returns a timeval depending on some optional values.
This function does not generate an event.
Function Interface Arguments Description timeval() None Return a timeval with the current date/tine. timeval(ts) int/float Return a timeval from a given UNIX time stamp. timeval(str, [fmt]) str Return a timeval from a given string. See initialize from string for a details. datetime(int, int, int, [int, [int, [int]]], [zone]) int, int,&amp;hellip; str Return a timeval using values for individual time units, with optional time zone.</description></item><item><title>try</title><link>https://docs.thingsdb.net/v0/collection-api/try/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/try/</guid><description>Try a statement and if the statement fails with an error, then the error is returned. It is also possible to catch only specific errors.
It is not possible to catch internal errors. Such errors should never happen, unless something is really wrong with at least one node.
This function does not generate an event.
Function try(statement, [e0, e1, ..., eX])
Arguments Argument Type Description statement any (required) The statement to try.</description></item><item><title>type</title><link>https://docs.thingsdb.net/v0/collection-api/type/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/type/</guid><description>Returns the type name of a value.
This function does not generate an event.
Function type(value)
Arguments Argument Type Description value any (required) The value to return the type name for. Return value Type name of the given value.
Example Returns the type name of a given value:
[ type( nil ), type( 42 ), type( 3.14 ), ]; Example return value in JSON format</description></item><item><title>type_assert</title><link>https://docs.thingsdb.net/v0/collection-api/type_assert/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/type_assert/</guid><description>Raises a type_err() if the specified expression evaluates to false.
This function does not generate an event.
Function assert(expression, type(s) [, error_msg])
Arguments Argument Type Description expression any (required) The result of this expression will be type tested. type(s) str/list (required) Type name or list with type names to check. error_msg str (optional) Custom error message. Return value Returns nil if the type of the expression evaluates to true.</description></item><item><title>type_count</title><link>https://docs.thingsdb.net/v0/collection-api/type_count/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/type_count/</guid><description>Returns the number of instances of a given Type within a collection.
This function does not generate an event.
Function type_count(type)
Arguments Argument Type Description type str The name of the Type for which the number of instances must be returned. Return value An int representing the number of occurrences.</description></item><item><title>type_info</title><link>https://docs.thingsdb.net/v0/collection-api/type_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/type_info/</guid><description>Returns information about a given Type.
Value Description type_id Internal Type Id (can be used to identify Types in collection events). created_at Time Stamp when the Type is created. modified_at Time Stamp when the Type is last modified or nil if never modified. name Type&amp;rsquo;s name. fields Array with arrays containing two strings, the property name and definition.</description></item><item><title>types_info</title><link>https://docs.thingsdb.net/v0/collection-api/types_info/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/types_info/</guid><description>Returns Type information about all the Types within a collection.
See the type_info() function documentation for an example of the exposed Type information.
This function does not generate an event.
Function types_info()
Arguments None
Return value List with Type mpdata about all Types in the collection.</description></item><item><title>wse</title><link>https://docs.thingsdb.net/v0/collection-api/wse/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://docs.thingsdb.net/v0/collection-api/wse/</guid><description>Stored closures which can potentially make changes to ThingsDB are called closures with side effects and must be wrapped with the wse(..) function. This allows ThingsDB before running the query to make an event.
Function wse() might also be called without arguments which can be used to force ThingsDB to generate an event. This might be useful for when it is really important that a query returns a result based on a state where all previous events are processed.</description></item></channel></rss>