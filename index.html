
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>
    <link href="images/favicon.ico" rel="icon" type="image/ico" />
    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;python&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="shell">ThingsCMD</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#python" class="toc-h2 toc-link" data-title="Python">Python</a>
                  </li>
                  <li>
                    <a href="#shell" class="toc-h2 toc-link" data-title="Shell">Shell</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#query" class="toc-h1 toc-link" data-title="Query">Query</a>
          </li>
          <li>
            <a href="#protocol" class="toc-h1 toc-link" data-title="Protocol">Protocol</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#package" class="toc-h2 toc-link" data-title="Package">Package</a>
                  </li>
                  <li>
                    <a href="#example" class="toc-h2 toc-link" data-title="Example">Example</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#events" class="toc-h1 toc-link" data-title="Events">Events</a>
          </li>
          <li>
            <a href="#names" class="toc-h1 toc-link" data-title="Names">Names</a>
          </li>
          <li>
            <a href="#properties" class="toc-h1 toc-link" data-title="Properties">Properties</a>
          </li>
          <li>
            <a href="#temporary-variable" class="toc-h1 toc-link" data-title="Temporary variable">Temporary variable</a>
          </li>
          <li>
            <a href="#operators" class="toc-h1 toc-link" data-title="Operators">Operators</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#binary-bitwise-operators" class="toc-h2 toc-link" data-title="Binary bitwise operators">Binary bitwise operators</a>
                  </li>
                  <li>
                    <a href="#arithmetic-operators" class="toc-h2 toc-link" data-title="Arithmetic operators">Arithmetic operators</a>
                  </li>
                  <li>
                    <a href="#assignments" class="toc-h2 toc-link" data-title="Assignments">Assignments</a>
                  </li>
                  <li>
                    <a href="#logical-operators" class="toc-h2 toc-link" data-title="Logical operators">Logical operators</a>
                  </li>
                  <li>
                    <a href="#conditional-ternary-operator" class="toc-h2 toc-link" data-title="Conditional (ternary) operator">Conditional (ternary) operator</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#data-types" class="toc-h1 toc-link" data-title="Data Types">Data Types</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#nil" class="toc-h2 toc-link" data-title="Nil">Nil</a>
                  </li>
                  <li>
                    <a href="#string-raw" class="toc-h2 toc-link" data-title="String (raw)">String (raw)</a>
                  </li>
                  <li>
                    <a href="#boolean" class="toc-h2 toc-link" data-title="Boolean">Boolean</a>
                  </li>
                  <li>
                    <a href="#integer" class="toc-h2 toc-link" data-title="Integer">Integer</a>
                  </li>
                  <li>
                    <a href="#floating-point" class="toc-h2 toc-link" data-title="Floating point">Floating point</a>
                  </li>
                  <li>
                    <a href="#regex" class="toc-h2 toc-link" data-title="Regex">Regex</a>
                  </li>
                  <li>
                    <a href="#array" class="toc-h2 toc-link" data-title="Array">Array</a>
                  </li>
                  <li>
                    <a href="#thing" class="toc-h2 toc-link" data-title="Thing">Thing</a>
                  </li>
                  <li>
                    <a href="#closure" class="toc-h2 toc-link" data-title="Closure">Closure</a>
                  </li>
                  <li>
                    <a href="#set" class="toc-h2 toc-link" data-title="Set">Set</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#node-api" class="toc-h1 toc-link" data-title="Node API">Node API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#counters" class="toc-h2 toc-link" data-title="counters">counters</a>
                  </li>
                  <li>
                    <a href="#node" class="toc-h2 toc-link" data-title="node">node</a>
                  </li>
                  <li>
                    <a href="#nodes" class="toc-h2 toc-link" data-title="nodes">nodes</a>
                  </li>
                  <li>
                    <a href="#reset_counters" class="toc-h2 toc-link" data-title="reset_counters">reset_counters</a>
                  </li>
                  <li>
                    <a href="#set_loglevel" class="toc-h2 toc-link" data-title="set_loglevel">set_loglevel</a>
                  </li>
                  <li>
                    <a href="#set_zone" class="toc-h2 toc-link" data-title="set_zone">set_zone</a>
                  </li>
                  <li>
                    <a href="#shutdown" class="toc-h2 toc-link" data-title="shutdown">shutdown</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#thingsdb-api" class="toc-h1 toc-link" data-title="ThingsDB API">ThingsDB API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#collection" class="toc-h2 toc-link" data-title="collection">collection</a>
                  </li>
                  <li>
                    <a href="#collections" class="toc-h2 toc-link" data-title="collections">collections</a>
                  </li>
                  <li>
                    <a href="#del_collection" class="toc-h2 toc-link" data-title="del_collection">del_collection</a>
                  </li>
                  <li>
                    <a href="#del_user" class="toc-h2 toc-link" data-title="del_user">del_user</a>
                  </li>
                  <li>
                    <a href="#grant" class="toc-h2 toc-link" data-title="grant">grant</a>
                  </li>
                  <li>
                    <a href="#new_collection" class="toc-h2 toc-link" data-title="new_collection">new_collection</a>
                  </li>
                  <li>
                    <a href="#new_node" class="toc-h2 toc-link" data-title="new_node">new_node</a>
                  </li>
                  <li>
                    <a href="#new_user" class="toc-h2 toc-link" data-title="new_user">new_user</a>
                  </li>
                  <li>
                    <a href="#pop_node" class="toc-h2 toc-link" data-title="pop_node">pop_node</a>
                  </li>
                  <li>
                    <a href="#rename_collection" class="toc-h2 toc-link" data-title="rename_collection">rename_collection</a>
                  </li>
                  <li>
                    <a href="#rename_user" class="toc-h2 toc-link" data-title="rename_user">rename_user</a>
                  </li>
                  <li>
                    <a href="#replace_node" class="toc-h2 toc-link" data-title="replace_node">replace_node</a>
                  </li>
                  <li>
                    <a href="#revoke" class="toc-h2 toc-link" data-title="revoke">revoke</a>
                  </li>
                  <li>
                    <a href="#set_password" class="toc-h2 toc-link" data-title="set_password">set_password</a>
                  </li>
                  <li>
                    <a href="#set_quota" class="toc-h2 toc-link" data-title="set_quota">set_quota</a>
                  </li>
                  <li>
                    <a href="#user" class="toc-h2 toc-link" data-title="user">user</a>
                  </li>
                  <li>
                    <a href="#users" class="toc-h2 toc-link" data-title="users">users</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#collection-api" class="toc-h1 toc-link" data-title="Collection API">Collection API</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#add" class="toc-h2 toc-link" data-title="add">add</a>
                  </li>
                  <li>
                    <a href="#assert" class="toc-h2 toc-link" data-title="assert">assert</a>
                  </li>
                  <li>
                    <a href="#blob" class="toc-h2 toc-link" data-title="blob">blob</a>
                  </li>
                  <li>
                    <a href="#bool" class="toc-h2 toc-link" data-title="bool">bool</a>
                  </li>
                  <li>
                    <a href="#endswith" class="toc-h2 toc-link" data-title="endswith">endswith</a>
                  </li>
                  <li>
                    <a href="#del" class="toc-h2 toc-link" data-title="del">del</a>
                  </li>
                  <li>
                    <a href="#endswith" class="toc-h2 toc-link" data-title="endswith">endswith</a>
                  </li>
                  <li>
                    <a href="#filter" class="toc-h2 toc-link" data-title="filter">filter</a>
                  </li>
                  <li>
                    <a href="#find" class="toc-h2 toc-link" data-title="find">find</a>
                  </li>
                  <li>
                    <a href="#findindex" class="toc-h2 toc-link" data-title="findindex">findindex</a>
                  </li>
                  <li>
                    <a href="#float" class="toc-h2 toc-link" data-title="float">float</a>
                  </li>
                  <li>
                    <a href="#has" class="toc-h2 toc-link" data-title="has">has</a>
                  </li>
                  <li>
                    <a href="#hasprop" class="toc-h2 toc-link" data-title="hasprop">hasprop</a>
                  </li>
                  <li>
                    <a href="#id" class="toc-h2 toc-link" data-title="id">id</a>
                  </li>
                  <li>
                    <a href="#indexof" class="toc-h2 toc-link" data-title="indexof">indexof</a>
                  </li>
                  <li>
                    <a href="#int" class="toc-h2 toc-link" data-title="int">int</a>
                  </li>
                  <li>
                    <a href="#isarray" class="toc-h2 toc-link" data-title="isarray">isarray</a>
                  </li>
                  <li>
                    <a href="#isascii" class="toc-h2 toc-link" data-title="isascii">isascii</a>
                  </li>
                  <li>
                    <a href="#isbool" class="toc-h2 toc-link" data-title="isbool">isbool</a>
                  </li>
                  <li>
                    <a href="#isfloat" class="toc-h2 toc-link" data-title="isfloat">isfloat</a>
                  </li>
                  <li>
                    <a href="#isinf" class="toc-h2 toc-link" data-title="isinf">isinf</a>
                  </li>
                  <li>
                    <a href="#isint" class="toc-h2 toc-link" data-title="isint">isint</a>
                  </li>
                  <li>
                    <a href="#islist" class="toc-h2 toc-link" data-title="islist">islist</a>
                  </li>
                  <li>
                    <a href="#isnan" class="toc-h2 toc-link" data-title="isnan">isnan</a>
                  </li>
                  <li>
                    <a href="#israw" class="toc-h2 toc-link" data-title="israw">israw</a>
                  </li>
                  <li>
                    <a href="#isset" class="toc-h2 toc-link" data-title="isset">isset</a>
                  </li>
                  <li>
                    <a href="#isstr" class="toc-h2 toc-link" data-title="isstr">isstr</a>
                  </li>
                  <li>
                    <a href="#isthing" class="toc-h2 toc-link" data-title="isthing">isthing</a>
                  </li>
                  <li>
                    <a href="#istuple" class="toc-h2 toc-link" data-title="istuple">istuple</a>
                  </li>
                  <li>
                    <a href="#isutf8" class="toc-h2 toc-link" data-title="isutf8">isutf8</a>
                  </li>
                  <li>
                    <a href="#len" class="toc-h2 toc-link" data-title="len">len</a>
                  </li>
                  <li>
                    <a href="#lower" class="toc-h2 toc-link" data-title="lower">lower</a>
                  </li>
                  <li>
                    <a href="#map" class="toc-h2 toc-link" data-title="map">map</a>
                  </li>
                  <li>
                    <a href="#now" class="toc-h2 toc-link" data-title="now">now</a>
                  </li>
                  <li>
                    <a href="#pop" class="toc-h2 toc-link" data-title="pop">pop</a>
                  </li>
                  <li>
                    <a href="#push" class="toc-h2 toc-link" data-title="push">push</a>
                  </li>
                  <li>
                    <a href="#refs" class="toc-h2 toc-link" data-title="refs">refs</a>
                  </li>
                  <li>
                    <a href="#remove-list" class="toc-h2 toc-link" data-title="remove (list)">remove (list)</a>
                  </li>
                  <li>
                    <a href="#remove-set" class="toc-h2 toc-link" data-title="remove (set)">remove (set)</a>
                  </li>
                  <li>
                    <a href="#rename" class="toc-h2 toc-link" data-title="rename">rename</a>
                  </li>
                  <li>
                    <a href="#set" class="toc-h2 toc-link" data-title="set">set</a>
                  </li>
                  <li>
                    <a href="#splice" class="toc-h2 toc-link" data-title="splice">splice</a>
                  </li>
                  <li>
                    <a href="#startswith" class="toc-h2 toc-link" data-title="startswith">startswith</a>
                  </li>
                  <li>
                    <a href="#str" class="toc-h2 toc-link" data-title="str">str</a>
                  </li>
                  <li>
                    <a href="#t" class="toc-h2 toc-link" data-title="t">t</a>
                  </li>
                  <li>
                    <a href="#test" class="toc-h2 toc-link" data-title="test">test</a>
                  </li>
                  <li>
                    <a href="#try" class="toc-h2 toc-link" data-title="try">try</a>
                  </li>
                  <li>
                    <a href="#type" class="toc-h2 toc-link" data-title="type">type</a>
                  </li>
                  <li>
                    <a href="#upper" class="toc-h2 toc-link" data-title="upper">upper</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li>Source on <a href='https://github.com/thingsdb/ThingsDocs'>GitHub</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the ThingsDB API!</p>

<p>We have language bindings in Python! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>


<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="c"># replace `node.local` with your ThingsDB server address</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>

    <span class="c"># replace `amdin` with yout username and `pass` with your password</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>

<span class="c"># run the example</span>
<span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>

<span class="c"># the will close the client in a nice way</span>
<span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
<span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">wait_closed</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -q <span class="sh">&lt;&lt; EOL
/* Creates a new collection */
new_collection('awesome_things');
EOL
</span></code></pre>
<p>ThingsDB uses a user and password combination for access. A default user <code>admin</code> with password <code>pass</code> is created on a fresh installation.
If you did not yet change the default password, you might want to jump to <a href="#set_password">set password</a></p>
<h2 id='python'>Python</h2>
<blockquote>
<p>Use pip to install the python client:</p>
</blockquote>
<pre class="highlight plaintext"><code>pip install python-thingsdb
</code></pre>
<p>The Python client supports both queries, watching and a framework for using ThingsDB in a really simple way.</p>
<h2 id='shell'>Shell</h2>
<blockquote>
<p>Copy/paste to download and install <em>thingscmd</em></p>
</blockquote>
<pre class="highlight plaintext"><code>pip install thingscmd
</code></pre>
<p>For running thingsdb queries from the shell, a shell tool <a href="https://github.com/thingsdb/ThingsCMD">thingscmd</a> is available.
It is not possible to <em>watch</em> things by using this shell based tool.</p>
<h1 id='query'>Query</h1>
<blockquote>
<p>Example query</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
        <span class="s">'node.local'</span><span class="p">,</span>       <span class="c"># node address</span>
        <span class="mi">9200</span>                <span class="c"># node port, default 9200</span>
    <span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span>
        <span class="s">'admin'</span><span class="p">,</span>            <span class="c"># username</span>
        <span class="s">'pass'</span>              <span class="c"># password</span>
    <span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span>
        <span class="s">"'Hello world!!'"</span><span class="p">,</span>  <span class="c"># query string</span>
        <span class="n">target</span><span class="o">=</span><span class="n">client</span><span class="o">.</span><span class="n">node</span><span class="p">,</span> <span class="c"># collection or scope, defaults to client.thingsdb</span>
    <span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd <span class="se">\</span>
    --node        node.local <span class="se">\</span>
    --user        admin      <span class="se">\</span>
    --password    pass       <span class="se">\</span>
    --scope       node       <span class="se">\</span>
    --query       <span class="s2">"'Hello world!!'"</span>
</code></pre>
<blockquote>
<p>Request in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"'Hello world!!'"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"collection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stuff"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deep"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"blobs"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Queries to ThingsDB can be used to manage <a href="#node-api">nodes</a>, <a href="#thingsdb-api">ThingsDB</a> or to query <a href="#collection-api">collections</a>.</p>

<p>ThingsDB will respond with the last statement result. In case a statement fails, the other statements are
not processed and an <a href="#errors">error</a> is returned. Changes will be synchronized to all nodes and optionally to watchers,
even when an error has ocurred.</p>

<p>A query request has one required field <em>query</em>, and some other optionals:</p>

<table><thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>query</code></td>
<td>string</td>
<td>The query string containing one or more statements. (required)</td>
</tr>
<tr>
<td><code>target</code></td>
<td>string</td>
<td>Target collection, or <code>0</code> for manage queries. (default: <code>0</code>)</td>
</tr>
<tr>
<td><code>deep</code></td>
<td>integer</td>
<td>Specify the depth in the range 0-127 to which <code>things</code> should be fully returned. (default: <code>1</code>)</td>
</tr>
<tr>
<td><code>blobs</code></td>
<td>array</td>
<td>Additional blobs for binary data. (default: <code>[]</code>)</td>
</tr>
</tbody></table>

<p>To send a query you can either use a language binding, see code examples, or if you
want to know how to serialize and send the data, read the <a href="#protocol">protocol</a> section.</p>
<h1 id='protocol'>Protocol</h1>
<p>This is a more in depth view of the protocol used for communication with ThingsDB.
In case you just want to use ThingsDB using one of the language bindings, then this
info can be skipped. If you plan to implement you own connector, then this info might
be useful to you.</p>

<p>Communication with ThingsDB is done over a socket, either using TCP or a UNIX PIPE connection.
Once a connection is made, packages can be send to ThingsDB. Each package starts
with a 8 bytes header using little endian, followed by optional data. Before you can
send queries to ThingsDB, the connection must be authenticated. This can be done by
sending an <code>AUTH</code> package.</p>
<h2 id='package'>Package</h2>
<blockquote>
<p>Package format:</p>
</blockquote>
<pre class="highlight plaintext"><code>┌───────────┬───────────┬───────────┬───────────┬───────────┐
│ LEN (4)   │ ID (2)    │ TYPE (1)  │ CHK (1)   │ DATA (..) │
└───────────┴───────────┴───────────┴───────────┴───────────┘
</code></pre><h3 id='len-unsigned-32bit'>LEN (Unsigned, 32bit)</h3>
<p>Length of the data, the header not included.</p>
<h3 id='id-16bit'>ID (16bit)</h3>
<p>The ID can be used as an identifier of your package. When ThingsDB send a response
on a request, it will use the same ID so this allows you to map a response to a
request. This is useful if you want to send multiple request in parallel.</p>
<h3 id='type-unsigned-8bit'>TYPE (Unsigned, 8bit)</h3>
<p>Package type is used to describe what kind of package is transmitted.</p>
<h4 id='request-type'>Request type</h4>
<table><thead>
<tr>
<th>Type</th>
<th>Number</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>PING</code></td>
<td>32</td>
<td>Ping, useful as keep-alive.</td>
</tr>
<tr>
<td><code>AUTH</code></td>
<td>33</td>
<td>Authentication, expects: <code>[username, password]</code></td>
</tr>
<tr>
<td><code>QUERY_COLLECTION</code></td>
<td>36</td>
<td>Query, see <a href="#query">query</a> for more info.</td>
</tr>
<tr>
<td><code>WATCH</code></td>
<td>48</td>
<td>Watch, see <a href="#watch">watch</a> for more info.</td>
</tr>
<tr>
<td><code>UNWATCH</code></td>
<td>49</td>
<td>Stop watching specified things, see <a href="#watch">watch</a> for more info.</td>
</tr>
</tbody></table>
<h3 id='chk-unsigned-8bit'>CHK (Unsigned, 8bit)</h3>
<p>Inverse of the type: <code>type ^ 0xff</code>, this is used as a check-bit.</p>
<h3 id='data'>DATA</h3>
<p>Data serialized using <a href="https://github.com/transceptor-technology/libqpack">qpack</a>.</p>
<h2 id='example'>Example</h2>
<p>As an example we create an authentication package for the default <em>admin</em> user with password <em>pass</em>.</p>

<p>This is the package data for our authentication request:</p>

<p><code>[&quot;admin&quot;, &quot;pass&quot;]</code></p>

<p>Serializing the above using <em>qpack</em> results in the following <code>12</code> bytes:</p>

<p><code>\xef\x85admin\x84pass</code></p>

<p>Now we create the header, for this example we just use ID 0:</p>

<ul>
<li>Data length (12) <code>\x0c\x00\x00\x00</code></li>
<li>Identifier (0) <code>\x00\x00</code></li>
<li>Auth package type (33) <code>\x21</code></li>
<li>Inverse type check bit (222) <code>\xde</code></li>
</ul>

<p>So our total package will be:</p>

<p><code>\x0c\x00\x00\x00\x00\x00\x21\xde\xef\x85admin\x84pass</code></p>
<h1 id='events'>Events</h1>
<p>When a query uses a statement which makes a change to ThingsDB, then internally ThingsDB will create an <em>event</em> to apply these changes.
Events are applied in order on each node so database consistency is guaranteed.</p>
<h1 id='names'>Names</h1>
<p>The following rules apply to names in ThingsDB:</p>

<ul>
<li>A name must start with a letter or underscore character</li>
<li>A name cannot start with a number</li>
<li>A name can only contain alpha-numeric characters and underscores (A-z, 0-9, and _ )</li>
<li>Names are case-sensitive (thing, Thing and THING are three different names)</li>
</ul>
<h1 id='properties'>Properties</h1>
<p>Properties are <a href="#names">names</a> assigned to a <code>thing</code> with a value. The collection itself is also a <code>thing</code> to which properties can be assigned.
For example: <code>answer = 42;</code> creates a property <code>answer</code> with value <code>42</code> and the property will be assigned to the collection.</p>
<h1 id='temporary-variable'>Temporary variable</h1>
<blockquote>
<p>This code uses a temporary variable:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        $tmp = 'This is a temporary variable!!!';
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># note that we need to escape the $ sign in bash</span>
thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
\$tmp = 'This is a temporary variable!!!';
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">"This is a temporary variable!!!"</span><span class="w">
</span></code></pre>
<p>Can be used to assign a value to a variable which can be used within a query.</p>

<p>A temporary variable can be used withing the scope of a query and is automatically
destroyed after the query is finished.</p>

<p>To create a temporary variable, start with a dollar <code>$</code> sign, followed with a valid <a href="#names">name</a>.</p>

<p>Some valid examples:</p>

<ul>
<li><code>$_ = ...</code></li>
<li><code>$tmp = ...</code></li>
<li><code>$var1 = ...</code></li>
</ul>

<aside class="notice">
It is possible to re-assign or change a temporary variable within a query, as long as the variable
is not in use within the statement, for example:
<p><code>$tmp = [1, 2]; $tmp.map(|| $tmp = nil);</code></p>
<p>...will raise a <code>BAD_REQUEST</code> <i>(cannot assign a new value to `$tmp` while the variable is in use)</i></p>
</aside>
<h1 id='operators'>Operators</h1><h2 id='binary-bitwise-operators'>Binary bitwise operators</h2>
<blockquote>
<p>Binary bitwise operator examples:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        (0b110 &amp; 0b011);
        (0b110 | 0b011);
        (0b110 ^ 0b011);
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
(0b110 &amp; 0b011);
(0b110 | 0b011);
(0b110 ^ 0b011);
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="mi">5</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Can be used on <a href="#integer">integer</a> values.</p>

<table><thead>
<tr>
<th>Operator</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>&amp;</code></td>
<td>Bitwise AND, <code>true</code> if both <code>a</code> and <code>b</code> are <code>1</code>.</td>
</tr>
<tr>
<td><code>&#124;</code></td>
<td>Bitwise OR, <code>true</code> if at least <code>a</code> or <code>b</code> is <code>1</code>.</td>
</tr>
<tr>
<td><code>^</code></td>
<td>Bitwise XOR, <code>true</code> if <code>a</code> and <code>b</code> are different.</td>
</tr>
</tbody></table>

<aside class="notice">
Binary bitwise expressions must be wrapped between <code>()</code> parentheses.
</aside>
<h2 id='arithmetic-operators'>Arithmetic operators</h2>
<blockquote>
<p>Arithmetic examples:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        ( 5 + 2 );
        ( 5 - 2 );
        ( 5 / 2 );
        ( 5 // 2 );
        ( 5 * 2 );
        ( 5 </span><span class="si">% 2</span><span class="s"> );
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
( 5 + 2 );
( 5 - 2 );
( 5 / 2 );
( 5 // 2 );
( 5 * 2 );
( 5 % 2 );
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="mf">2.5</span><span class="p">,</span><span class="w">
    </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="mi">1</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Operator</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>+</code></td>
<td>Addition operator.</td>
</tr>
<tr>
<td><code>-</code></td>
<td>Subtraction operator.</td>
</tr>
<tr>
<td><code>/</code></td>
<td>Float division operator.</td>
</tr>
<tr>
<td><code>//</code></td>
<td>Integer division operator.</td>
</tr>
<tr>
<td><code>*</code></td>
<td>Multiplication operator.</td>
</tr>
<tr>
<td><code>%</code></td>
<td>Modulo operator.</td>
</tr>
</tbody></table>

<aside class="notice">
Arithmetic expressions must be wrapped between <code>()</code> parentheses.
</aside>
<h2 id='assignments'>Assignments</h2>
<p>Assignments will generate an <a href="#events">event</a>.</p>

<table><thead>
<tr>
<th>Operator</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>=</code></td>
<td>Assignment operator.</td>
</tr>
<tr>
<td><code>*=</code></td>
<td>Multiplication assignment.</td>
</tr>
<tr>
<td><code>/=</code></td>
<td>Float division assignment.</td>
</tr>
<tr>
<td><code>//=</code></td>
<td>Integer division assignment.</td>
</tr>
<tr>
<td><code>%=</code></td>
<td>Modulo assignment.</td>
</tr>
<tr>
<td><code>+=</code></td>
<td>Addition assignment.</td>
</tr>
<tr>
<td><code>-=</code></td>
<td>Subtraction assignment</td>
</tr>
<tr>
<td><code>&amp;=</code></td>
<td>Bitwise AND assignment.</td>
</tr>
<tr>
<td><code>^=</code></td>
<td>Bitwise XOR assignment.</td>
</tr>
<tr>
<td><code>&#124;=</code></td>
<td>Bitwise OR assignment.</td>
</tr>
</tbody></table>
<h2 id='logical-operators'>Logical operators</h2>
<blockquote>
<p>Logical <em>short-circuit</em> examples:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="c"># Note: x += 1 never is executed</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        x = 0;
        (false &amp;&amp; x += 1);
        (true || x += 1);
        x;
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Note: x += 1 never is executed</span>
thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
x = 0;
(false &amp;&amp; x += 1);
(true || x += 1);
x;
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="mi">0</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Logical operators are typically used with <a href="#boolean">bool</a> values.</p>

<table><thead>
<tr>
<th>Operator</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>&amp;&amp;</code></td>
<td>Logical AND.</td>
</tr>
<tr>
<td><code>&#124;&#124;</code></td>
<td>Logical OR.</td>
</tr>
</tbody></table>

<p>As logical expressions are evaluated left to right, they are tested for possible <em>&quot;short-circuit&quot;</em> evaluation using the following rules:</p>

<ul>
<li><code>((some falsy expression) &amp;&amp; expr)</code> is short-circuit evaluated to the falsy expression;</li>
<li><code>((some truthy expression) || expr)</code> is short-circuit evaluated to the truthy expression.</li>
</ul>

<p>Short circuit means that the <code>expr</code> parts above are not evaluated, hence any side effects of doing so do not take effect
(e.g., if expr is a function call, the calling never takes place).
This happens because the value of the operator is already determined after the evaluation of the first operand.</p>

<aside class="notice">
Logical expressions must be wrapped between <code>()</code> parentheses.
</aside>
<h2 id='conditional-ternary-operator'>Conditional (ternary) operator</h2>
<blockquote>
<p>Conditional (ternary) operator examples:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        ( 2 &gt; 1 ) ? 'two is larger than one' : 'two is NOT larger than one';
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
( 2 &gt; 1 ) ? 'two is larger than one' : 'two is NOT larger than one';
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">"two is larger than one"</span><span class="w">
</span></code></pre>
<p>The conditional operator returns one of two values based on the logical value of the condition.</p>
<h3 id='syntax'>Syntax:</h3>
<p><code>(condition) ? if-true : if-false</code></p>
<h1 id='data-types'>Data Types</h1>
<p>ThingsDB has some basic</p>
<h2 id='nil'>Nil</h2>
<p>Probably the most simple type, it&#39;s used as <em>no value</em>.
What more can we say about <code>nil</code>?</p>
<h2 id='string-raw'>String (raw)</h2>
<blockquote>
<p>This code creates a <em>raw</em> property <em>greet</em> to collection <em>stuff</em>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="c"># Get collection `stuff`</span>
    <span class="n">stuff</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_collection</span><span class="p">(</span><span class="s">'stuff'</span><span class="p">)</span>

    <span class="c"># Assign property `greet`</span>
    <span class="n">await</span> <span class="n">stuff</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="s">'greet'</span><span class="p">,</span> <span class="s">'Hello world!!'</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Assign property `greet`</span>
thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
greet = 'Hello world!!';
"
EOQ
</span></code></pre>
<p>ThingsDB has only type <code>raw</code> which is used for storing both <em>strings</em> and <em>blob</em> values.</p>
<h3 id='methods'>Methods</h3>
<table><thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#endsswith">endsswith</a></td>
<td>Determines if a string ends with characters given by another string.</td>
</tr>
<tr>
<td><a href="#len">len</a></td>
<td>Returns the length of a string.</td>
</tr>
<tr>
<td><a href="#lower">lower</a></td>
<td>Return a new string in which all case-based characters are in lower case.</td>
</tr>
<tr>
<td><a href="#startswith">startswith</a></td>
<td>Determines if a string starts with characters given by another string.</td>
</tr>
<tr>
<td><a href="#test">test</a></td>
<td>Test if a string matches a given regular expression and return <code>true</code> or <code>false</code>.</td>
</tr>
<tr>
<td><a href="#upper">upper</a></td>
<td>Return a new string in which all case-based characters are in upper case.</td>
</tr>
</tbody></table>
<h2 id='boolean'>Boolean</h2>
<blockquote>
<p>This code creates a <em>bool</em> property <em>is_the_earth_flat</em> to collection <em>stuff</em>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="c"># Get collection `stuff`</span>
    <span class="n">stuff</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_collection</span><span class="p">(</span><span class="s">'stuff'</span><span class="p">)</span>

    <span class="c"># Assign property `is_the_earth_flat`</span>
    <span class="n">await</span> <span class="n">stuff</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="s">'is_the_earth_flat'</span><span class="p">,</span> <span class="ow">not</span> <span class="bp">True</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Assign property `is_the_earth_flat`</span>
thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
is_the_earth_flat = !true;
"
EOQ
</span></code></pre>
<p>Boolean are either <code>true</code> or <code>false</code>.
Other types can convert to <code>bool</code> by using the <code>!</code> (not) operator or the <a href="#bool">bool</a> function.</p>
<h2 id='integer'>Integer</h2>
<blockquote>
<p>This code creates a <em>int</em> property <em>count</em> to collection <em>stuff</em>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="c"># Get collection `stuff`</span>
    <span class="n">stuff</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_collection</span><span class="p">(</span><span class="s">'stuff'</span><span class="p">)</span>

    <span class="c"># Assign property `count`</span>
    <span class="n">await</span> <span class="n">stuff</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="s">'count'</span><span class="p">,</span> <span class="mi">123</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Assign property `count`</span>
thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
count = 123;
"
EOQ
</span></code></pre>
<p>ThingsDB can store 64bit signed integers values. When assigning integer values
larger than 64bit, an <code>OVERFLOW_ERROR</code> will be returned. Other types can be
converted to <code>int</code> by using the <a href="#int">int</a> function.</p>
<h3 id='notations'>Notations</h3>
<table><thead>
<tr>
<th>Base</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>2</td>
<td><code>0b1111011</code></td>
<td>Binary notation starts with <code>0b</code> (zero, lower case <code>b</code>), followed by binary digits (<code>0-1</code>).</td>
</tr>
<tr>
<td>8</td>
<td><code>0o173</code></td>
<td>Octal notation starts with <code>0o</code> (zero, lower case <code>o</code>), followed by octal digits (<code>0-8</code>).</td>
</tr>
<tr>
<td>10</td>
<td><code>123</code></td>
<td>Decimal notation, numbers between zero and nine (<code>0-9</code>).</td>
</tr>
<tr>
<td>16</td>
<td><code>0x7b</code></td>
<td>Hexadecimal notation start with a <code>0x</code> (zero, lower case <code>x</code>), followed by hexadecimal digits (<code>0-9</code>, <code>a-f</code> or <code>A-F</code>).</td>
</tr>
</tbody></table>
<h2 id='floating-point'>Floating point</h2>
<blockquote>
<p>This code creates a <em>float</em> property <em>plank_constant</em> to collection <em>stuff</em>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="c"># Get collection `stuff`</span>
    <span class="n">stuff</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">get_collection</span><span class="p">(</span><span class="s">'stuff'</span><span class="p">)</span>

    <span class="c"># Assign property `plank_constant`</span>
    <span class="n">await</span> <span class="n">stuff</span><span class="o">.</span><span class="n">assign</span><span class="p">(</span><span class="s">'plank_constant'</span><span class="p">,</span> <span class="mf">6.62607004e-34</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Assign property `plank_constant`</span>
thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
plank_constant = 6.62607004e-34;
"
EOQ
</span></code></pre>
<p>ThingsDB uses 64bit to store float values and has support for the <code>e</code> notation and
special <em>float</em> values like <code>inf</code>, <code>-inf</code> and <code>nan</code>.</p>
<h3 id='useful-methods'>Useful methods</h3>
<table><thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#float">float</a></td>
<td>return a float type for a given value.</td>
</tr>
<tr>
<td><a href="#isfloat">isfloat</a></td>
<td>check if the given value is of the float type.</td>
</tr>
<tr>
<td><a href="#isinf">isinf</a></td>
<td>check if the given value is infinite.</td>
</tr>
<tr>
<td><a href="#isnan">isnan</a></td>
<td>check if the given value is not-a-number.</td>
</tr>
</tbody></table>
<h2 id='regex'>Regex</h2>
<blockquote>
<p>This code uses a regular expression for an overly simple email check:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>

    <span class="c"># Note: the email check is oversimplified, do not use in production</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        email_test = /^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;

        /* example usage of our 'email_test' */
        $email = 'info@thingsdb.net';
        $email.test( email_test );
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Note: the email check is oversimplified, do not use in production</span>
thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
email_test = /^\w+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/;

/* example usage of our 'email_test' */
\$email = 'info@thingsdb.net';
\$email.test( email_test );
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">true</span><span class="w">
</span></code></pre>
<p>Regular expression can be constructed using a literal which consists of a pattern enclosed between slashes, as follows: <code>re = /ab+c/;</code>.
It is probably a good idea to store a <code>regex</code> in a variable if you plan to use the regular expression multiple times. This prevents the
requirement to compile the regular expression each time.</p>
<h3 id='methods-that-use-regular-expressions'>Methods that use regular expressions</h3>
<table><thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#test">test</a></td>
<td>A <a href="#string-raw">string</a> method that tests for a match in a string. It returns <code>true</code> or <code>false</code>.</td>
</tr>
</tbody></table>
<h2 id='array'>Array</h2>
<p>An empty array can be constructed as follows: <code>arr = [];</code></p>

<p>Nesting is also possible withing but each nested array will become a <code>tuple</code> which means the array will be immutable.
ThingsDB does this because it wants to update all changes to subscribers and finds the subscribers by the parent object where
the change is  made. Since the parent of a nested array is another array, the <code>thing</code> holding the array would not be found.</p>

<p>Another <em>weird</em> property of ThingsDB is that <code>arrays</code> are always <em>copies</em>, and not by <em>reference</em> as in most languages. This is
because ThingsDB needs to know which subscribers to update with changes made to the <code>array</code>.</p>
<h3 id='methods-2'>Methods</h3>
<table><thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#filter">filter</a></td>
<td>Returns a new <code>array</code> with elements that pass a given test.</td>
</tr>
<tr>
<td><a href="#find">find</a></td>
<td>Returns the first element that pass a given test.</td>
</tr>
<tr>
<td><a href="#findindex">findindex</a></td>
<td>Returns the index of the first element that pass a given test.</td>
</tr>
<tr>
<td><a href="#indexof">indexof</a></td>
<td>Returns the index of a given value, or <code>nil</code> if not found.</td>
</tr>
<tr>
<td><a href="#len">len</a></td>
<td>Returns the length of the array.</td>
</tr>
<tr>
<td><a href="#map">map</a></td>
<td>Returns a new <code>array</code> with the results of calling a provided closure on every element.</td>
</tr>
<tr>
<td><a href="#pop">pop</a></td>
<td>Removes the last element from an array and returns that element.</td>
</tr>
<tr>
<td><a href="#push">push</a></td>
<td>Adds new items to the end of an array, and returns the new length.</td>
</tr>
<tr>
<td><a href="#remove-list">remove</a></td>
<td>Removes the first element that pass a given test and returns that element.</td>
</tr>
<tr>
<td><a href="#splice">splice</a></td>
<td>Determines if a string starts with characters given by another string.</td>
</tr>
</tbody></table>
<h3 id='array-types'>Array Types</h3>
<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>list</td>
<td>Mutable array.</td>
</tr>
<tr>
<td>tuple</td>
<td>Immutable array, <em>nested</em> arrays are always tuples.</td>
</tr>
</tbody></table>

<aside class="notice">
It is not possible to change an array while the array is in use, for example:
<p><code>$tmp = [1, 2, 3]; $tmp.map(|i| $tmp.push(i));</code></p>
<p>...will raise <code>BAD_REQUEST</code> <i>(cannot use function `push` while the array is in use)</i></p>
</aside>
<h2 id='thing'>Thing</h2><h3 id='methods-3'>Methods</h3>
<table><thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#del">del</a></td>
<td>Remove a property.</td>
</tr>
<tr>
<td><a href="#filter">filter</a></td>
<td>Return a new <code>thing</code> with properties that pass a given test.</td>
</tr>
<tr>
<td><a href="#id">id</a></td>
<td>Return the <code>id</code>.</td>
</tr>
<tr>
<td><a href="#len">len</a></td>
<td>Returns the number of items.</td>
</tr>
<tr>
<td><a href="#map">map</a></td>
<td>Returns a <a href="#array">array</a> with the results of calling a provided closure on every item.</td>
</tr>
<tr>
<td><a href="#rename">rename</a></td>
<td>Rename a given property.</td>
</tr>
</tbody></table>
<h2 id='closure'>Closure</h2>
<p>Closures can be used to consume items from a <code>thing</code>, <code>array</code> or <code>set</code>.</p>

<aside class="notice">
It is not possible to use closures with recursion, for example:
<p><code>$a = ||map($a); map($a);</code></p>
<p>...will raise <code>BAD_REQUEST</code> <i>(closures cannot be used recursively)</i></p>
</aside>
<h2 id='set'>Set</h2>
<p>A set is a collection which is unordered and can only contain things.
Each <a href="#thing">thing</a> will only exists once in a collection.</p>
<h3 id='methods-4'>Methods</h3>
<table><thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead><tbody>
</tbody></table>
<h1 id='node-api'>Node API</h1>
<p>The <em>node</em> scope can be used to query node statistics, counters or make
node specific changes.</p>
<h2 id='counters'>counters</h2>
<blockquote>
<p>This code will return node counter values:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span><span class="p">,</span> <span class="n">scope</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="c"># returns counters for `node.local:9200`</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        counters();
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">scope</span><span class="o">.</span><span class="n">node</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># returns counters for `node.local:9200`</span>
thingscmd -n node.local -u admin -p pass -s node -q <span class="sh">&lt;&lt; EOQ "
counters();
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"average_event_duration"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.368566710075053e-05</span><span class="p">,,</span><span class="w">
    </span><span class="s2">"events_committed"</span><span class="p">:</span><span class="w"> </span><span class="mi">80352</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events_failed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events_killed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events_quorum_lost"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events_skipped"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events_unaligned"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"events_with_gap"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"garbage_collected"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"longest_event_duration"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.508100053295493e-05</span><span class="p">,</span><span class="w">
    </span><span class="s2">"queries_received"</span><span class="p">:</span><span class="w"> </span><span class="mi">130944</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns <code>counters</code> for the ThingsDB node you are connected too. Counters start all at zero when ThingsDB
is started, or when the counters are reset by using <a href="#reset-counters">reset_counters()&#39;</a>.</p>

<p>Counters give information about things, queries and events. If you suspect failed queries, then
counters might provide you with more information.</p>

<table><thead>
<tr>
<th>Counter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>average_event_duration</td>
<td>The average event duration in seconds.</td>
</tr>
<tr>
<td>events_committed</td>
<td>Events committed since last counters reset.</td>
</tr>
<tr>
<td>events_failed</td>
<td>Failed events. This is a critical counter which should be 0.</td>
</tr>
<tr>
<td>events_killed</td>
<td>Killed events took too long for receiving the <code>READY</code> status. These event may be processed later.</td>
</tr>
<tr>
<td>events_quorum_lost</td>
<td>Number of times a quorum was not received.</td>
</tr>
<tr>
<td>events_skipped</td>
<td>Events which cannot be committed since an event with a higher <code>id</code> is already processed. These events are moved to a skipped queue.</td>
</tr>
<tr>
<td>events_unaligned</td>
<td>Number of times an event cannot be pushed to the end of the queue and needs re-ordering.</td>
</tr>
<tr>
<td>events_with_gap</td>
<td>Events which are committed but at least one event <code>id</code> was skipped.</td>
</tr>
<tr>
<td>garbage_collected</td>
<td>Number of things which are garbage collected.</td>
</tr>
<tr>
<td>longest_event_duration</td>
<td>Longest event duration, in seconds.</td>
</tr>
<tr>
<td>queries_received</td>
<td>Number of queries where this node acted as the master node.</td>
</tr>
</tbody></table>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>counters();</code></p>
<h3 id='arguments'>Arguments</h3>
<p>None</p>
<h3 id='return-value'>Return value</h3>
<p>Returns the current counter values.</p>
<h2 id='node'>node</h2>
<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h2 id='nodes'>nodes</h2>
<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h2 id='reset_counters'>reset_counters</h2>
<blockquote>
<p>This code will reset the counters on a node:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="c"># resets counters on `node.local:9200`</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        reset_counters();
    '''</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># resets counters on `node.local:9200`</span>
thingscmd -n node.local -u admin -p pass -q <span class="sh">&lt;&lt; EOQ "
reset_counters();
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format (the new collection id)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre>
<p>Resets the <a href="#counters">counters</a> for the ThingsDB node you are connected too.
Other nodes are not affected.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>reset_counters();</code></p>
<h3 id='arguments'>Arguments</h3>
<p>None</p>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>nil</code>.</p>
<h2 id='set_loglevel'>set_loglevel</h2>
<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h2 id='set_zone'>set_zone</h2>
<blockquote>
<p>This code will set the zone to <code>1</code> on <code>node.local:9200</code>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span><span class="p">,</span> <span class="n">scope</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="c"># set the zone to 1 on 'node.local:9200'</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        set_zone(1);
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">scope</span><span class="o">.</span><span class="n">node</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># returns counters for 'node.local:9200'</span>
thingscmd -n node.local -u admin -p pass -s node -q <span class="sh">&lt;&lt; EOQ "
set_zone(1);
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre>
<p>This function sets the zone on the connected ThingsDB node.</p>

<p>Each node can be placed in a zone which is represented by a integer value between <code>0</code> and <code>255</code>.
By default each node is placed into zone <code>0</code>. Zones are used when a query is forwarded by a node
to another node to outsource some work. The <em>other</em> node is selected randomly from all available
nodes, but nodes in the same zone are preferred.</p>

<p>So when do you configure a zone for a node? In case nodes are spread across multiple locations, you might
want to configure the nodes in the same location or region with a specified zone number to reduce
network traffic time when forwarding packages from one node to another.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>set_zone(zone);</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>zone</td>
<td>integer (required)</td>
<td>Integer value between <code>0</code> and <code>255</code> representing the zone number.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>nil</code>.</p>
<h2 id='shutdown'>shutdown</h2>
<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h1 id='thingsdb-api'>ThingsDB API</h1>
<p>ThingsDB can be managed with simple query commands. This allows you to manage
collections, users, access and nodes.</p>
<h2 id='collection'>collection</h2>
<blockquote>
<p>Returns information about collection <em>stuff</em>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        collection('stuff');
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">client</span><span class="o">.</span><span class="n">thingsdb</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -q <span class="sh">&lt;&lt; EOQ "
collection('stuff');
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"collection_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">782</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stuff"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"quota_array_size"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"quota_properties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"quota_raw_size"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"quota_things"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"things"</span><span class="p">:</span><span class="w"> </span><span class="mi">61352</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns information about a specific collection.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h2 id='collections'>collections</h2>
<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h2 id='del_collection'>del_collection</h2>
<blockquote>
<p>This code will delete collection <em>old_things</em>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="c"># Delete collection `old_things`</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">del_collection</span><span class="p">(</span><span class="s">'old_things'</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Delete collection `old_things`</span>
thingscmd -n node.local -u admin -p pass -q <span class="sh">&lt;&lt; EOQ "
del_collection('old_things');
"
EOQ
</span></code></pre>
<p>Delete a collection.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>del_collection(name);</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>raw (required)</td>
<td>Name of the collection to delete.</td>
</tr>
</tbody></table>
<h2 id='del_user'>del_user</h2>
<p>This function generates an <a href="#events">event</a>.</p>
<h2 id='grant'>grant</h2>
<blockquote>
<p>Grant read and watch privileges to user <code>iris</code> to collection <code>stuff</code>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        grant('stuff', 'iris', (READ|WATCH));
    '''</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -q <span class="sh">&lt;&lt; EOQ "
grant('stuff', 'iris', (READ|WATCH));
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format (the new collection id)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre>
<p>Grant collection or general privileges to a user. Access to a user is provided by setting a bit mask to either a collection, or to ThingsDB in general.
Privileges to ThingsDB gives a user the ability to view counters, add, view remove users etc.</p>

<p>The following pre-defined masks are available:</p>

<table><thead>
<tr>
<th>Mask</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>READ</code> (1)</td>
<td>Gives read access.</td>
</tr>
<tr>
<td><code>MODIFY</code> (3)</td>
<td>Gives read and modify access.</td>
</tr>
<tr>
<td><code>WATCH</code> (4)</td>
<td>Gives watch (and un-watch) privileges.</td>
</tr>
<tr>
<td><code>GRANT</code> (11)</td>
<td>Gives read, modify and grant(/revoke) privileges.</td>
</tr>
<tr>
<td><code>FULL</code> (15)</td>
<td>Gives full privileges.</td>
</tr>
</tbody></table>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>grant(target, user, mask);</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>target</code></td>
<td>int/raw</td>
<td>Target collection name or id. With target <code>0</code>, general ThingsDB privileges can be granted.</td>
</tr>
<tr>
<td><code>user</code></td>
<td>raw</td>
<td>User to grant privileges to.</td>
</tr>
<tr>
<td><code>mask</code></td>
<td>int</td>
<td>Bit-mask for setting privileges.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>nil</code> when successful. An <code>INDEX_ERROR</code> is raised if the user or target
does not exist.</p>
<h2 id='new_collection'>new_collection</h2>
<blockquote>
<p>This code will create a collection <em>&quot;awesome_things&quot;</em>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        new_collection('awesome_things');
    '''</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Creates a new collection</span>
thingscmd -n node.local -u admin -p pass -q <span class="sh">&lt;&lt; EOQ "
new_collection('awesome_things');
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format (the new collection id)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="mi">31415</span><span class="w">
</span></code></pre>
<p>Create a new collection.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>new_collection(name);</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>raw (required)</td>
<td>Name of the new collection.</td>
</tr>
</tbody></table>

<aside class="notice">
The user who has created the collection will automatically receive full
access rights to the new collection.
Use <code>grant</code> to give other users access to the collection.
</aside>
<h3 id='return-value'>Return value</h3>
<p>Returns the new collection <code>id</code> if successful. An <code>INDEX_ERROR</code> is raised
if the collection already exists.</p>
<h2 id='new_node'>new_node</h2>
<blockquote>
<p>Create a new node in zone <code>0</code>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="c"># ThingsDB must be started on node2 using the `--secret ...` argument</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node1.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        new_node('my-one-time-serect', 'node2.local');
    '''</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># ThingsDB must be started on node2 using the `--secret ...` argument</span>
thingscmd -n node.local -u admin -p pass -q <span class="sh">&lt;&lt; EOQ "
new_node('my-one-time-serect', 'node2.local');
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format (the new node id)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="mi">1</span><span class="w">
</span></code></pre>
<p>Adds a new node to ThingsDB. Nodes are used for scaling and high availability.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>new_node(secret, ip_address [, port]);</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>secret</code></td>
<td>raw (required)</td>
<td>Secret used to initially connect to the new node.</td>
</tr>
<tr>
<td><code>ip_address</code></td>
<td>raw (required)</td>
<td>IP Address (IPv4 or IPv6) of the new node.</td>
</tr>
<tr>
<td><code>port</code></td>
<td>int (optional)</td>
<td>Node port (<code>listen_node_port</code>), an integer between 0 an 65535, default <strong>9220</strong>.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns the new node <code>id</code> if successful.</p>
<h2 id='new_user'>new_user</h2>
<blockquote>
<p>Create a new user <code>iris</code> with password <code>siri</code>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        new_user('iris', 'siri');
    '''</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -q <span class="sh">&lt;&lt; EOQ "
new_user('iris', 'siri');
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format (the new user id)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre>
<p>Creates a new user to ThingsDB. The new user is created without any access privileges.
, so probably you also
want to assign some privileges to the new user by using <a href="#grant">grant(...)</a>.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>new_user(user, password);</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>user</code></td>
<td>raw (required)</td>
<td>Username, between 1 and 128 <em>graphical</em> characters.</td>
</tr>
<tr>
<td><code>password</code></td>
<td>raw (required)</td>
<td>Password for the new user, between 1 and 128 <em>printable</em> characters.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns the new user <code>id</code> if successful. An <code>INDEX_ERROR</code> is raised
if the user already exists.</p>
<h2 id='pop_node'>pop_node</h2>
<p>This function generates an <a href="#events">event</a>.</p>
<h2 id='rename_collection'>rename_collection</h2>
<p>This function generates an <a href="#events">event</a>.</p>
<h2 id='rename_user'>rename_user</h2>
<p>This function generates an <a href="#events">event</a>.</p>
<h2 id='replace_node'>replace_node</h2>
<blockquote>
<p>Replace node with id 1:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="c"># node3.local must be started using the `--secret ...` argument</span>
    <span class="c"># and the node with id 1 must be turned off</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node1.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        replace_node(1, 'my-one-time-serect', 'node3.local');
    '''</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># node3.local must be started using the `--secret ...` argument</span>
<span class="c"># and the node with id 1 must be turned off</span>
thingscmd -n node.local -u admin -p pass -q <span class="sh">&lt;&lt; EOQ "
replace_node(1, 'my-one-time-serect', 'node3.local');
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre>
<p>Replace a node in ThingsDB. This can be used if an existing node has a
unrecoverable state, for example a hardware failure. This function requires
a node id as its first argument which can be queried using the <a href="#nodes">nodes()</a>
function.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>replace_node(node_id, secret, ip_address [, port]);</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>node_id</code></td>
<td>int (required)</td>
<td>Node id of the node to replace.</td>
</tr>
<tr>
<td><code>secret</code></td>
<td>raw (required)</td>
<td>Secret used to initially connect to the new node.</td>
</tr>
<tr>
<td><code>ip_address</code></td>
<td>raw (required)</td>
<td>IP Address (IPv4 or IPv6) of the new node.</td>
</tr>
<tr>
<td><code>port</code></td>
<td>int (optional)</td>
<td>Node port (<code>listen_node_port</code>), an integer between 0 an 65535, default <strong>9220</strong>.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>nil</code> if successful.</p>
<h2 id='revoke'>revoke</h2>
<blockquote>
<p>Revoke all privileges for user <code>iris</code> on collection <code>stuff</code>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        revoke('stuff', 'iris', FULL);
    '''</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -q <span class="sh">&lt;&lt; EOQ "
revoke('stuff', 'iris', FULL);
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format (the new collection id)</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre>
<p>Revoke collection or general privileges from a user. See <a href="#grant">grant</a> for more information on
how access privileges can be set for a user.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>revoke(target, user, mask);</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>target</code></td>
<td>int/raw</td>
<td>Target collection name or id. With target <code>0</code>, general ThingsDB privileges can be revoked.</td>
</tr>
<tr>
<td><code>user</code></td>
<td>raw</td>
<td>User to revoke privileges from.</td>
</tr>
<tr>
<td><code>mask</code></td>
<td>int</td>
<td>Bit-mask for revoking privileges.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>nil</code> when successful. An <code>INDEX_ERROR</code> is raised if the user or target
does not exist.</p>
<h2 id='set_password'>set_password</h2>
<blockquote>
<p>This code changes the password for use <em>admin</em>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">set_password</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'my_secret_password'</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Change the password for user `admin`</span>
thingscmd -n node.local -u admin -p pass -q <span class="sh">&lt;&lt; EOQ "
set_password('admin', 'my_secret_password');
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre>
<p>Change a users password.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>set_password(username, new_password);</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>username</td>
<td>raw (required)</td>
<td>Name of the user</td>
</tr>
<tr>
<td>new_password</td>
<td>raw (required)</td>
<td>New password, can be anything from 1 to 128 printable characters</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>nil</code> if successful. An <code>INDEX_ERROR</code> is returned
if the user does not exist and <code>BAD_REQUEST</code> if the new password is not compliant.</p>
<h2 id='set_quota'>set_quota</h2>
<blockquote>
<p>This code sets a quota on the number of things and disables the properties quota on collection <em>stuff</em>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span><span class="p">,</span> <span class="n">scope</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            set_quota('stuff', 'things', 10000),
            set_quota('stuff', 'properties', nil),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="n">scope</span><span class="o">.</span><span class="n">thingsdb</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -q <span class="sh">&lt;&lt; EOQ "
[
    set_quota('stuff', 'things', 10000),
    set_quota('stuff', 'properties', nil),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="kc">null</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Quota limits can be set on collections. The following quota limits can be set:</p>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>things</code></td>
<td>Maximum number of <a href="#thing">things</a> allowed in a collection.</td>
</tr>
<tr>
<td><code>properties</code></td>
<td>Maximum number of <a href="#properties">properties</a> which can be assigned to a thing.</td>
</tr>
<tr>
<td><code>array_size</code></td>
<td>Maximum array length. This quota type applies to all <a href="#array">array type</a>.</td>
</tr>
<tr>
<td><code>raw_size</code></td>
<td>Maximum <a href="#string-raw">raw</a> value size. When this quota is set, both queries and blob values are limited to this quota.</td>
</tr>
</tbody></table>

<p>If a quota limit is reached, then the affected query will raise <code>MAX_QUOTA_ERROR</code>.</p>

<p>The current quota values can be viewed with <a href="#collection">collection(...)</a> or <a href="#collections">collections()</a>.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>set_quota(collection, quota_type, quota)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>collection</td>
<td>raw/int (required)</td>
<td>Collection <em>name</em> or <em>id</em>.</td>
</tr>
<tr>
<td>quota_type</td>
<td>raw (required)</td>
<td>Must be one of <code>&#39;things&#39;</code>, <code>&#39;properties&#39;</code>, <code>&#39;array_size&#39;</code> or <code>&#39;raw_size&#39;</code>.</td>
</tr>
<tr>
<td>quota</td>
<td>int/nil (required)</td>
<td>Integer value to set the quota limit or <code>nil</code> to disable the quota.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p><code>nil</code> when successful.</p>
<h2 id='user'>user</h2>
<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h2 id='users'>users</h2>
<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h1 id='collection-api'>Collection API</h1>
<blockquote>
<p>This code returns the <em>id</em> of collection <em>stuff</em></p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">'id()'</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="s1">'id()'</span>
</code></pre><h2 id='add'>add</h2>
<blockquote>
<p>This code adds things to a set:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        s = set(); a = {item: 'a'}; b = {item: 'b'};
        s.add(a, a, b);
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
s = set(); a = {item: 'a'}; b = {item: 'b'};
s.add(a, a, b);
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="mi">2</span><span class="w">
</span></code></pre>
<p>Adds new thing to the <a href="#set">set</a> and returns the number of things which are
actually added to the set. For example <code>my_set.add( t(42) );</code> will return <code>0</code>
if <code>my_set</code> already contains thing <code>#42</code>.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>set</em>.<code>add(thing1, thing1, ..., thingX)</code></p>
<h3 id='return-value'>Return value</h3>
<p>Returns the number of <code>things</code> which are added to the set.</p>
<h2 id='assert'>assert</h2>
<blockquote>
<p>This code shows how assert can be used:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="c"># evaluate 1 &gt; 2 with a custom message and error code</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        assert( (1 &gt; 2), 'one is still smaller than two', 1);
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
    <span class="c"># Error code is set: `res.error_code == 1`</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
assert( (1 &gt; 2), 'one is still smaller than two', 1);
"
EOQ
</span></code></pre>
<blockquote>
<p>Returns with an  <code>ASSERTION_ERROR</code> exception</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"error_msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"one is still smaller than two"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"error_code"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Raises <code>ASSERTION_ERROR</code> if the specified statement evaluates to <code>false</code>.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>assert(statement [, error_msg] [, error_code])</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>statement</td>
<td>any (required)</td>
<td>The statement to evaluate.</td>
</tr>
<tr>
<td>msg</td>
<td>raw (optional)</td>
<td>Custom error message.</td>
</tr>
<tr>
<td>code</td>
<td>int (optional)</td>
<td>Return a custom error code between 1 and 32. If not given, the error code is <code>ASSERTION_ERROR</code> (-105)</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Assert returns with the return value of the given statement when the statement evaluates to <code>true</code>. Otherwise
an <code>ASSERTION_ERROR</code> is raised.</p>
<h2 id='blob'>blob</h2>
<blockquote>
<p>This code assigns the ThingsDB logo to an attribute <em>logo</em> using a blob:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>

    <span class="c"># TODO: replace with ThingsDB logo</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span>
        <span class="s">'https://upload.wikimedia.org/wikipedia/commons/1/15/Siridb-logo.svg'</span><span class="p">)</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        logo = blob(0);
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">,</span> <span class="n">blobs</span><span class="o">=</span><span class="p">[</span><span class="n">resp</span><span class="o">.</span><span class="n">read</span><span class="p">()])</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># Note: thingscmd supports only one blob per query, so this is always blob(0)</span>
wget <span class="s1">'https://upload.wikimedia.org/wikipedia/commons/1/15/Siridb-logo.svg'</span> | <span class="se">\</span>
thingscmd -n node.local -u admin -p pass -c stuff -q  <span class="sh">&lt;&lt; EOQ "
logo = blob(0);
"
EOQ
</span></code></pre>
<p>Blobs can be used to send binary data to ThingsDB. Each query request allows you to send
an array of <em>blob</em> values together with the query. Within the query it is then possible
to use this function to <em>get</em> the blob value.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>blob(index)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>index</td>
<td>int (required)</td>
<td>Index of a blob in the blobs array. This value may be negative, for example: <code>-1</code> can be used to get the last blob in the array.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns the blob. An <code>INDEX_ERROR</code> is returned
if the blob at the given <code>index</code> does not exist.</p>
<h2 id='bool'>bool</h2>
<blockquote>
<p>This code shows some return values for <strong><em>bool()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            bool(),
            bool(nil),
            bool({}),
            bool({answer: 42}),
            bool([]),
            bool([1, 2, 3]),
            bool(''),
            bool('forty two'),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    bool(),
    bool(nil),
    bool({}),
    bool({answer: 42}),
    bool([]),
    bool([1, 2, 3]),
    bool(''),
    bool('forty two'),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Returns an <a href="#integer">bool</a> from a specified value.
If no value is given, <code>false</code> is returned.</p>

<p>Types with a <em>length</em> evaluate to <code>true</code> when the length is <em>not</em> <code>0</code> and <code>false</code> otherwise.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>bool(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (optional)</td>
<td>The value where to return a boolean value for.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>A boolean value.</p>
<h2 id='endswith'>endswith</h2>
<blockquote>
<p>This code shows an example using <strong><em>contains()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        'the answer to life the universe and everything'.contains('life');
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
'the answer to life the universe and everything'.contains('life');
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">true</span><span class="w">
</span></code></pre>
<p>Determines if a given string is a substring of a string.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>string</em>.<code>contains(search_string)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>search_string</td>
<td>raw (required)</td>
<td>The characters to be searched for in the string.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> the given characters are found as a substring and otherwise <code>false</code>.</p>
<h2 id='del'>del</h2>
<blockquote>
<p>This code shows some return values for <strong><em>del()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        x = 'create and delete this prop';
        del('x');
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
x = 'create and delete this prop';
del('x');
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre>
<p>Delete a property from a <a href="#thing">thing</a>.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>thing</em>.<code>del(property)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>property</td>
<td>raw (required)</td>
<td>Name of the property to delete.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>nil</code> if successful. An <code>INDEX_ERROR</code> is returned
if the property does not exist or <code>BAD_REQUEST</code> in case the given property is
not a valid <a href="#names">name</a>.</p>
<h2 id='endswith'>endswith</h2>
<blockquote>
<p>This code shows an example using <strong><em>endswith()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        'the answer to life the universe and everything'.endswith('everything');
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
'the answer to life the universe and everything'.endswith('everything');
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">true</span><span class="w">
</span></code></pre>
<p>Determines if a string ends with characters given by another string.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>string</em>.<code>endswith(search_string)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>search_string</td>
<td>raw (required)</td>
<td>The characters to be searched for at the end of this string.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> the given characters are found at the end of the string and otherwise <code>false</code>.</p>
<h2 id='filter'>filter</h2>
<blockquote>
<p>This code shows an example using <strong><em>filter()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        $users = [{name: 'Iris', age: 6}, {name: 'Sasha', age: 34}];

        /*
         * Return all users with age 18 or above and
         * a `thing` with only property `age`
         */

        [
            $users.filter(|user| (user.age &gt;= 18)),
            $users[0].filter(|prop| (prop == 'age')),
            set($users).filter(|user| (user.name == 'Iris')),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -d 3 -q <span class="sh">&lt;&lt; EOQ "
\$users = [{name: 'Iris', age: 6}, {name: 'Sasha', age: 34}];

/*
 * Return all users with age 18 or above,
 * a thing with only property age,
 * and all users with name 'Iris'.
 */

[
    \$users.filter(|user| (user.age &gt;= 18)),
    \$users[0].filter(|prop| (prop == 'age')),
    set(\$users).filter(|user| (user.name == 'Iris')),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Sasha"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"age"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Iris"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>If this method is used on a <code>thing</code>, then a new thing will be returned with only
the properties that pass the test. If the method is used on an <code>array</code>, then a
new array is returned with elements that pass the test and if used on a <code>set</code>, then
the return value will be a new set.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>iterable</em>.<code>filter(callback)</code></p>
<h3 id='arguments'>Arguments</h3>
<p>The <em>callback</em> argument must be a <code>closure</code> which input values depend on the type the method is called on.</p>

<table><thead>
<tr>
<th>Iterable</th>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>array</td>
<td>item, index</td>
<td>Iterate over all items in the array. Both <code>item</code> and <code>index</code> are optional.</td>
</tr>
<tr>
<td>set</td>
<td>thing, id</td>
<td>Iterate over things in the set. Both <code>thing</code> and <code>id</code> are optional.</td>
</tr>
<tr>
<td>thing</td>
<td>name, value</td>
<td>Iterate over the thing properties. Both <code>name</code> and <code>value</code> are optional.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>A new <code>array</code>, <code>set</code> or <code>thing</code> with the elements or properties that pass the test.
If no elements or properties pass the test, an empty array, set or thing will be returned.</p>
<h2 id='find'>find</h2>
<blockquote>
<p>This code shows an example using <strong><em>find()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        users.find(|user| user.name.startswith('Jeroen'));
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
users.find(|user| user.name.startswith('Jeroen'));
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jeroen@transceptor.technology"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jeroen van der Heijden"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This function returns the value of the first element in the <a href="#array">array</a> or <a href="#thing">thing</a> that satisfies the callback function.
Otherwise <code>nil</code> is returned unless an alternative return value is specified.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>iterable</em>.<code>find(callback, [alt])</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>callback</td>
<td>closure</td>
<td>Closure to execute on each value until the closure evaluates to true.</td>
</tr>
<tr>
<td>alt</td>
<td>any (optional)</td>
<td>Alternative value which is returned if no item has passed the <em>callback</em> test.</td>
</tr>
</tbody></table>

<p>Explanation of the <em>callback</em> argument:</p>

<table><thead>
<tr>
<th>Iterable</th>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>array</td>
<td>item, index</td>
<td>Iterate over items in the array. Both item and index are optional.</td>
</tr>
<tr>
<td>thing</td>
<td>name, value</td>
<td>Iterate over thing properties. Both name and value are optional.</td>
</tr>
</tbody></table>

<aside class="notice">
The <code>alt</code> argument will be <i>lazy</i> evaluated. Consider the following example:
<p><code>elems.find(|e| (e.name == "foo"), items.pop());</code><p>
Here, the item will <i>only</i> be popped, in case <code>e</code> with <code>name</code> <i>foo</i> is <i>not</i> found in <code>elems</code>.
</aside>
<h3 id='return-value'>Return value</h3>
<p>The value of the first element in the array or thing that satisfies the provided testing function;
otherwise, <code>nil</code> or a specified alternative value is returned.</p>
<h2 id='findindex'>findindex</h2>
<blockquote>
<p>This code shows an example using <strong><em>findindex()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        users.findindex(|user| user.name.startswith('Jeroen'));
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
users.findindex(|user| user.name.startswith('Jeroen'));
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="mi">42</span><span class="w">
</span></code></pre>
<p>This function returns the index of the first element in an <a href="#array">array</a> that satisfies the callback function.
Otherwise <code>nil</code> is returned.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>array</em>.<code>findindex(callback)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>callback</td>
<td>closure</td>
<td>The statement to try.</td>
</tr>
</tbody></table>

<p>Explanation of the <em>callback</em> argument:</p>

<table><thead>
<tr>
<th>Iterable</th>
<th>Callback arguments</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>array</td>
<td>item, index</td>
<td>Iterate over items in the array. Both item and index are optional.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>The index of the first element in the array or thing that satisfies the provided testing function;
otherwise, <code>nil</code> is returned.</p>
<h2 id='float'>float</h2>
<blockquote>
<p>This code shows some return values for <strong><em>float()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            float(),
            float(42),
            float('0.365e+3 days'),
            float('0xFF'),
            float(true),
            float(false),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    float(),
    float(42),
    float('0.365e+3 days'),
    float('0xFF'),
    float(true),
    float(false),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="mf">42.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">365.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">255.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">1.0</span><span class="p">,</span><span class="w">
    </span><span class="mf">0.0</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Returns a <a href="#floating-point">float</a> from a specified value.
If no value is given, the default float <code>0.0</code> is returned.</p>

<p>If the specified value is of type <a href="#string-raw">raw</a>, then the initial characters
of the string are converted until a non-digit character is found.
Initial white space is ignored and the number may start with an optional <code>+</code> or <code>-</code> sign.</p>

<p>Type <a href="#boolean">bool</a> values are converted to <code>1.0</code> for <code>true</code> and <code>0.0</code> for <code>false</code>.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>float(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (optional)</td>
<td>The value where to create a floating point value for.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>A floating point value. Other type than <code>float</code>, <code>raw</code>, <code>bool</code> or <code>int</code>
will raise a <code>BAD_REQUEST</code>.</p>
<h2 id='has'>has</h2>
<blockquote>
<p>This code shows an example use case of <strong><em>has()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        $iris = {name: 'Iris'};
        $set = set([$iris]);

        /* Check if $iris is in the set */
        $set.has($iris);
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
\$iris = {name: 'Iris'};
\$set = set([\$iris]);

/* Check if $iris is in the set */
\$set.has(\$iris);
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">true</span><span class="w">
</span></code></pre>
<p>Determines if a <a href="#set">set</a> has a given thing.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>set</em>.<code>has(thing)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>thing</td>
<td>thing (required)</td>
<td>Thing to check.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> the given thing is found in the set and otherwise <code>false</code>.</p>
<h2 id='hasprop'>hasprop</h2>
<blockquote>
<p>This code shows an example use case of <strong><em>hasprop()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        $tmp = {name: 'Iris'};
        $tmp.hasprop('name');
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
\$tmp = {name: 'Iris'};
\$tmp.hasprop('name');
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">true</span><span class="w">
</span></code></pre>
<p>Determines if a <a href="#thing">thing</a> has a given property.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>thing</em>.<code>hasprop(property)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>property</td>
<td>raw (required)</td>
<td>Name of the property to check.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> the given property is found and otherwise <code>false</code>.</p>
<h2 id='id'>id</h2>
<blockquote>
<p>This code uses <code>id()</code> to return a collection id:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        id();
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
id();
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="mi">3</span><span class="w">
</span></code></pre>
<p>Returns the <code>id</code> of a <a href="#thing">thing</a>.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>thing</em>.<code>id()</code></p>
<h3 id='arguments'>Arguments</h3>
<p>None</p>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>id</code> of a thing.</p>
<h2 id='indexof'>indexof</h2>
<blockquote>
<p>This code shows an example using <strong><em>indexof()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        users.indexof(t(42));
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
users.indexof(t(42));
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format when <code>t(42)</code> was found at the 7th place, so at index 6.</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="mi">6</span><span class="w">
</span></code></pre>
<p>Returns the first index at which a given value can be found in the <a href="#array">array</a>, or <code>nil</code> if it is not present.
The index of an array starts at <code>0</code>, so the first item has index <code>0</code> the second <code>1</code> and so on.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>array</em>.<code>indexof(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any</td>
<td>The value to find the index for.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Index at which the first item matches a given value, or <code>nil</code> if it is not present.</p>
<h2 id='int'>int</h2>
<blockquote>
<p>This code shows some return values for <strong><em>int()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            int(),
            int(2.718),
            int(-1.9),
            int('365 days'),
            int('0xFF'),
            int(true),
            int(false),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    int(),
    int(2.718),
    int(-1.9),
    int('365 days'),
    int('0xFF'),
    int(true),
    int(false),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="mi">365</span><span class="p">,</span><span class="w">
    </span><span class="mi">255</span><span class="p">,</span><span class="w">
    </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="mi">0</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Returns an <a href="#integer">int</a> from a specified value.
If no value is given, the default integer <code>0</code> is returned.</p>

<p>If the specified value was a <a href="#floating-point">float</a> value, then the
new integer value will be rounded towards zero.</p>

<p>If the specified value is of type <a href="#string-raw">raw</a>, then the initial characters
of the string are converted until a non-digit character is found.
Initial white space is ignored and the number may start with an optional <code>+</code> or <code>-</code> sign.</p>

<p>Type <a href="#boolean">bool</a> values are converted to <code>1</code> for <code>true</code> and <code>0</code> for <code>false</code>.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>int(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (optional)</td>
<td>The value where to create an integer value for.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>An integer value. In case the integer value is too large for a 64bit integer,
an <code>OVERFLOW_ERROR</code> is raised. Other type than <code>float</code>, <code>raw</code>, <code>bool</code> or <code>int</code>
will raise a <code>BAD_REQUEST</code>.</p>
<h2 id='isarray'>isarray</h2>
<blockquote>
<p>This code shows some return values for <strong><em>isarray()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            isarray( [] ),
            isarray( $tmp = [['nested']] ),
            isarray( $tmp[0] ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    isarray( [] ),
    isarray( \$tmp = [['nested']] ),
    isarray( \$tmp[0] ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function determines whether the value passed to this function
is an <a href="#array">array</a> type or not. The functions <a href="#islist">islist</a> and
<a href="#istuple">istuple</a> can be used to check if the array is mutable.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>isarray(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to be tested for being an array.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> the value passed is array else it returns <code>false</code>.</p>
<h2 id='isascii'>isascii</h2>
<blockquote>
<p>This code shows some return values for <strong><em>isascii()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            isascii( 'ԉ' ),
            isascii( 'pi' ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    isascii( 'ԉ' ),
    isascii( 'pi' ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function determines whether the value passed to this function is of
type <code>raw</code> and contains only valid ascii characters.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>isascii(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to be tested.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> is the given value is of type <code>raw</code> and contains only ascii characters, else <code>false</code>.</p>
<h2 id='isbool'>isbool</h2>
<blockquote>
<p>This code shows some return values for <strong><em>isbool()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            isbool( true ),
            isbool( 'true' ),
            isbool( nil ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    isbool( true ),
    isbool( 'true' ),
    isbool( nil ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function determines whether the value passed to this function
is a <a href="#boolean">bool</a> or not.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>isbool(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to be tested.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> is the passed value is a boolean else it returns <code>false</code>.</p>
<h2 id='isfloat'>isfloat</h2>
<blockquote>
<p>This code shows some return values for <strong><em>isfloat()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            isfloat( 42.0 ),
            isfloat( 0.42e+2 ),
            isfloat( 42 ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    isfloat( 42.0 ),
    isfloat( 0.42e+2 ),
    isfloat( 42 ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function determines whether the value passed to this function
is a <a href="#floating-point">floating point</a> value or not.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>isfloat(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to be tested.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> is the passed value is a float else it returns <code>false</code>.</p>
<h2 id='isinf'>isinf</h2>
<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h2 id='isint'>isint</h2>
<blockquote>
<p>This code shows some return values for <strong><em>isint()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            isint( 42 ),
            isint( 0x2a ),
            isint( 42.0 ),
            isint( '42' ),
            isint( true ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    isint( 42 ),
    isint( 0x2a ),
    isint( 42.0 ),
    isint( '42' ),
    isint( true ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function determines whether the value passed to this function
is an <a href="#integer">integer</a> or not.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>isint(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to be tested.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> is the passed value is an integer else it returns <code>false</code>.</p>
<h2 id='islist'>islist</h2>
<blockquote>
<p>This code shows some return values for <strong><em>islist()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            islist( [] ),
            islist( $tmp = [['nested']] ),
            islist( $tmp[0] ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    islist( [] ),
    islist( \$tmp = [['nested']] ),
    islist( \$tmp[0] ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function determines whether the value passed to this function
is a mutable <a href="#array">array</a> or not.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>islist(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to be tested.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> is the passed value is a <code>list</code>, else it returns <code>false</code>.</p>
<h2 id='isnan'>isnan</h2>
<blockquote>
<p>This code shows some return values for <strong><em>isnan()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            isnan( true ),
            isnan( 123 ),
            isnan( 3.14 ),
            isnan( inf ),
            isnan( [] ),
            isnan( {} ),
            isnan( nan ),
            isnan( '123' ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    isnan( true ),
    isnan( 123 ),
    isnan( 3.14 ),
    isnan( inf ),
    isnan( [] ),
    isnan( {} ),
    isnan( nan ),
    isnan( '123' ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function determines whether the value passed to this function is a number.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>isnan(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to be tested.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> is the given value is not a number, else <code>false</code>.</p>
<h2 id='israw'>israw</h2>
<blockquote>
<p>This code shows some return values for <strong><em>israw()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>

    <span class="c"># TODO: replace with ThingsDB logo</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span>
        <span class="s">'https://upload.wikimedia.org/wikipedia/commons/1/15/Siridb-logo.svg'</span><span class="p">)</span>

    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            israw( 'some string' ),
            israw( blob(0) ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">,</span> <span class="n">blobs</span><span class="o">=</span><span class="p">[</span><span class="n">resp</span><span class="o">.</span><span class="n">read</span><span class="p">()])</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>wget <span class="s1">'https://upload.wikimedia.org/wikipedia/commons/1/15/Siridb-logo.svg'</span> | <span class="se">\</span>
thingscmd -n node.local -u admin -p pass -c stuff -q  <span class="sh">&lt;&lt; EOQ "
[
    israw( 'some string' ),
    israw( blob(0) ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function determines whether the value passed to this function is of
type <code>raw</code>.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>israw(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to be tested.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> is the given value is of type <code>raw</code>, else <code>false</code>.</p>
<h2 id='isset'>isset</h2>
<blockquote>
<p>This code shows some return values for <strong><em>isset()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            isset( [] ),
            isset( set() ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    isset( [] ),
    isset( set() ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function determines whether the value passed to this function
is a <a href="#set">set</a> or not.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>isset(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to be tested.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> is the passed value is a <code>set</code>, else it returns <code>false</code>.</p>
<h2 id='isstr'>isstr</h2>
<p>Alias for <a href="#isutf8">isutf8</a>.</p>
<h2 id='isthing'>isthing</h2>
<blockquote>
<p>This code shows some return values for <strong><em>isthing()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            isthing( {} ),
            isthing( [] ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    isthing( {} ),
    isthing( [] ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function determines whether the value passed to this function
is a <a href="#thing">thing</a> or not.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>isthing(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to be tested.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> is the passed value is a thing else it returns <code>false</code>.</p>
<h2 id='istuple'>istuple</h2>
<blockquote>
<p>This code shows some return values for <strong><em>istuple()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            istuple( [] ),
            istuple( $tmp = [['nested'], set()] ),
            istuple( $tmp[0] ),
            istuple( $tmp[1] ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    istuple( [] ),
    istuple( \$tmp = [['nested'], set()] ),
    istuple( \$tmp[0] ),
    istuple( \$tmp[1] ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function determines whether the value passed to this function
is a immutable <a href="#array">array</a> or not. At least nested arrays are of kind tuple.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>istuple(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to be tested.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> is the passed value is a tuple else it returns <code>false</code>.</p>
<h2 id='isutf8'>isutf8</h2>
<blockquote>
<p>This code shows some return values for <strong><em>isutf8()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            isutf8( 'ԉ' ),
            isutf8( 'pi' ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    isutf8( 'ԉ' ),
    isutf8( 'pi' ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function determines whether the value passed to this function is of
type <code>raw</code> and contains valid utf8.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>isutf8(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to be tested.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> is the given value is of type <code>raw</code> and contains valid utf8, else <code>false</code>.</p>
<h2 id='len'>len</h2>
<blockquote>
<p>This code uses <code>len()</code> to return the number of items in a collection:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        len();
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
len();
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="mi">4</span><span class="w">
</span></code></pre>
<p>Returns the length of an <a href="#array">array</a> or <a href="#string-raw">string</a>, or the number of items in a <a href="#thing">thing</a>.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>iterable</em>.<code>len()</code></p>
<h3 id='arguments'>Arguments</h3>
<p>None</p>
<h3 id='return-value'>Return value</h3>
<p>Returns length of the iterable.</p>
<h2 id='lower'>lower</h2>
<blockquote>
<p>Example using <strong><em>lower()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        'Hello World!!'.lower();
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
'Hello World!!'.lower();
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">"hello world!!"</span><span class="w">
</span></code></pre>
<p>Return a new string in which all case-based characters are in lower case.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>string</em>.<code>lower()</code></p>
<h2 id='map'>map</h2>
<blockquote>
<p>This code shows an example using <strong><em>map()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        $users = [{name: 'Iris', age: 6}, {name: 'Sasha', age: 34}];

        /* returns ['Iris', 'Sasha'] */
        $users.map(|user| user.name);
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -d 3 -q <span class="sh">&lt;&lt; EOQ "
\$users = [{name: 'Iris', age: 6}, {name: 'Sasha', age: 34}];

/* returns ['Iris', 'Sasha'] */
\$users.map(|user| user.name);
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="s2">"Iris"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Sasha"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Iterate over items in an <a href="#array">array</a>, <a href="#set">set</a> or over all properties on a <a href="#thing">thing</a>.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>iterable</em>.<code>map(callback)</code></p>
<h3 id='arguments'>Arguments</h3>
<p>Explanation of the <em>callback</em> argument:</p>

<table><thead>
<tr>
<th>Iterable</th>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>array</td>
<td>item, index</td>
<td>Iterate over all items in the array. Both item and index are optional.</td>
</tr>
<tr>
<td>set</td>
<td>thing, id</td>
<td>Iterate over things in the set. Both <code>thing</code> and <code>id</code> are optional.</td>
</tr>
<tr>
<td>thing</td>
<td>name, value</td>
<td>Iterate over the thing properties. Both name and value are optional.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>A new array with each element being the result of the callback function.</p>
<h2 id='now'>now</h2>
<blockquote>
<p>This code shows the current timestamp:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="c"># current timestamp</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        now();
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># current timestamp</span>
thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
now();
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="mf">1551093313.6622682</span><span class="w">
</span></code></pre>
<p>Return the time in seconds since the epoch as a <a href="#floating-point">floating point</a> number.</p>

<p>If you require the <em>same</em> time multiple times within a query,
then call <code>now()</code> only once and save it to a temporary variable, for example <code>$now = now();</code></p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>now()</code></p>
<h3 id='arguments'>Arguments</h3>
<p>None</p>
<h3 id='return-value'>Return value</h3>
<p>Current timestamp.</p>
<h2 id='pop'>pop</h2>
<blockquote>
<p>This code show an example usage of <strong><em>pop()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        (arr = [1.2.3]).pop();
        arr;
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
(arr = [1, 2, 3]).pop();
arr;
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="p">[</span><span class="w">
        </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="mi">2</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Removes the last element from an <a href="#array">array</a> and returns that element.
This method changes the length of the array. The <code>pop()</code> method works
on a <code>list</code> type array, but not on a <code>tuple</code> since tuples are immutable.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>list</em>.<code>pop()</code></p>
<h3 id='arguments'>Arguments</h3>
<p>None</p>
<h3 id='return-value'>Return value</h3>
<p>The removed element from the array. An <code>INDEX_ERROR</code> is raised if the array is empty.</p>
<h2 id='push'>push</h2>
<blockquote>
<p>This code pushes values to a list:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        list = [1, 2, 3];
        list.push(4, 5, 6);
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
list = [1, 2, 3];
list.push(4, 5, 6);
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="mi">6</span><span class="w">
</span></code></pre>
<p>Adds new items to the end of an array, and returns the new length.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>list</em>.<code>push(item1, item2, ..., itemX)</code></p>
<h3 id='return-value'>Return value</h3>
<p>Returns the new length of the list.</p>
<h2 id='refs'>refs</h2>
<blockquote>
<p>Returns the reference count of a given value:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            refs( 'some string' ),
            refs( a = b = c = 42 ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    refs( 'some string' ),
    refs( a = b = c = 42 ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="mi">5</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Returns the reference count of a value.</p>

<p>The count returned is generally one higher than you might expect,
because it includes the (temporary) reference.</p>

<aside class="notice">
Different nodes might return different reference values since the reference counter
can be higher of lower depending on how the value is stored and used.
</aside>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>refs(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to return the reference count for.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Reference count of the given value.</p>
<h2 id='remove-list'>remove (list)</h2>
<blockquote>
<p>This code shows an example using <strong><em>remove()</em></strong> on a list:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        $tmp = [1, 2, 3, 4];
        [
            $tmp.remove(|x| (x </span><span class="si">% 2</span><span class="s"> == 0)),
            $tmp,
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q  <span class="sh">&lt;&lt; EOQ "
\$tmp = [1, 2, 3, 4];
[
    \$tmp.remove(|x| (x % 2 == 0)),
    \$tmp,
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="p">[</span><span class="w">
        </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="mi">3</span><span class="p">,</span><span class="w">
        </span><span class="mi">4</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function removes and returns the value of the <em>first</em> element in the <a href="#array">array</a>
that satisfies the callback function.
Otherwise <code>nil</code> is returned unless an alternative return value is specified.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>list</em>.<code>remove(callback, [alt])</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>callback</td>
<td>closure</td>
<td>Closure to execute on each value until the closure evaluates to true.</td>
</tr>
<tr>
<td>alt</td>
<td>any (optional)</td>
<td>Alternative value which is returned if no item has passed the <em>callback</em> test.</td>
</tr>
</tbody></table>

<p>Explanation of the <em>callback</em> argument:</p>

<table><thead>
<tr>
<th>Iterable</th>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>array</td>
<td>item, index</td>
<td>Iterate over items in the array. Both item and index are optional.</td>
</tr>
</tbody></table>

<aside class="notice">
The <code>alt</code> argument will be <i>lazy</i> evaluated. Consider the following example:
<p><code>elems.remove(|e| (e.name == "foo"), items.pop());</code><p>
Here, the item will <i>only</i> be popped, in case <code>e</code> with <code>name</code> <i>foo</i> is <i>not</i> found in <code>elems</code>.
</aside>
<h3 id='return-value'>Return value</h3>
<p>The value of the first element in the array or thing that satisfies the provided testing function;
otherwise, <code>nil</code> or a specified alternative value is returned.</p>
<h2 id='remove-set'>remove (set)</h2>
<blockquote>
<p>This code shows an example using <strong><em>remove()</em></strong> on a set:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        $t1 = {x:1}; $t2 = {x:2}; $t3 = {x:3}; $t4 = {x:4};
        $s = set([$t1, $t2, $t3, $t4]);
        [
            $s.remove(|t| (t.x &lt; 3)),
            $s.remove($t1, $t2, $t3, $t4),
        ]
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -d 3 -q  <span class="sh">&lt;&lt; EOQ "
\$t1 = {x:1}; \$t2 = {x:2}; \$t3 = {x:3}; \$t4 = {x:4};
\$s = set([\$t1, \$t2, \$t3, \$t4]);
[
    \$s.remove(|t| (t.x &lt; 3)),
    \$s.remove(\$t1, \$t2, \$t3, \$t4),
]
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"x"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function can be used to remove <code>things</code> from a <code>set</code>.</p>

<p>If a closure is used, then all things that satisfy the test are removed from the set
and returned as list. The order of the removed things is not guaranteed since the set itself
is unordered.</p>

<p>It is also possible to specify <code>things</code> as arguments. In this case a list is returned with
all the things which are removed from the set, in the order that the arguments are used.
Things which are not found in the set are ignored.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function-2'>Function</h3>
<p><em>set</em>.<code>remove(callback)</code></p>

<p>Or</p>

<p><em>set</em>.<code>remove(thing1, thing2, ..., thingX)</code></p>
<h3 id='arguments-2'>Arguments</h3>
<p>Explanation of the <em>callback</em> argument:</p>

<table><thead>
<tr>
<th>Iterable</th>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>set</td>
<td>thing, thing ID</td>
<td>Iterate over things in the set. Both <code>thing</code> and <code>thing ID</code> are optional.</td>
</tr>
</tbody></table>
<h3 id='return-value-2'>Return value</h3>
<p>A list with the removed <code>things</code> from the set or an empty list if nothing is removed.</p>
<h2 id='rename'>rename</h2>
<blockquote>
<p>This code renames property <code>world</code> to <code>universe</code>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        world = 'huge';
        rename('world', 'universe');
        map(|k|k);
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
world = 'huge';
rename('world', 'universe');
map(|k|k);
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="s2">"universe"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Rename a property on a <a href="#thing">thing</a>. The <em>destination</em> property with value will be overwritten
if it already existed.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>thing</em>.<code>rename(current, dest)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>current</td>
<td>raw (required)</td>
<td>Name of the property to rename.</td>
</tr>
<tr>
<td>dest</td>
<td>raw (required)</td>
<td>New name of the property.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>nil</code> is the rename was successful.</p>
<h2 id='set'>set</h2>
<blockquote>
<p>This code shows some return values for <strong><em>set()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        set( [{}, {}] );
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
set( [{}, {}] );
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"!"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Returns a new empty <a href="#set">set</a>. If an array is given, then all elements in the
given array must be or type <code>thing</code> and a new set is returned based on the
given things.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>set([array])</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>array</td>
<td>array (optional)</td>
<td>Optional array to initialize the set.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>A new set.</p>
<h2 id='splice'>splice</h2>
<blockquote>
<p>This code replaces an element in a list at position 2:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        months = ['Jan', 'Feb', 'April'];
        months.splice(2, 1, 'March');       /* Returns: ['April'] */
        months;
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
months = ['Jan', 'Feb', 'April'];
months.splice(2, 1, 'March');       /* Returns: ['April'] */
months;
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="s2">"Jan"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"Feb"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"March"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>The <code>splice()</code> method changes the contents of an array by removing or replacing
existing elements and/or adding new elements in place.</p>

<p>This function generates an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>list</em>.<code>splice(start, [delete_count, [item1, item2, ..., itemX]])</code>)`</p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>start</td>
<td>int (required)</td>
<td>Start index in the array. If negative, it will begin that many elements from the end of the array.</td>
</tr>
<tr>
<td>delete_count</td>
<td>int (optional)</td>
<td>Number of item to remove from <code>start</code>. If <code>&lt;= 0</code>, no items will be removed.</td>
</tr>
<tr>
<td>item1, item2, ..., itemX</td>
<td>any (optional)</td>
<td>Items to add, beginning from <code>start</code>.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>An array containing the deleted elements. If only one element is removed,
an array of one element is returned. If no elements are removed, an empty array is returned.</p>
<h2 id='startswith'>startswith</h2>
<blockquote>
<p>This code shows an example using <strong><em>startswith()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        'the answer to life the universe and everything'.startswith('the answer');
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
'the answer to life the universe and everything'.startswith('the answer');
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="kc">true</span><span class="w">
</span></code></pre>
<p>Determines if a string starts with characters given by another string.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>string</em>.<code>startswith(search_string)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>search_string</td>
<td>raw (required)</td>
<td>The characters to be searched for at the start of this string.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns <code>true</code> the given characters are found at the start of the string and otherwise <code>false</code>.</p>
<h2 id='str'>str</h2>
<p>Convert a value to a string. If no value is given, an empty string <code>&quot;&quot;</code> is returned.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>str(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (optional)</td>
<td>The value whose</td>
</tr>
</tbody></table>
<h2 id='t'>t</h2>
<blockquote>
<p>This code shows an example usage of <strong><em>t()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="c"># we use `deep=2` to specify we want to fetch things 2 levels deep</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        t(7);
        t(8,);
        t(7, 8);
    '''</span><span class="p">,</span> <span class="n">deep</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># we use `deep=2` to specify we want to fetch things 2 levels deep</span>
thingscmd -n node.local -u admin -p pass -c stuff -d 2 -q <span class="sh">&lt;&lt; EOQ "
t(7);
t(8,);
t(7, 8);
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
        </span><span class="s2">"greet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
            </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"world!!"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
            </span><span class="s2">"greet"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"#"</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w">
            </span><span class="s2">"to"</span><span class="p">:</span><span class="w"> </span><span class="s2">"world!!"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This function can be used to get a thing or multiple things by id.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>t(id1, id2, ..., idX)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id1, id2, ..., idX</td>
<td>int (at least one required)</td>
<td>The thing(s) to return.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Returns a <a href="#thing">thing </a> or an <em>array-of-things</em> based on given id&#39;s.
An <code>INDEX_ERROR</code> is returned in case at least one id is not found inside the collection.</p>

<aside class="notice">
You can force an <i>array</i>, even with only one id. Just add an extra comma,
for example: <code>thing(666,);</code> and this will return an array with one thing: <code>[{"#": 666, ...}]</code>
</aside>
<h2 id='test'>test</h2>
<blockquote>
<p>Examples using <strong><em>test()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            'Hello world!!'.test(/^hello/),
            'Hello world!!'.test(/^hello/i),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    'Hello world!!'.test(/^hello/),
    'Hello world!!'.test(/^hello/i),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="kc">true</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Test if a string matches a given <a href="#regex">regular expression</a> and return <code>true</code> or <code>false</code>.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>string</em>.<code>test(regex)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>regex</td>
<td>regex (required)</td>
<td>The regular expression to test against the string.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p><code>true</code> if there is a match between the string and the specified regular expression, otherwise <code>false</code>.</p>
<h2 id='try'>try</h2>
<blockquote>
<p>This code shows some return values for <strong><em>try()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            try( (1/0) ),
            try( (1/0), 0 ),
            try( (1/0), 0, 'ZERO_DIV_ERROR' ),
            try( (1/0), 0, 97 ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    try( (1/0) ),
    try( (1/0), 0 ),
    try( (1/0), 0, 'ZERO_DIV_ERROR' ),
    try( (1/0), 0, 97 ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="mi">0</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Try a statement and if the statement fails with an error, then <code>nil</code> is returned unless
an alternative return value is specified. It is also possible to <em>catch</em> only specific
<a href="#errors">errors</a>.</p>

<aside class="warning">
It is possible to catch all errors with the exception of <code>INTERNAL_ERROR</code>.
Such error should never happen, unless something is really wrong with at least one node.
</aside>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>try(statement, [alt, [e0, e1, ..., eX]])</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>statement</td>
<td>any (required)</td>
<td>The statement to try.</td>
</tr>
<tr>
<td>alt</td>
<td>any (optional)</td>
<td>Alternative value which is returned if the statement has failed.</td>
</tr>
<tr>
<td>e0, e1, ..., eX</td>
<td>int/raw (optional)</td>
<td>Only catch specific errors, if omitted, catch all errors. Error codes and names are accepted.</td>
</tr>
</tbody></table>

<aside class="notice">
The <code>alt</code> argument will be <i>lazy</i> evaluated. Consider the following example:
<p><code>try( (1/x), items.pop(), "ZERO_DIV_ERROR");</code></p>
In this example, the item will only be popped in case <code>x</code> is equal to <code>0</code>.
</aside>
<h3 id='return-value'>Return value</h3>
<p>The value for the specified <em>statement</em> unless the statement has failed.</p>
<h2 id='type'>type</h2>
<blockquote>
<p>Returns the type name of a given value:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        [
            type( nil ),
            type( 42 ),
            type( 3.14 ),
        ];
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
[
    type( nil ),
    type( 42 ),
    type( 3.14 ),
];
"
EOQ
</span></code></pre>
<blockquote>
<p>Example return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
    </span><span class="s2">"nil"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"int"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"float"</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Returns the type name of a value.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><code>type(value)</code></p>
<h3 id='arguments'>Arguments</h3>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>value</td>
<td>any (required)</td>
<td>The value to return the type name for.</td>
</tr>
</tbody></table>
<h3 id='return-value'>Return value</h3>
<p>Type name of the given value.</p>
<h2 id='upper'>upper</h2>
<blockquote>
<p>Example using <strong><em>upper()</em></strong>:</p>
</blockquote>
<pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">thingsdb.client</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">async</span> <span class="k">def</span> <span class="nf">example</span><span class="p">():</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s">'node.local'</span><span class="p">)</span>
    <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">authenticate</span><span class="p">(</span><span class="s">'admin'</span><span class="p">,</span> <span class="s">'pass'</span><span class="p">)</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">await</span> <span class="n">client</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s">r'''
        'Hello World!!'.upper();
    '''</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s">'stuff'</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">example</span><span class="p">())</span>
</code></pre><pre class="highlight shell tab-shell"><code>thingscmd -n node.local -u admin -p pass -c stuff -q <span class="sh">&lt;&lt; EOQ "
'Hello World!!'.upper();
"
EOQ
</span></code></pre>
<blockquote>
<p>Return value in JSON format</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="s2">"HELLO WORLD!!"</span><span class="w">
</span></code></pre>
<p>Return a new string in which all case-based characters are in upper case.</p>

<p>This function does <em>not</em> generate an <a href="#events">event</a>.</p>
<h3 id='function'>Function</h3>
<p><em>string</em>.<code>upper()</code></p>
<h1 id='errors'>Errors</h1>
<p>ThingsDB uses the following error codes:</p>

<table><thead>
<tr>
<th>Error</th>
<th>Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td><code>OVERFLOW_ERROR</code></td>
<td>96</td>
<td>Integer is too large to fit a 64 bit signed integer.</td>
</tr>
<tr>
<td><code>ZERO_DIV_ERROR</code></td>
<td>97</td>
<td>Trying a division or module by zero.</td>
</tr>
<tr>
<td><code>MAX_QUOTA_ERROR</code></td>
<td>98</td>
<td>Your collection has quotas set and the limit is reached.</td>
</tr>
<tr>
<td><code>AUTH_ERROR</code></td>
<td>99</td>
<td>Wrong credentials or a request while the connection is not authenticated.</td>
</tr>
<tr>
<td><code>FORBIDDEN</code></td>
<td>100</td>
<td>You lack the privileges to do the request.</td>
</tr>
<tr>
<td><code>INDEX_ERROR</code></td>
<td>101</td>
<td>Index out of range or trying to access an invalid property.</td>
</tr>
<tr>
<td><code>BAD_REQUEST</code></td>
<td>102</td>
<td>Invalid data, for example an invalid data type used in a query.</td>
</tr>
<tr>
<td><code>QUERY_ERROR</code></td>
<td>103</td>
<td>Syntax error in the query.</td>
</tr>
<tr>
<td><code>NODE_ERROR</code></td>
<td>104</td>
<td>At least one node has an issue while processing the request.</td>
</tr>
<tr>
<td><code>ASSERTION_ERROR</code></td>
<td>105</td>
<td><a href="#assert">Assertion</a> statement has failed, the error code may have been set to an integer in the range <code>1-32</code>.</td>
</tr>
<tr>
<td><code>INTERNAL_ERROR</code></td>
<td>127</td>
<td>Node is probably out-of-memory or out-of-disk-space.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="shell">ThingsCMD</a>
          </div>
      </div>
    </div>
  </body>
</html>
